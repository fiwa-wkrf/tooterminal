function BigInteger(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,n,i,r,o){for(;--o>=0;){var a=t*this[e++]+n[i]+r,r=Math.floor(a/67108864);n[i++]=67108863&a}return r}function am2(e,t,n,i,r,o){var a=32767&t;for(t>>=15;--o>=0;){var s=32767&this[e],c=this[e++]>>15,u=t*s+c*a,r=((s=a*s+((32767&u)<<15)+n[i]+(1073741823&r))>>>30)+(u>>>15)+t*c+(r>>>30);n[i++]=1073741823&s}return r}function am3(e,t,n,i,r,o){var a=16383&t;for(t>>=14;--o>=0;){var s=16383&this[e],c=this[e++]>>14,u=t*s+c*a,r=((s=a*s+((16383&u)<<14)+n[i]+r)>>28)+(u>>14)+t*c;n[i++]=268435455&s}return r}function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var n=BI_RC[e.charCodeAt(t)];return null==n?-1:n}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.s=this.t=0;for(var i=e.length,r=!1,o=0;--i>=0;){var a=8==n?255&e[i]:intAt(e,i);a<0?"-"==e.charAt(i)&&(r=!0):(r=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else if(64==e)e=6;else{if(4!=e)return this.toRadix(e);e=2}var t,n=(1<<e)-1,i=!1,r="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(t=this[o]>>a)>0&&(i=!0,r=int2char(t));o>=0;)a<e?(t=(this[o]&(1<<a)-1)<<e-a,t|=this[--o]>>(a+=this.DB-e)):(t=this[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),t>0&&(i=!0),i&&(r+=int2char(t));return i?r:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function nbits(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),e>>1!=0&&(n+=1),n}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}}function bnpSubTo(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function bnpMultiplyTo(e,t){var n=this.abs(),i=e.abs(),r=n.t;for(t.t=r+i.t;--r>=0;)t[r]=0;for(r=0;r<i.t;++r)t[r+n.t]=n.am(0,i[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,n){var i=e.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=nbi());var o=nbi(),a=this.s,e=e.s,s=this.DB-nbits(i[i.t-1]);if(s>0?(i.lShiftTo(s,o),r.lShiftTo(s,n)):(i.copyTo(o),r.copyTo(n)),i=o.t,0!=(r=o[i-1])){var c=r*(1<<this.F1)+(i>1?o[i-2]>>this.F2:0),u=this.FV/c,c=(1<<this.F1)/c,l=1<<this.F2,d=n.t,p=d-i,f=null==t?nbi():t;for(o.dlShiftTo(p,f),n.compareTo(f)>=0&&(n[n.t++]=1,n.subTo(f,n)),BigInteger.ONE.dlShiftTo(i,f),f.subTo(o,o);o.t<i;)o[o.t++]=0;for(;--p>=0;){var h=n[--d]==r?this.DM:Math.floor(n[d]*u+(n[d-1]+l)*c);if((n[d]+=o.am(0,h,n,p,0,i))<h)for(o.dlShiftTo(p,f),n.subTo(f,n);n[d]<--h;)n.subTo(f,n)}null!=t&&(n.drShiftTo(i,t),a!=e&&BigInteger.ZERO.subTo(t,t)),n.t=i,n.clamp(),s>0&&n.rShiftTo(s,n),a<0&&BigInteger.ZERO.subTo(n,n)}}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var n=nbi(),i=nbi(),r=t.convert(this),o=nbits(e)-1;for(r.copyTo(n);--o>=0;)if(t.sqrTo(n,i),(e&1<<o)>0)t.mulTo(i,r,n);else var a=n,n=i,i=a;return t.revert(n)}function bnModPowInt(e,t){var n;return n=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,n)}function bnClone(){var e=nbi();return this.copyTo(e),e}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=nbv(t=Math.pow(e,t)),i=nbi(),r=nbi(),o="";for(this.divRemTo(n,i,r);i.signum()>0;)o=(t+r.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,r);return r.intValue().toString(e)+o}function bnpFromRadix(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),r=!1,o=0,a=0,s=0;s<e.length;++s){var c=intAt(e,s);c<0?"-"==e.charAt(s)&&0==this.signum()&&(r=!0):(a=t*a+c,++o>=n&&(this.dMultiply(i),this.dAddOffset(a,0),a=o=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),r&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this);else{var i=7&e;(n=[]).length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function bnToByteArray(){var e=this.t,t=[];t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-- >0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)i<8?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t}function bnEquals(e){return 0==this.compareTo(e)}function bnMin(e){return this.compareTo(e)<0?this:e}function bnMax(e){return this.compareTo(e)>0?this:e}function bnpBitwiseTo(e,t,n){var i,r,o=Math.min(e.t,this.t);for(i=0;i<o;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function op_and(e,t){return e&t}function bnAnd(e){var t=nbi();return this.bitwiseTo(e,op_and,t),t}function op_or(e,t){return e|t}function bnOr(e){var t=nbi();return this.bitwiseTo(e,op_or,t),t}function op_xor(e,t){return e^t}function bnXor(e){var t=nbi();return this.bitwiseTo(e,op_xor,t),t}function op_andnot(e,t){return e&~t}function bnAndNot(e){var t=nbi();return this.bitwiseTo(e,op_andnot,t),t}function bnNot(){for(var e=nbi(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft(e){var t=nbi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bnShiftRight(e){var t=nbi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function lbit(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+lbit(this[e]);return this.s<0?this.t*this.DB:-1}function cbit(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function bnBitCount(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=cbit(this[n]^t);return e}function bnTestBit(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function bnpChangeBit(e,t){var n=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function bnSetBit(e){return this.changeBit(e,op_or)}function bnClearBit(e){return this.changeBit(e,op_andnot)}function bnFlipBit(e){return this.changeBit(e,op_xor)}function bnpAddTo(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()}function bnAdd(e){var t=nbi();return this.addTo(e,t),t}function bnSubtract(e){var t=nbi();return this.subTo(e,t),t}function bnMultiply(e){var t=nbi();return this.multiplyTo(e,t),t}function bnSquare(){var e=nbi();return this.squareTo(e),e}function bnDivide(e){var t=nbi();return this.divRemTo(e,t,null),t}function bnRemainder(e){var t=nbi();return this.divRemTo(e,null,t),t}function bnDivideAndRemainder(e){var t=nbi(),n=nbi();return this.divRemTo(e,t,n),[t,n]}function bnpDMultiply(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function NullExp(){}function nNop(e){return e}function nMulTo(e,t,n){e.multiplyTo(t,n)}function nSqrTo(e,t){e.squareTo(t)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;var r;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()}function bnpMultiplyUpperTo(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=nbi();return e.copyTo(t),this.reduce(t),t}function barrettRevert(e){return e}function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function barrettSqrTo(e,t){e.squareTo(t),this.reduce(t)}function barrettMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnModPow(e,t){var n,i,r=e.bitLength(),o=nbv(1);if(r<=0)return o;n=r<18?1:r<48?3:r<144?4:r<768?5:6,i=r<8?new Classic(t):t.isEven()?new Barrett(t):new Montgomery(t);var a=[],s=3,c=n-1,u=(1<<n)-1;if(a[1]=i.convert(this),n>1)for(r=nbi(),i.sqrTo(a[1],r);s<=u;)a[s]=nbi(),i.mulTo(r,a[s-2],a[s]),s+=2;for(var l,d=e.t-1,p=!0,f=nbi(),r=nbits(e[d])-1;d>=0;){for(r>=c?l=e[d]>>r-c&u:(l=(e[d]&(1<<r+1)-1)<<c-r,d>0&&(l|=e[d-1]>>this.DB+r-c)),s=n;0==(1&l);)l>>=1,--s;if((r-=s)<0&&(r+=this.DB,--d),p)a[l].copyTo(o),p=!1;else{for(;s>1;)i.sqrTo(o,f),i.sqrTo(f,o),s-=2;s>0?i.sqrTo(o,f):(s=o,o=f,f=s),i.mulTo(f,a[l],o)}for(;d>=0&&0==(e[d]&1<<r);)i.sqrTo(o,f),s=o,o=f,f=s,--r<0&&(r=this.DB-1,--d)}return i.revert(o)}function bnGCD(e){var t=this.s<0?this.negate():this.clone(),e=e.s<0?e.negate():e.clone();if(t.compareTo(e)<0)var n=t,t=e,e=n;var n=t.getLowestSetBit(),i=e.getLowestSetBit();if(i<0)return t;for(n<i&&(i=n),i>0&&(t.rShiftTo(i,t),e.rShiftTo(i,e));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return i>0&&e.lShiftTo(i,e),e}function bnpModInt(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n}function bnModInverse(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger.ZERO;for(var n=e.clone(),i=this.clone(),r=nbv(1),o=nbv(0),a=nbv(0),s=nbv(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(r.isEven()&&o.isEven()||(r.addTo(this,r),o.subTo(e,o)),r.rShiftTo(1,r)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(i)>=0?(n.subTo(i,n),t&&r.subTo(a,r),o.subTo(s,o)):(i.subTo(n,i),t&&a.subTo(r,a),s.subTo(o,s))}return 0!=i.compareTo(BigInteger.ONE)?BigInteger.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s}function bnIsProbablePrime(e){var t,n=this.abs();if(1==n.t&&n[0]<=lowprimes[lowprimes.length-1]){for(t=0;t<lowprimes.length;++t)if(n[0]==lowprimes[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<lowprimes.length;){for(var i=lowprimes[t],r=t+1;r<lowprimes.length&&i<lplim;)i*=lowprimes[r++];for(i=n.modInt(i);t<r;)if(i%lowprimes[t++]==0)return!1}return n.millerRabin(e)}function bnpMillerRabin(e){var t=this.subtract(BigInteger.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var i=t.shiftRight(n);(e=e+1>>1)>lowprimes.length&&(e=lowprimes.length);for(var r=nbi(),o=0;o<e;++o){r.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var a=r.modPow(i,this);if(0!=a.compareTo(BigInteger.ONE)&&0!=a.compareTo(t)){for(var s=1;s++<n&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0}function SeededRandom(){}function SRnextBytes(e){var t;for(t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())}function Arcfour(){this.j=this.i=0,this.S=[]}function ARC4init(e){var t,n,i;for(t=0;t<256;++t)this.S[t]=t;for(t=n=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,i=this.S[t],this.S[t]=this.S[n],this.S[n]=i;this.j=this.i=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function SHA256(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}return e=function(e){for(var e=e.replace(/\r\n/g,"\n"),t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e),function(e){for(var t="",n=0;n<4*e.length;n++)t+="0123456789abcdef".charAt(e[n>>2]>>8*(3-n%4)+4&15)+"0123456789abcdef".charAt(e[n>>2]>>8*(3-n%4)&15);return t}(function(e,i){var r,o,a,s,c,u,l,d,p,f,h,m,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],y=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],v=Array(64);for(e[i>>5]|=128<<24-i%32,e[15+(i+64>>9<<4)]=i,p=0;p<e.length;p+=16){for(r=y[0],o=y[1],a=y[2],s=y[3],c=y[4],u=y[5],l=y[6],d=y[7],f=0;f<64;f++)v[f]=f<16?e[f+p]:t(t(t(n(v[f-2],17)^n(v[f-2],19)^v[f-2]>>>10,v[f-7]),n(v[f-15],7)^n(v[f-15],18)^v[f-15]>>>3),v[f-16]),h=t(t(t(t(d,n(c,6)^n(c,11)^n(c,25)),c&u^~c&l),g[f]),v[f]),m=t(n(r,2)^n(r,13)^n(r,22),r&o^r&a^o&a),d=l,l=u,u=c,c=t(s,h),s=a,a=o,o=r,r=t(h,m);y[0]=t(r,y[0]),y[1]=t(o,y[1]),y[2]=t(a,y[2]),y[3]=t(s,y[3]),y[4]=t(c,y[4]),y[5]=t(u,y[5]),y[6]=t(l,y[6]),y[7]=t(d,y[7])}return y}(function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}function SHA1(e){function t(e,t){return e<<t|e>>>32-t}function n(e){var t,n,i="";for(t=7;t>=0;t--)n=e>>>4*t&15,i+=n.toString(16);return i}var i,r,o,a,s,c,u,l=Array(80),d=1732584193,p=4023233417,f=2562383102,h=271733878,m=3285377520;o=(e=function(e){for(var e=e.replace(/\r\n/g,"\n"),t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e)).length;var g=[];for(i=0;i<o-3;i+=4)r=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),g.push(r);switch(o%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(o-1)<<24|8388608;break;case 2:i=e.charCodeAt(o-2)<<24|e.charCodeAt(o-1)<<16|32768;break;case 3:i=e.charCodeAt(o-3)<<24|e.charCodeAt(o-2)<<16|e.charCodeAt(o-1)<<8|128}for(g.push(i);g.length%16!=14;)g.push(0);for(g.push(o>>>29),g.push(o<<3&4294967295),e=0;e<g.length;e+=16){for(i=0;i<16;i++)l[i]=g[e+i];for(i=16;i<=79;i++)l[i]=t(l[i-3]^l[i-8]^l[i-14]^l[i-16],1);for(r=d,o=p,a=f,s=h,c=m,i=0;i<=19;i++)u=t(r,5)+(o&a|~o&s)+c+l[i]+1518500249&4294967295,c=s,s=a,a=t(o,30),o=r,r=u;for(i=20;i<=39;i++)u=t(r,5)+(o^a^s)+c+l[i]+1859775393&4294967295,c=s,s=a,a=t(o,30),o=r,r=u;for(i=40;i<=59;i++)u=t(r,5)+(o&a|o&s|a&s)+c+l[i]+2400959708&4294967295,c=s,s=a,a=t(o,30),o=r,r=u;for(i=60;i<=79;i++)u=t(r,5)+(o^a^s)+c+l[i]+3395469782&4294967295,c=s,s=a,a=t(o,30),o=r,r=u;d=d+r&4294967295,p=p+o&4294967295,f=f+a&4294967295,h=h+s&4294967295,m=m+c&4294967295}return(u=n(d)+n(p)+n(f)+n(h)+n(m)).toLowerCase()}function parseBigInt(e,t){return new BigInteger(e,t)}function linebrk(e,t){for(var n="",i=0;i+t<e.length;)n+=e.substring(i,i+t)+"\n",i+=t;return n+e.substring(i,e.length)}function byte2Hex(e){return e<16?"0"+e.toString(16):e.toString(16)}function pkcs1pad2(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var n=[],i=e.length-1;i>=0&&t>0;){var r=e.charCodeAt(i--);r<128?n[--t]=r:r>127&&r<2048?(n[--t]=63&r|128,n[--t]=r>>6|192):(n[--t]=63&r|128,n[--t]=r>>6&63|128,n[--t]=r>>12|224)}for(n[--t]=0,i=new SecureRandom,r=[];t>2;){for(r[0]=0;0==r[0];)i.nextBytes(r);n[--t]=r[0]}return n[--t]=2,n[--t]=0,new BigInteger(n)}function RSAKey(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function RSASetPublic(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=parseBigInt(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){return null==(e=pkcs1pad2(e,this.n.bitLength()+7>>3))?null:null==(e=this.doPublic(e))?null:0==(1&(e=e.toString(16)).length)?e:"0"+e}function pkcs1unpad2(e,t){for(var n=e.toByteArray(),i=0;i<n.length&&0==n[i];)++i;if(n.length-i!=t-1||2!=n[i])return null;for(++i;0!=n[i];)if(++i>=n.length)return null;for(var r="";++i<n.length;){var o=255&n[i];o<128?r+=String.fromCharCode(o):o>191&&o<224?(r+=String.fromCharCode((31&o)<<6|63&n[i+1]),++i):(r+=String.fromCharCode((15&o)<<12|(63&n[i+1])<<6|63&n[i+2]),i+=2)}return r}function RSASetPrivate(e,t,n){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=parseBigInt(e,16),this.e=parseInt(t,16),this.d=parseBigInt(n,16)):alert("Invalid RSA private key")}function RSASetPrivateEx(e,t,n,i,r,o,a,s){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=parseBigInt(e,16),this.e=parseInt(t,16),this.d=parseBigInt(n,16),this.p=parseBigInt(i,16),this.q=parseBigInt(r,16),this.dmp1=parseBigInt(o,16),this.dmq1=parseBigInt(a,16),this.coeff=parseBigInt(s,16)):alert("Invalid RSA private key")}function RSAGenerate(e,t){var n=new SeededRandom,i=e>>1;this.e=parseInt(t,16);for(var r=new BigInteger(t,16);;){for(;this.p=new BigInteger(e-i,1,n),0!=this.p.subtract(BigInteger.ONE).gcd(r).compareTo(BigInteger.ONE)||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(i,1,n),0!=this.q.subtract(BigInteger.ONE).gcd(r).compareTo(BigInteger.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){o=this.p;this.p=this.q,this.q=o}var o=this.p.subtract(BigInteger.ONE),a=this.q.subtract(BigInteger.ONE),s=o.multiply(a);if(0==s.gcd(r).compareTo(BigInteger.ONE)){this.n=this.p.multiply(this.q),this.d=r.modInverse(s),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}}function RSADoPrivate(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;)t=t.add(this.p);return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)}function RSADecrypt(e){return null==(e=this.doPrivate(parseBigInt(e,16)))?null:pkcs1unpad2(e,this.n.bitLength()+7>>3)}function _rsasign_getHexPaddedDigestInfoForString(e,t,n){t/=4;for(var e=(0,_RSASIGN_HASHHEXFUNC[n])(e),n="00"+_RSASIGN_DIHEAD[n]+e,e="",t=t-4-n.length,i=0;i<t;i+=2)e+="ff";return sPaddedMessageHex="0001"+e+n}function _rsasign_signString(e,t){var n=_rsasign_getHexPaddedDigestInfoForString(e,this.n.bitLength(),t);return this.doPrivate(parseBigInt(n,16)).toString(16)}function _rsasign_signStringWithSHA1(e){return e=_rsasign_getHexPaddedDigestInfoForString(e,this.n.bitLength(),"sha1"),this.doPrivate(parseBigInt(e,16)).toString(16)}function _rsasign_signStringWithSHA256(e){return e=_rsasign_getHexPaddedDigestInfoForString(e,this.n.bitLength(),"sha256"),this.doPrivate(parseBigInt(e,16)).toString(16)}function _rsasign_getDecryptSignatureBI(e,t,n){var i=new RSAKey;return i.setPublic(t,n),i.doPublic(e)}function _rsasign_getHexDigestInfoFromSig(e,t,n){return _rsasign_getDecryptSignatureBI(e,t,n).toString(16).replace(/^1f+00/,"")}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(e){for(var t in _RSASIGN_DIHEAD){var n=_RSASIGN_DIHEAD[t],i=n.length;if(e.substring(0,i)==n)return[t,e.substring(i)]}return[]}function _rsasign_verifySignatureWithArgs(e,t,n,i){return t=_rsasign_getHexDigestInfoFromSig(t,n,i),0!=(n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(t)).length&&(t=n[1],e=(0,_RSASIGN_HASHHEXFUNC[n[0]])(e),t==e)}function _rsasign_verifyHexSignatureForMessage(e,t){return _rsasign_verifySignatureWithArgs(t,parseBigInt(e,16),this.n.toString(16),this.e.toString(16))}function _rsasign_verifyString(e,t){var t=t.replace(/[ \n]+/g,""),n=this.doPublic(parseBigInt(t,16)).toString(16).replace(/^1f+00/,""),i=_rsasign_getAlgNameAndHashFromHexDisgestInfo(n);return 0!=i.length&&(n=i[1],i=(0,_RSASIGN_HASHHEXFUNC[i[0]])(e),n==i)}function upload_img(e){let t=new FormData,n=ins.get(),i=$(".toot_media img").length;$("#toot_media").append($("<img />").attr("id","media_"+i)).slideDown("first"),t.append("file",e),$.ajax("https://"+n.domain+"/api/v1/media",{type:"POST",contentType:!1,processData:!1,headers:{Authorization:n.token_type+" "+n.access_token},data:t}).then((e,t,n)=>{$("#media_"+i).attr("data-id",e.id).attr("data-url",e.text_url);let r=new Image;r.onload=(()=>{$("#media_"+i).attr("src",e.preview_url),$("#toot_box").val($("#toot_box").val()+" "+e.text_url),autosize.update($("#toot_box")),count_toot_size()}),r.onerror=(e=>{console.log(e)}),r.src=e.preview_url},(e,t,n)=>{$.terminal.active().error("Media upload error.("+e.status+")"),$("#media_"+i).remove(),console.log(e)})}function makeStatus(e,t){let n=new Date(e.created_at),i=void 0!==e.reblog&&null!==e.reblog,r="mention"===e.type,o=i?e.reblog:r?e.status:e;"object"!=typeof t&&(t={});let a,s=void 0===t.ins_name?ins.name():t.ins_name,c=ins.get(t.ins_name),u={html:"",is_reblog:i,is_mention:r,instance:s,visibility:!0,payload:e,notification:{voice:!1,desktop:!1,color:!1}};a=null===o.application?"":o.application.website?" via "+(a=$("<a />").text(o.application.name).attr("href",o.application.website).attr("target","_blank").prop("outerHTML")):" via "+o.application.name;let l=(i?$.terminal.format("[[!i;;]reblogged by "+e.account.display_name+" @"+e.account.acct+"]")+"<br />":"")+"[ "+(void 0===o.account.display_name?"":o.account.display_name)+" "+$.terminal.format("[[!;;]@"+o.account.acct+"]")+" "+$("<i />").addClass("fa fa-"+(o.favourited?"star":"star-o")).attr("aria-hidden","true").prop("outerHTML")+" "+$("<i />").addClass("fa fa-"+("direct"===o.visibility||"private"===o.visibility?"times-circle-o":o.reblogged?"check-circle-o":"retweet")).attr("aria-hidden","true").prop("outerHTML")+" "+$("<i />").addClass("fa fa-"+("public"===o.visibility?"globe":"unlisted"===o.visibility?"unlock":"private"===o.visibility?"lock":"direct"===o.visibility?"envelope":"question")).attr("aria-hidden","true").prop("outerHTML")+(o.in_reply_to_id?" "+$($("<i />").addClass("fa fa-commenting")).attr("aria-hidden","true").prop("outerHTML")+" ":"")+" "+n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2)+" "+("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)+"."+("00"+n.getMilliseconds()).slice(-3)+" ]"+a;l="<span>"+(l=twemoji.parse(l,(e,t)=>"./72x72/"+e+".png"))+"</span>",o.account.hasOwnProperty("profile_emojis")&&o.account.profile_emojis.length>0&&(l=parse_emojis(l,o.account.profile_emojis));let d="";if(o.mentions.length>0){for(let e=0;e<o.mentions.length;e++)d+="@"+o.mentions[e].acct+" ";d=d.replace("@"+c.user.acct+" ","")}let p=$("<div />").addClass("status_cell status_avatar"),f=config.find("instances.status.avatar");if(void 0===f)p.hide();else{let t=o.account.avatar_static,n=o.account.avatar;t.match(/^http/)||(t="https://"+c.domain+t),n.match(/^http/)||(n="https://"+c.domain+n),p.append($("<img />").addClass("avatar_static").attr("name","avatar_s_"+o.account.id).attr("src",t)).append($("<img />").addClass("avatar_animate").attr("name","avatar_m_"+o.account.id).attr("src",n));let i=new Image;if(i.onload=(()=>{$("[name=avatar_s_"+o.account.id+"]").attr("src",t),t===n&&$("[name=avatar_m_"+o.account.id+"]").attr("src",t)}),i.onerror=(e=>{console.log(e)}),i.src=t,o.account.avatar_static!==o.account.avatar){let e=new Image;e.onload=(()=>{$("[name=avatar_m_"+o.account.id+"]").attr("src",n)}),e.onerror=(e=>{console.log(e)}),e.src=n}if(e.reblog){let t=e.account.avatar_static,n=$("<div />").append($("<img />").addClass("avatar_reblog").attr("name","avatar_s_"+e.account.id).attr("src",t)),i=new Image;i.onload=(()=>{$("[name=avatar_m_"+e.account.id+"]").attr("src",t)}),i.onerror=(e=>{console.log(e)}),i.src=t,p.append(n)}}let h,m;if(void 0!==o.enquete&&null!==o.enquete){m=JSON.parse(o.enquete),question=m.question,$(question).find("span.fa-spin").length&&(question=$("<p />").append($(question).find("span").text()).prop("outerHTML")),question=question.replace(/^(?:<p>)?(.*?)(?:<\/p>)?$/g,"<p><span>$1"+("enquete"===m.type?"(回答枠)":"(結果)")+"</span></p>"),h=$("<div />").append(question);let e=$("<div />").addClass("status_"+m.type).attr("data-created",o.created_at);for(let t=0;t<m.items.length;t++)"enquete"===m.type?e.append($("<span />").html(m.items[t])):e.append($("<span />").append($("<span />").addClass("progress ratio").text(m.ratios[t]+"%")).append($("<span />").addClass("progress item").text(m.items[t])).append($("<span />").addClass("proceed").css("width",m.ratios[t].toString()+"%")));h.append(e)}else h=(h=o.content).match(/^<.+>$/)?h.replace(/<p>(.*?)<\/p>/g,"<p><span>$1</span></p>"):$("<p />").append($("<span />").html(h)),$(h).find("span.fa-spin").length&&(h=$("<p />").append($(h).find("span").text()).prop("outerHTML"));let g;o.media_attachments.length>0&&(g=$("<div />").addClass("status_thumbnail"),o.media_attachments.forEach((e,t,n)=>{let i=e.preview_url.match(/^https?:\/\//)?e.preview_url:"https://"+c.domain+e.preview_url,r=e.remote_url?e.remote_url:e.url,o="media_"+e.id;g.append($("<img />").attr("id",o).attr("src",i).attr("data-url",r).attr("data-type",e.type));let a=new Image;a.onload=(()=>{$("#"+o).attr("src",i)}),a.onerror=(e=>{console.log(e)}),a.src=i}),void 0===config.find("instances.status.thumbnail")&&g.hide()),o.hasOwnProperty("profile_emojis")&&o.profile_emojis.length>0&&(h=parse_emojis(h,o.profile_emojis)),o.hasOwnProperty("emojis")&&o.emojis.length>0&&(h=parse_emojis(h,o.emojis)),h=twemoji.parse(h,(e,t)=>"./72x72/"+e+".png");let y,v=$("<div />").addClass("status_contents").attr("id","status_contents");o.sensitive?(y=$("<div />"),o.spoiler_text.length>0?(v.append($.terminal.format(o.spoiler_text)),y.append(h)):v.append(h),void 0!==g&&y.append(g)):(o.spoiler_text.length>0?(v.append($.terminal.format(o.spoiler_text)),(y=$("<div />")).append(h)):v.append(h),void 0!==g&&v.append(g)),void 0!==y&&v.append($("<div />").addClass("read_more").append($.terminal.format("[[bu;black;gray]-- More --]"))).append(y.hide());let b=$("<div />").addClass("status_cell status_main").append($("<div />").addClass("status_head").html(l)).append(v),_=$("<div />").attr("name","id_"+o.id).attr("data-sid",o.id).attr("data-instance",s).attr("data-uid",o.account.id).attr("data-dispname",o.account.display_name).attr("data-acct",o.account.acct).attr("data-fav",o.favorited?"1":"0").attr("data-reb",o.reblogged?"1":"0").attr("data-reply",d).addClass("status").append($("<div />").addClass("status_table").append(p).append($(b)));if(0===o.id&&_.attr("data-uri",o.uri),"mouseover"===f?_.addClass("status_mouseover"):"animation"===f?_.addClass("status_animation"):"standard"!==f&&!0!==f||_.addClass("status_standard"),"string"==typeof t.tl_name){let e="stream_"+o.id;if($("[name="+e+"]").length>0)return u.visibility=!1,u;if(ws.stream.length-(!ws.monitor.home&&ws.monitor.notification?1:0)>1){let n=$("<div />").attr("name",e).append($("<span />").html(t.tl_name+" streaming updated."));_.prepend(n)}}if(ins.acls.hasOwnProperty(s))for(let e in ins.acls[s]){let t=ins.acls[s][e];if(_.text().match(t.regexp)){if("deny"===t.type){u.visibility=!1;break}if("drop"===t.type)break;let n=url_params.hasOwnProperty("acl")?url_params.acl:"";n=n.split(","),"permit"===t.type&&t.hasOwnProperty("color")&&n.indexOf("col")<0&&(_.addClass("status_"+t.color),u.notification.color=t.color);config.find(["instances","terminal","monitor","notification"]);if("permit"===t.type&&t.notify&&n.indexOf("not")<0){let t="ACL "+e+": "+o.account.display_name+" @"+o.account.acct,n=$(o.content).text();n.length>100&&(n=n.slice(0,100)),u.notification.desktop={title:t,body:n,icon:o.account.avatar_static}}"permit"===t.type&&t.hasOwnProperty("voice")&&n.indexOf("voi")<0&&(u.notification.voice=t.voice);break}}return config.find("instances.status.separator")&&_.append("<div><span>"+Array($.terminal.active().cols()-5).join("-")+"</span></div>"),_.append($("<div />").addClass("status_all").css("display","none").text(JSON.stringify(e))),u.html=_.prop("outerHTML"),u}function make_notification(e,t){let n="favourite"===e.type&&t.favourite,i="reblog"===e.type&&t.reblog,r="follow"===e.type&&t.following,o="mention"===e.type&&t.mention,a={html:""},s="";if(n||i||r||o){let t=e.status?$.terminal.escape_brackets($(e.status.content).text()):"(Status was deleted)";t.length>100&&(t=t.slice(0,100)+" ..."),s='<i class="fa fa-'+("favourite"===e.type?"star":"reblog"===e.type?"retweet":"mention"===e.type?"commenting":"follow"===e.type?"handshake-o":"bell")+'" aria-hidden="true"></i> '+e.account.display_name+" "+$.terminal.format("[[!;;]@"+e.account.acct+"]")+"<br />"+(e.status?t:""),s=$("<span />").html(s).addClass("status_notify").prop("outerHTML"),e.account.hasOwnProperty("profile_emojis")&&e.account.profile_emojis.length>0&&(s=parse_emojis(s,e.status.account.profile_emojis)),e.hasOwnProperty("emojis")&&e.emojis.length>0&&(s=parse_emojis(s,contents.emojis)),s=twemoji.parse(s,(e,t)=>"./72x72/"+e+".png"),"mention"===e.type&&(a.status=makeStatus(e),s+=a.status.html)}return a.html=s,a}function parse_emojis(e,t=[]){for(let n=0;n<t.length;n++){let i=t[n].url,r=":"+t[n].shortcode+":",o=$("<img />").addClass("emoji").attr("name","emoji_"+t[n].shortcode).attr("alt",r).attr("src",i),a=new RegExp(r,"g");e=e.replace(a,o.prop("outerHTML"));let s=new Image;s.onload=(()=>{$("[name=emoji_"+t[n].shortcode+"]").attr("src",i)}),s.onerror=(e=>{console.log(e)}),s.src=i}return e}function post_status(){let e=$("#toot_box").val().trim(),t=ins.get(),n=500-$("#toot_box").val().length-$("#toot_cw").val().length;if(0===e.length||n<0)return!1;if(void 0===t&&void 0===t.access_token)return!1;e=e.replace(/(:[a-zA-Z0-9_]{2,}:) /g,"$1"+String.fromCharCode(8203)).replace(/ (:[a-zA-Z0-9_]{2,}:)/g,String.fromCharCode(8203)+"$1");let i=$("#toot_cw").val().trim(),r={status:e,visibility:$("#toot_visibility").val()};0!==i.length&&(r.spoiler_text=i);let o=$(".reply #sid").text();""!==o&&(r.in_reply_to_id=o),r.media_ids=[];let a=$("#toot_media img");for(let e=0;e<a.length;e++)r.media_ids.push($(a[e]).data("id"));return r.media_ids.length>0&&(r.sensitive=$("#nsfw").prop("checked")),$.ajax({url:"https://"+t.domain+"/api/v1/statuses",type:"POST",headers:{Authorization:t.token_type+" "+t.access_token},data:r,timeout:5e3}).then((e,t,n)=>{let i=config.find("instances.visibility");void 0===i&&(i="public"),$("#toot_cw").val(""),$("#toot_visibility").val(i),$("#reply_close").trigger("click"),$("#toot_media").html(""),$("#toot_box").val("").trigger("keyup").focus(),autosize.update($("#toot_box"))},(e,t,n)=>{$.terminal.active().error("Toot post error.("+e.status+")"),console.log(e)})}function reduce_status(){let e=$(".status").parent().parent(),t=e.length-200;for(let n=0;n<t;n++)$(e[n]).remove()}function callAPI(e,t={}){let n,i=void 0===t.instance_name?ins.get():ins.get(t.instance_name);return void 0===e?(n=new $.Deferred).reject("Undefined path"):void 0===i?(n=new $.Deferred).reject("No instance"):void 0===i.access_token?(n=new $.Deferred).reject("No login"):n=$.ajax({url:"https://"+i.domain+e,type:void 0!==t.type?t.type:"GET",headers:{Authorization:i.token_type+" "+i.access_token},data:(t.data,t.data),dataType:"json",timeout:5e3}).done((e,t,n)=>n).fail((n,i,r)=>(term_error("API Request Error",{path:e,opts:t}),n)),n}function callMore(e,t,n={}){let i,r,o=20,a=[],s={},c=!0;n.hasOwnProperty("params")&&(s=n.params),n.hasOwnProperty("limit")&&(o=n.limit),i=n.hasOwnProperty("term")?n.term:$.terminal.active(),n.hasOwnProperty("raw")&&(c=n.raw),i.push(function(e,t){},{name:"more",prompt:"--More-- ",onStart:function(i){i.pause(),s.limit=o,callAPI(e,{type:"GET",data:s}).then((e,o,a)=>{n.hasOwnProperty("header")&&i.echo(n.header);for(let o=0;o<e.length;o++){let s=t(e[o]);s&&i.echo(s,{raw:c}),r=n.hasOwnProperty("next")?n.next(e,a):e[o].id}r<=0&&i.pop(),i.resume()},(e,t,n)=>{i.error("Getting data is failed.("+e.status+")"),console.log(e),i.pop(),i.resume()})},onExit:function(e){n.hasOwnProperty("footer")&&e.echo(n.footer),setTimeout(function(){e.set_command("")},10),e.resume()},keydown:function(i,u){function l(e){if(!(e>0))return;e=a.length<e?a.length:e;for(let t=0;t<e;t++){let e=a.shift();u.echo(e,{raw:c,flush:!1})}u.flush()}switch(i.keyCode){case 27:case 81:u.pop(),u.set_command("");case 16:case 17:case 18:break;case 13:default:u.pause();let c=13===i.keyCode?1:o;s.limit=100,r>0?s.max_id=r:0===a.length&&u.pop(),a.length>0?(l(c),u.resume(),0===a.length&&r<=0&&u.pop()):callAPI(e,{type:"GET",data:s}).then((e,i,o)=>{if(0!==e.length){a=[];for(let i=0;i<e.length;i++){let s=t(e[i]);s&&a.push(s),r=n.hasOwnProperty("next")?n.next(e,o):e[i].id}l(c),u.resume(),0===a.length&&r<=0&&u.pop()}else u.pop()},(e,t,n)=>{console.log(e),u.error("Getting data is failed.("+e.status+")")}),setTimeout(()=>{u.set_command("")},10)}return!0}})}function favourite(e,t){if($(e).data("sid")<=0)return void t.error("couldn't send a request (search engine status).");let n=1==$(e).data("fav"),i=$(e).find(".status_head i"),r="/api/v1/statuses/"+$(e).data("sid").toString()+(n?"/unfavourite":"/favourite");void 0===t&&(t=$.terminal.active()),$(i[0]).removeClass().addClass("fa fa-spinner fa-pulse"),callAPI(r,{instance_name:$(e).data("instance"),type:"POST"}).then((r,o,a)=>{$("[name=id_"+$(e).data("sid").toString()+"]").each((e,t)=>{$(i[0]).removeClass().addClass("fa fa-"+(r.favourited?"star":"star-o")),$(t).data("fav",r.favourited?"1":"0")}),n===r.favourited&&t.error("favourited missed...")},(e,t,r)=>{$.terminal.active().error("Favorite failed.("+e.status+")"),$(i[0]).removeClass().addClass("fa fa-"+(n?"star":"star-o")),console.log(e)})}function closeTootbox(){$("#sid").text(""),$("#reply").hide(),$("#toot_box").val(""),$("#toot").slideUp("first"),$.terminal.active().enable()}function boost(e){if($(e).data("sid")<=0)return void term.error("couldn't send a request (search engine status).");let t=$(e).find(".status_head i");if($(t[1]).hasClass("fa-times-circle-o"))return;let n=1==$(e).data("reb"),i="/api/v1/statuses/"+$(e).data("sid").toString()+(n?"/unreblog":"/reblog");"undefined"==typeof term&&(term=$.terminal.active()),$(t[1]).removeClass().addClass("fa fa-spinner fa-pulse"),callAPI(i,{instance_name:$(e).data("instance"),type:"POST"}).then((i,r,o)=>{$("[name=id_"+$(e).data("sid").toString()+"]").each((e,n)=>{$(t[1]).removeClass().addClass("fa fa-"+(i.reblogged?"check-circle-o":"retweet")),$(n).data("reb",i.reblogged?"1":"0")}),n===i.reblogged&&term.error("reblogged missed...")},(e,i,r)=>{$.terminal.active().error("Reblogged failed.("+e.status+")"),$(t[1]).removeClass().addClass("fa fa-"+(n?"check-circle-o":"retweet")),console.log(e)})}function tab(e,t,n){let i=escape(e).replace(/%u[0-9a-f]{2,6}/gi,"xx").replace(/%[0-9a-f]{2}/gi,"x").length,r=n<=i?e.substr(0,n-4)+"... ":e;for(let e=i;e<n;e++,r+=" ");return r+t}function term_error(e,t){let n,i=new Date,r=localStorage.getItem("configuration"),o=localStorage.getItem("term_error");o=o?JSON.parse(o):[],r=r||{},n="object"==typeof t?JSON.parse(JSON.stringify(t)):t||{};let a=JSON.stringify({running_config:config.config,startup_config:r,default_config:config.default,instances:ins.instances,status:{message:e,created_at:i.getTime()},params:n});o.push(JSON.parse(a)),o.length>5&&o.shift(),localStorage.setItem("term_error",JSON.stringify(o))}function OutputText(e,t){let n=new Blob(["\ufeff",e]);if(navigator.msSaveBlob)navigator.msSaveOrOpenBlob(n,t);else{let e=$("<a />").attr("href",URL.createObjectURL(n)).attr("download",t).attr("target","_blank");$("body").append(e),e[0].click(),e.remove()}}function more(e,t,n){let i=e.rows(),r=e.get_command(),o=0;e.push(function(e,t){},{name:"more",prompt:"--More-- ",onStart:function(e){e.echo(t.slice(o,o+i).join("\n")),(o+=i)>t.length&&(e.pop(),n&&e.set_command(r)),e.resume()},keydown:function(e,a){switch(e.keyCode){case 81:a.pop(),n&&a.set_command(r);break;case 13:a.echo(t.slice(o,o+1).join("\n")),++o>t.length&&(a.pop(),n&&a.set_command(r));break;default:a.echo(t.slice(o,o+i).join("\n")),(o+=i)>t.length&&(a.pop(),n&&a.set_command(r)),a.set_command("")}return!1}})}function begin(e,t,n,i){let r=0;for(r=0;r<t.length&&!t[r].match(i);r++);more(e,t.slice(r),n,i)}function include(e,t,n,i){let r=[];for(let e=0;e<t.length;e++)t[e].match(i)&&r.push(t[e]);more(e,r,n)}function exclude(e,t,n,i){let r=[];for(let e=0;e<t.length;e++)t[e].match(i)||r.push(t[e]);more(e,r,n)}function config_notify(){let e={},t=config.find(["instances","terminal","logging"]);return e=url_params.hasOwnProperty("notification")?{delete:(t=url_params.notification.split(",")).indexOf("del")>=0,favourite:t.indexOf("fav")>=0,reblog:t.indexOf("reb")>=0,mention:t.indexOf("men")>=0,following:t.indexOf("fol")>=0}:"object"==typeof t?{delete:!1!==t&&!0===t.delete,favourite:!1!==t&&!1!==t.favourite,reblog:!1!==t&&!1!==t.reblog,mention:!1!==t&&!1!==t.mention,following:!1!==t&&!1!==t.following}:{delete:!1,favourite:!0,reblog:!0,mention:!0,following:!0}}function is_monitoring(e){let t=!1;if(void 0!==e)t=!0===ws.monitor[e];else for(let e in ws.stream)t=t||ws.stream[e].ws.readyState===WebSocket.OPEN;return t}function talk(e){var t=new SpeechSynthesisUtterance(e);t.rate=1.3,t.lang="ja-JP",speechSynthesis.speak(t)}!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t){var n=(t=t||te).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function i(e){var t=!!e&&"length"in e&&e.length,n=he.type(e);return"function"!==n&&!he.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,n){return he.isFunction(t)?he.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?he.grep(e,function(e){return e===t!==n}):"string"!=typeof t?he.grep(e,function(e){return ae.call(t,e)>-1!==n}):Te.test(t)?he.filter(t,e,n):(t=he.filter(t,e),he.grep(e,function(e){return ae.call(t,e)>-1!==n&&1===e.nodeType}))}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return he.each(e.match(Ie)||[],function(e,n){t[n]=!0}),t}function c(e){return e}function u(e){throw e}function l(e,t,n,i){var r;try{e&&he.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&he.isFunction(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}function d(){te.removeEventListener("DOMContentLoaded",d),e.removeEventListener("load",d),he.ready()}function p(){this.expando=he.expando+p.uid++}function f(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Be.test(e)?JSON.parse(e):e)}function h(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Pe,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=f(n)}catch(e){}je.set(e,t,n)}else n=void 0;return n}function m(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return he.css(e,t,"")},c=s(),u=n&&n[3]||(he.cssNumber[t]?"":"px"),l=(he.cssNumber[t]||"px"!==u&&+c)&&Fe.exec(he.css(e,t));if(l&&l[3]!==u){u=u||l[3],n=n||[],l=+c||1;do{o=o||".5",l/=o,he.style(e,t,l+u)}while(o!==(o=s()/c)&&1!==o&&--a)}return n&&(l=+l||+c||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=l,i.end=r)),r}function g(e){var t,n=e.ownerDocument,i=e.nodeName,r=ze[i];return r||(t=n.body.appendChild(n.createElement(i)),r=he.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ze[i]=r,r)}function y(e,t){for(var n,i,r=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=Oe.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Me(i)&&(r[o]=g(i))):"none"!==n&&(r[o]="none",Oe.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function v(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&r(e,t)?he.merge([e],n):n}function b(e,t){for(var n=0,i=e.length;n<i;n++)Oe.set(e[n],"globalEval",!t||Oe.get(t[n],"globalEval"))}function _(e,t,n,i,r){for(var o,a,s,c,u,l,d=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if((o=e[f])||0===o)if("object"===he.type(o))he.merge(p,o.nodeType?[o]:o);else if(Je.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(Ke.exec(o)||["",""])[1].toLowerCase(),c=Ge[s]||Ge._default,a.innerHTML=c[1]+he.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;he.merge(p,a.childNodes),(a=d.firstChild).textContent=""}else p.push(t.createTextNode(o));for(d.textContent="",f=0;o=p[f++];)if(i&&he.inArray(o,i)>-1)r&&r.push(o);else if(u=he.contains(o.ownerDocument,o),a=v(d.appendChild(o),"script"),u&&b(a),n)for(l=0;o=a[l++];)Ue.test(o.type||"")&&n.push(o);return d}function w(){return!0}function x(){return!1}function S(){try{return te.activeElement}catch(e){}}function T(e,t,n,i,r,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)T(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=x;else if(!r)return e;return 1===o&&(a=r,r=function(e){return he().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=he.guid++)),e.each(function(){he.event.add(this,t,r,i,n)})}function k(e,t){return r(e,"table")&&r(11!==t.nodeType?t:t.firstChild,"tr")?he(">tbody",e)[0]||e:e}function C(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function A(e){var t=nt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){var n,i,r,o,a,s,c,u;if(1===t.nodeType){if(Oe.hasData(e)&&(o=Oe.access(e),a=Oe.set(t,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)he.event.add(t,r,u[r][n])}je.hasData(e)&&(s=je.access(e),c=he.extend({},s),je.set(t,c))}}function I(e,t){var n=t.nodeName.toLowerCase();"input"===n&&We.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function R(e,t,i,r){t=re.apply([],t);var o,a,s,c,u,l,d=0,p=e.length,f=p-1,h=t[0],m=he.isFunction(h);if(m||p>1&&"string"==typeof h&&!pe.checkClone&&tt.test(h))return e.each(function(n){var o=e.eq(n);m&&(t[0]=h.call(this,n,o.html())),R(o,t,i,r)});if(p&&(o=_(t,e[0].ownerDocument,!1,e,r),a=o.firstChild,1===o.childNodes.length&&(o=a),a||r)){for(c=(s=he.map(v(o,"script"),C)).length;d<p;d++)u=o,d!==f&&(u=he.clone(u,!0,!0),c&&he.merge(s,v(u,"script"))),i.call(e[d],u,d);if(c)for(l=s[s.length-1].ownerDocument,he.map(s,A),d=0;d<c;d++)u=s[d],Ue.test(u.type||"")&&!Oe.access(u,"globalEval")&&he.contains(l,u)&&(u.src?he._evalUrl&&he._evalUrl(u.src):n(u.textContent.replace(it,""),l))}return e}function $(e,t,n){for(var i,r=t?he.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||he.cleanData(v(i)),i.parentNode&&(n&&he.contains(i.ownerDocument,i)&&b(v(i,"script")),i.parentNode.removeChild(i));return e}function N(e,t,n){var i,r,o,a,s=e.style;return(n=n||at(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||he.contains(e.ownerDocument,e)||(a=he.style(e,t)),!pe.pixelMarginRight()&&ot.test(a)&&rt.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function D(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function O(e){if(e in pt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=dt.length;n--;)if((e=dt[n]+t)in pt)return e}function j(e){var t=he.cssProps[e];return t||(t=he.cssProps[e]=O(e)||e),t}function B(e,t,n){var i=Fe.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function P(e,t,n,i,r){var o,a=0;for(o=n===(i?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===n&&(a+=he.css(e,n+qe[o],!0,r)),i?("content"===n&&(a-=he.css(e,"padding"+qe[o],!0,r)),"margin"!==n&&(a-=he.css(e,"border"+qe[o]+"Width",!0,r))):(a+=he.css(e,"padding"+qe[o],!0,r),"padding"!==n&&(a+=he.css(e,"border"+qe[o]+"Width",!0,r)));return a}function L(e,t,n){var i,r=at(e),o=N(e,t,r),a="border-box"===he.css(e,"boxSizing",!1,r);return ot.test(o)?o:(i=a&&(pe.boxSizingReliable()||o===e.style[t]),"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+P(e,t,n||(a?"border":"content"),i,r)+"px")}function F(e,t,n,i,r){return new F.prototype.init(e,t,n,i,r)}function q(){ht&&(!1===te.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(q):e.setTimeout(q,he.fx.interval),he.fx.tick())}function M(){return e.setTimeout(function(){ft=void 0}),ft=he.now()}function H(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=qe[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function z(e,t,n){for(var i,r=(K.tweeners[t]||[]).concat(K.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function W(e,t){var n,i,r,o,a;for(n in e)if(i=he.camelCase(n),r=t[i],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=he.cssHooks[i])&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function K(e,t,n){var i,r,o=0,a=K.prefilters.length,s=he.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=ft||M(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(i);return s.notifyWith(e,[u,i,n]),i<1&&a?n:(a||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:he.extend({},t),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},n),originalProperties:t,originalOptions:n,startTime:ft||M(),duration:n.duration,tweens:[],createTween:function(t,n){var i=he.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(W(l,u.opts.specialEasing);o<a;o++)if(i=K.prefilters[o].call(u,e,l,u.opts))return he.isFunction(i.stop)&&(he._queueHooks(u.elem,u.opts.queue).stop=he.proxy(i.stop,i)),i;return he.map(l,z,u),he.isFunction(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),he.fx.timer(he.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}function U(e){return(e.match(Ie)||[]).join(" ")}function G(e){return e.getAttribute&&e.getAttribute("class")||""}function J(e,t,n,i){var r;if(Array.isArray(t))he.each(t,function(t,r){n||Ct.test(e)?i(e,r):J(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==he.type(t))i(e,t);else for(r in t)J(e+"["+r+"]",t[r],n,i)}function V(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(Ie)||[];if(he.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Z(e,t,n,i){function r(s){var c;return o[s]=!0,he.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||o[u]?a?!(c=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),c}var o={},a=e===Lt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function X(e,t){var n,i,r=he.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&he.extend(!0,e,i),e}function Y(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}function Q(e,t,n,i){var r,o,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=u[c+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[c+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}var ee=[],te=e.document,ne=Object.getPrototypeOf,ie=ee.slice,re=ee.concat,oe=ee.push,ae=ee.indexOf,se={},ce=se.toString,ue=se.hasOwnProperty,le=ue.toString,de=le.call(Object),pe={},fe="3.2.1",he=function(e,t){return new he.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,ye=/-([a-z])/g,ve=function(e,t){return t.toUpperCase()};he.fn=he.prototype={jquery:fe,constructor:he,length:0,toArray:function(){return ie.call(this)},get:function(e){return null==e?ie.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=he.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return he.each(this,e)},map:function(e){return this.pushStack(he.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:oe,sort:ee.sort,splice:ee.splice},he.extend=he.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||he.isFunction(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(he.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&he.isPlainObject(n)?n:{},a[t]=he.extend(u,o,i)):void 0!==i&&(a[t]=i));return a},he.extend({expando:"jQuery"+(fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===he.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=he.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ce.call(e)||(t=ne(e))&&("function"!=typeof(n=ue.call(t,"constructor")&&t.constructor)||le.call(n)!==de))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?se[ce.call(e)]||"object":typeof e},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(ge,"ms-").replace(ye,ve)},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?he.merge(n,"string"==typeof e?[e]:e):oe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ae.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var r,o,a=0,s=[];if(i(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return re.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),he.isFunction(e))return i=ie.call(arguments,2),r=function(){return e.apply(t||this,i.concat(ie.call(arguments)))},r.guid=e.guid=e.guid||he.guid++,r},now:Date.now,support:pe}),"function"==typeof Symbol&&(he.fn[Symbol.iterator]=ee[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){se["[object "+t+"]"]=t.toLowerCase()});var be=function(e){function t(e,t,n,i){var r,o,a,s,c,l,p,f=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!i&&((t?t.ownerDocument||t:F)!==$&&R(t),t=t||$,D)){if(11!==h&&(c=me.exec(e)))if(r=c[1]){if(9===h){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(f&&(a=f.getElementById(r))&&P(t,a)&&a.id===r)return n.push(a),n}else{if(c[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((r=c[3])&&_.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(r)),n}if(_.qsa&&!W[e+" "]&&(!O||!O.test(e))){if(1!==h)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,_e):t.setAttribute("id",s=L),o=(l=T(e)).length;o--;)l[o]="#"+s+" "+d(l[o]);p=l.join(","),f=ge.test(e)&&u(t.parentNode)||t}if(p)try{return Z.apply(n,f.querySelectorAll(p)),n}catch(e){}finally{s===L&&t.removeAttribute("id")}}}return C(e.replace(oe,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[L]=!0,e}function r(e){var t=$.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)w.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&xe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function l(){}function d(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=M++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,c){var u,l,d,p=[q,s];if(c){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,c))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(d=t[L]||(t[L]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=l[o])&&u[0]===q&&u[1]===s)return p[2]=u[2];if(l[o]=p,p[2]=e(t,n,c))return!0}return!1}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function h(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function m(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function g(e,t,n,r,o,a){return r&&!r[L]&&(r=g(r)),o&&!o[L]&&(o=g(o,a)),i(function(i,a,s,c){var u,l,d,p=[],f=[],g=a.length,y=i||h(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?y:m(y,p,e,s,c),b=n?o||(i?e:g||r)?[]:a:v;if(n&&n(v,b,s,c),r)for(u=m(b,f),r(u,[],s,c),l=u.length;l--;)(d=u[l])&&(b[f[l]]=!(v[f[l]]=d));if(i){if(o||e){if(o){for(u=[],l=b.length;l--;)(d=b[l])&&u.push(v[l]=d);o(null,b=[],u,c)}for(l=b.length;l--;)(d=b[l])&&(u=o?Y(i,d):p[l])>-1&&(i[u]=!(a[u]=d))}}else b=m(b===a?b.splice(g,b.length):b),o?o(null,a,b,c):Z.apply(a,b)})}function y(e){for(var t,n,i,r=e.length,o=w.relative[e[0].type],a=o||w.relative[" "],s=o?1:0,c=p(function(e){return e===t},a,!0),u=p(function(e){return Y(t,e)>-1},a,!0),l=[function(e,n,i){var r=!o&&(i||n!==A)||((t=n).nodeType?c(e,n,i):u(e,n,i));return t=null,r}];s<r;s++)if(n=w.relative[e[s].type])l=[p(f(l),n)];else{if((n=w.filter[e[s].type].apply(null,e[s].matches))[L]){for(i=++s;i<r&&!w.relative[e[i].type];i++);return g(s>1&&f(l),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),n,s<i&&y(e.slice(s,i)),i<r&&y(e=e.slice(i)),i<r&&d(e))}l.push(n)}return f(l)}function v(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,c,u){var l,d,p,f=0,h="0",g=i&&[],y=[],v=A,b=i||o&&w.find.TAG("*",u),_=q+=null==v?1:Math.random()||.1,x=b.length;for(u&&(A=a===$||a||u);h!==x&&null!=(l=b[h]);h++){if(o&&l){for(d=0,a||l.ownerDocument===$||(R(l),s=!D);p=e[d++];)if(p(l,a||$,s)){c.push(l);break}u&&(q=_)}r&&((l=!p&&l)&&f--,i&&g.push(l))}if(f+=h,r&&h!==f){for(d=0;p=n[d++];)p(g,y,a,s);if(i){if(f>0)for(;h--;)g[h]||y[h]||(y[h]=J.call(c));y=m(y)}Z.apply(c,y),u&&!i&&y.length>0&&f+n.length>1&&t.uniqueSort(c)}return u&&(q=_,A=v),g};return r?i(a):a}var b,_,w,x,S,T,k,C,A,E,I,R,$,N,D,O,j,B,P,L="sizzle"+1*new Date,F=e.document,q=0,M=0,H=n(),z=n(),W=n(),K=function(e,t){return e===t&&(I=!0),0},U={}.hasOwnProperty,G=[],J=G.pop,V=G.push,Z=G.push,X=G.slice,Y=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ie=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",re=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ce=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(ie),le=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ye=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ve=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_e=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){R()},xe=p(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Z.apply(G=X.call(F.childNodes),F.childNodes),G[F.childNodes.length].nodeType}catch(e){Z={apply:G.length?function(e,t){V.apply(e,X.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}_=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:F;return i!==$&&9===i.nodeType&&i.documentElement?($=i,N=$.documentElement,D=!S($),F!==$&&(n=$.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),_.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=r(function(e){return e.appendChild($.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=he.test($.getElementsByClassName),_.getById=r(function(e){return N.appendChild(e).id=L,!$.getElementsByName||!$.getElementsByName(L).length}),_.getById?(w.filter.ID=function(e){var t=e.replace(ye,ve);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var n=t.getElementById(e);return n?[n]:[]}}):(w.filter.ID=function(e){var t=e.replace(ye,ve);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),w.find.TAG=_.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):_.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},w.find.CLASS=_.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&D)return t.getElementsByClassName(e)},j=[],O=[],(_.qsa=he.test($.querySelectorAll))&&(r(function(e){N.appendChild(e).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ee+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+L+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+L+"+*").length||O.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=$.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&O.push(":enabled",":disabled"),N.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(_.matchesSelector=he.test(B=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(e){_.disconnectedMatch=B.call(e,"*"),B.call(e,"[s!='']:x"),j.push("!=",ie)}),O=O.length&&new RegExp(O.join("|")),j=j.length&&new RegExp(j.join("|")),t=he.test(N.compareDocumentPosition),P=t||he.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===$||e.ownerDocument===F&&P(F,e)?-1:t===$||t.ownerDocument===F&&P(F,t)?1:E?Y(E,e)-Y(E,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],c=[t];if(!r||!o)return e===$?-1:t===$?1:r?-1:o?1:E?Y(E,e)-Y(E,t):0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;s[i]===c[i];)i++;return i?a(s[i],c[i]):s[i]===F?-1:c[i]===F?1:0},$):$},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==$&&R(e),n=n.replace(ce,"='$1']"),_.matchesSelector&&D&&!W[n+" "]&&(!j||!j.test(n))&&(!O||!O.test(n)))try{var i=B.call(e,n);if(i||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,$,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==$&&R(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==$&&R(e);var n=w.attrHandle[t.toLowerCase()],i=n&&U.call(w.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:_.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(be,_e)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(I=!_.detectDuplicates,E=!_.sortStable&&e.slice(0),e.sort(K),I){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return E=null,e},x=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},(w=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,ve),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,ve),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,ve).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(re," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var u,l,d,p,f,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!c&&!s,b=!1;if(g){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(b=(f=(u=(l=(d=(p=g)[L]||(p[L]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===q&&u[1])&&u[2],p=f&&g.childNodes[f];p=++f&&p&&p[m]||(b=f=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){l[e]=[q,f,b];break}}else if(v&&(p=t,d=p[L]||(p[L]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),u=l[e]||[],f=u[0]===q&&u[1],b=f),!1===b)for(;(p=++f&&p&&p[m]||(b=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++b||(v&&(d=p[L]||(p[L]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),l[e]=[q,b]),p!==t)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,n){var r,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[L]?o(n):o.length>1?(r=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=Y(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(oe,"$1"));return r[L]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(ye,ve),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return le.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,ve).toLowerCase(),function(t){var n;do{if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(b);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,T=t.tokenize=function(e,n){var i,r,o,a,s,c,u,l=z[e+" "];if(l)return n?0:l.slice(0);for(s=e,c=[],u=w.preFilter;s;){i&&!(r=ae.exec(s))||(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=se.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(oe," ")}),s=s.slice(i.length));for(a in w.filter)!(r=de[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):z(e,c).slice(0)},k=t.compile=function(e,t){var n,i=[],r=[],o=W[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)(o=y(t[n]))[L]?i.push(o):r.push(o);(o=W(e,v(r,i))).selector=e}return o},C=t.select=function(e,t,n,i){var r,o,a,s,c,l="function"==typeof e&&e,p=!i&&T(e=l.selector||e);if(n=n||[],1===p.length){if((o=p[0]=p[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&D&&w.relative[o[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(ye,ve),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=de.needsContext.test(e)?0:o.length;r--&&(a=o[r],!w.relative[s=a.type]);)if((c=w.find[s])&&(i=c(a.matches[0].replace(ye,ve),ge.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&d(o)))return Z.apply(n,i),n;break}}return(l||k(e,p))(i,t,!D,n,!t||ge.test(e)&&u(t.parentNode)||t),n},_.sortStable=L.split("").sort(K).join("")===L,_.detectDuplicates=!!I,R(),_.sortDetached=r(function(e){return 1&e.compareDocumentPosition($.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(Q,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);he.find=be,he.expr=be.selectors,he.expr[":"]=he.expr.pseudos,he.uniqueSort=he.unique=be.uniqueSort,he.text=be.getText,he.isXMLDoc=be.isXML,he.contains=be.contains,he.escapeSelector=be.escape;var _e=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&he(e).is(n))break;i.push(e)}return i},we=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},xe=he.expr.match.needsContext,Se=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Te=/^.[^:#\[\.,]*$/;he.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?he.find.matchesSelector(i,e)?[i]:[]:he.find.matches(e,he.grep(t,function(e){return 1===e.nodeType}))},he.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(he(e).filter(function(){for(t=0;t<i;t++)if(he.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)he.find(e,r[t],n);return i>1?he.uniqueSort(n):n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&xe.test(e)?he(e):e||[],!1).length}});var ke,Ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(he.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||ke,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ce.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof he?t[0]:t,he.merge(this,he.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:te,!0)),Se.test(i[1])&&he.isPlainObject(t))for(i in t)he.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=te.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):he.isFunction(e)?void 0!==n.ready?n.ready(e):e(he):he.makeArray(e,this)}).prototype=he.fn,ke=he(te);var Ae=/^(?:parents|prev(?:Until|All))/,Ee={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(e){var t=he(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(he.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&he(e);if(!xe.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&he.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?he.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ae.call(he(e),this[0]):ae.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),he.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _e(e,"parentNode")},parentsUntil:function(e,t,n){return _e(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return _e(e,"nextSibling")},prevAll:function(e){return _e(e,"previousSibling")},nextUntil:function(e,t,n){return _e(e,"nextSibling",n)},prevUntil:function(e,t,n){return _e(e,"previousSibling",n)},siblings:function(e){return we((e.parentNode||{}).firstChild,e)},children:function(e){return we(e.firstChild)},contents:function(e){return r(e,"iframe")?e.contentDocument:(r(e,"template")&&(e=e.content||e),he.merge([],e.childNodes))}},function(e,t){he.fn[e]=function(n,i){var r=he.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=he.filter(i,r)),this.length>1&&(Ee[e]||he.uniqueSort(r),Ae.test(e)&&r.reverse()),this.pushStack(r)}});var Ie=/[^\x20\t\r\n\f]+/g;he.Callbacks=function(e){e="string"==typeof e?s(e):he.extend({},e);var t,n,i,r,o=[],a=[],c=-1,u=function(){for(r=r||e.once,i=t=!0;a.length;c=-1)for(n=a.shift();++c<o.length;)!1===o[c].apply(n[0],n[1])&&e.stopOnFalse&&(c=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(c=o.length-1,a.push(n)),function t(n){he.each(n,function(n,i){he.isFunction(i)?e.unique&&l.has(i)||o.push(i):i&&i.length&&"string"!==he.type(i)&&t(i)})}(arguments),n&&!t&&u()),this},remove:function(){return he.each(arguments,function(e,t){for(var n;(n=he.inArray(t,o,n))>-1;)o.splice(n,1),n<=c&&c--}),this},has:function(e){return e?he.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},he.extend({Deferred:function(t){var n=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return he.Deferred(function(t){he.each(n,function(n,i){var r=he.isFunction(e[i[4]])&&e[i[4]];o[i[1]](function(){var e=r&&r.apply(this,arguments);e&&he.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,i,r){function o(t,n,i,r){return function(){var s=this,l=arguments,d=function(){var e,d;if(!(t<a)){if((e=i.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==typeof e||"function"==typeof e)&&e.then,he.isFunction(d)?r?d.call(e,o(a,n,c,r),o(a,n,u,r)):(a++,d.call(e,o(a,n,c,r),o(a,n,u,r),o(a,n,c,n.notifyWith))):(i!==c&&(s=void 0,l=[e]),(r||n.resolveWith)(s,l))}},p=r?d:function(){try{d()}catch(e){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(e,p.stackTrace),t+1>=a&&(i!==u&&(s=void 0,l=[e]),n.rejectWith(s,l))}};t?p():(he.Deferred.getStackHook&&(p.stackTrace=he.Deferred.getStackHook()),e.setTimeout(p))}}var a=0;return he.Deferred(function(e){n[0][3].add(o(0,e,he.isFunction(r)?r:c,e.notifyWith)),n[1][3].add(o(0,e,he.isFunction(t)?t:c)),n[2][3].add(o(0,e,he.isFunction(i)?i:u))}).promise()},promise:function(e){return null!=e?he.extend(e,r):r}},o={};return he.each(n,function(e,t){var a=t[2],s=t[5];r[t[1]]=a.add,s&&a.add(function(){i=s},n[3-e][2].disable,n[0][2].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=ie.call(arguments),o=he.Deferred(),a=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?ie.call(arguments):n,--t||o.resolveWith(i,r)}};if(t<=1&&(l(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||he.isFunction(r[n]&&r[n].then)))return o.then();for(;n--;)l(r[n],a(n),o.reject);return o.promise()}});var Re=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Re.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},he.readyException=function(t){e.setTimeout(function(){throw t})};var $e=he.Deferred();he.fn.ready=function(e){return $e.then(e).catch(function(e){he.readyException(e)}),this},he.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--he.readyWait:he.isReady)||(he.isReady=!0,!0!==e&&--he.readyWait>0||$e.resolveWith(te,[he]))}}),he.ready.then=$e.then,"complete"===te.readyState||"loading"!==te.readyState&&!te.documentElement.doScroll?e.setTimeout(he.ready):(te.addEventListener("DOMContentLoaded",d),e.addEventListener("load",d));var Ne=function(e,t,n,i,r,o,a){var s=0,c=e.length,u=null==n;if("object"===he.type(n)){r=!0;for(s in n)Ne(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,he.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(he(e),n)})),t))for(;s<c;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:u?t.call(e):c?t(e[0],n):o},De=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};p.uid=1,p.prototype={cache:function(e){var t=e[this.expando];return t||(t={},De(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[he.camelCase(t)]=n;else for(i in t)r[he.camelCase(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][he.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){Array.isArray(t)?t=t.map(he.camelCase):(t=he.camelCase(t),t=t in i?[t]:t.match(Ie)||[]),n=t.length;for(;n--;)delete i[t[n]]}(void 0===t||he.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!he.isEmptyObject(t)}};var Oe=new p,je=new p,Be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pe=/[A-Z]/g;he.extend({hasData:function(e){return je.hasData(e)||Oe.hasData(e)},data:function(e,t,n){return je.access(e,t,n)},removeData:function(e,t){je.remove(e,t)},_data:function(e,t,n){return Oe.access(e,t,n)},_removeData:function(e,t){Oe.remove(e,t)}}),he.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=je.get(o),1===o.nodeType&&!Oe.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=he.camelCase(i.slice(5)),h(o,i,r[i]));Oe.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){je.set(this,e)}):Ne(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=je.get(o,e)))return n;if(void 0!==(n=h(o,e)))return n}else this.each(function(){je.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){je.remove(this,e)})}}),he.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Oe.get(e,t),n&&(!i||Array.isArray(n)?i=Oe.access(e,t,he.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=he.queue(e,t),i=n.length,r=n.shift(),o=he._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){he.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Oe.get(e,n)||Oe.access(e,n,{empty:he.Callbacks("once memory").add(function(){Oe.remove(e,[t+"queue",n])})})}}),he.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?he.queue(this[0],e):void 0===t?this:this.each(function(){var n=he.queue(this,e,t);he._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&he.dequeue(this,e)})},dequeue:function(e){return this.each(function(){he.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=he.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Oe.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fe=new RegExp("^(?:([+-])=|)("+Le+")([a-z%]*)$","i"),qe=["Top","Right","Bottom","Left"],Me=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&he.contains(e.ownerDocument,e)&&"none"===he.css(e,"display")},He=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r},ze={};he.fn.extend({show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Me(this)?he(this).show():he(this).hide()})}});var We=/^(?:checkbox|radio)$/i,Ke=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ue=/^$|\/(?:java|ecma)script/i,Ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td;var Je=/<|&#?\w+;/;!function(){var e=te.createDocumentFragment().appendChild(te.createElement("div")),t=te.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),pe.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",pe.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ve=te.documentElement,Ze=/^key/,Xe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ye=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(e,t,n,i,r){var o,a,s,c,u,l,d,p,f,h,m,g=Oe.get(e);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),r&&he.find.matchesSelector(Ve,r),n.guid||(n.guid=he.guid++),(c=g.events)||(c=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==he&&he.event.triggered!==t.type?he.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(Ie)||[""]).length;u--;)s=Ye.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f&&(d=he.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=he.event.special[f]||{},l=he.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&he.expr.match.needsContext.test(r),namespace:h.join(".")},o),(p=c[f])||(p=c[f]=[],p.delegateCount=0,d.setup&&!1!==d.setup.call(e,i,h,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,l):p.push(l),he.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,c,u,l,d,p,f,h,m,g=Oe.hasData(e)&&Oe.get(e);if(g&&(c=g.events)){for(u=(t=(t||"").match(Ie)||[""]).length;u--;)if(s=Ye.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(d=he.event.special[f]||{},p=c[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)l=p[o],!r&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,d.remove&&d.remove.call(e,l));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||he.removeEvent(e,f,g.handle),delete c[f])}else for(f in c)he.event.remove(e,f+t[u],n,i,!0);he.isEmptyObject(c)&&Oe.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=he.event.fix(e),c=new Array(arguments.length),u=(Oe.get(this,"events")||{})[s.type]||[],l=he.event.special[s.type]||{};for(c[0]=s,t=1;t<arguments.length;t++)c[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=he.event.handlers.call(this,s,u),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((he.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,c))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,r,o,a,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<c;n++)i=t[n],r=i.selector+" ",void 0===a[r]&&(a[r]=i.needsContext?he(r,this).index(u)>-1:he.find(r,this,null,[u]).length),a[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(he.Event.prototype,e,{enumerable:!0,configurable:!0,get:he.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[he.expando]?e:new he.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==S()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===S()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r(this,"input"))return this.click(),!1},_default:function(e){return r(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},he.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},he.Event=function(e,t){return this instanceof he.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?w:x,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&he.extend(this,t),this.timeStamp=e&&e.timeStamp||he.now(),void(this[he.expando]=!0)):new he.Event(e,t)},he.Event.prototype={constructor:he.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ze.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Xe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},he.event.addProp),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){he.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||he.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),he.fn.extend({on:function(e,t,n,i){return T(this,e,t,n,i)},one:function(e,t,n,i){return T(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,he(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=x),this.each(function(){he.event.remove(this,e,n,t)})}});var Qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,et=/<script|<style|<link/i,tt=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/^true\/(.*)/,it=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;he.extend({htmlPrefilter:function(e){return e.replace(Qe,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),c=he.contains(e.ownerDocument,e);if(!(pe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||he.isXMLDoc(e)))for(a=v(s),o=v(e),i=0,r=o.length;i<r;i++)I(o[i],a[i]);if(t)if(n)for(o=o||v(e),a=a||v(s),i=0,r=o.length;i<r;i++)E(o[i],a[i]);else E(e,s);return(a=v(s,"script")).length>0&&b(a,!c&&v(e,"script")),s},cleanData:function(e){for(var t,n,i,r=he.event.special,o=0;void 0!==(n=e[o]);o++)if(De(n)){if(t=n[Oe.expando]){if(t.events)for(i in t.events)r[i]?he.event.remove(n,i):he.removeEvent(n,i,t.handle);n[Oe.expando]=void 0}n[je.expando]&&(n[je.expando]=void 0)}}}),he.fn.extend({detach:function(e){return $(this,e,!0)},remove:function(e){return $(this,e)},text:function(e){return Ne(this,function(e){return void 0===e?he.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return R(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||k(this,e).appendChild(e)})},prepend:function(){return R(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(he.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return he.clone(this,e,t)})},html:function(e){return Ne(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!et.test(e)&&!Ge[(Ke.exec(e)||["",""])[1].toLowerCase()]){e=he.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(he.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return R(this,arguments,function(t){var n=this.parentNode;he.inArray(this,e)<0&&(he.cleanData(v(this)),n&&n.replaceChild(t,this))},e)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){he.fn[e]=function(e){for(var n,i=[],r=he(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),he(r[a])[t](n),oe.apply(i,n.get());return this.pushStack(i)}});var rt=/^margin/,ot=new RegExp("^("+Le+")(?!px)[a-z%]+$","i"),at=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ve.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",r="4px"===t.marginRight,Ve.removeChild(a),s=null}}var n,i,r,o,a=te.createElement("div"),s=te.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",pe.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),he.extend(pe,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),i},pixelMarginRight:function(){return t(),r},reliableMarginLeft:function(){return t(),o}}))}();var st=/^(none|table(?!-c[ea]).+)/,ct=/^--/,ut={position:"absolute",visibility:"hidden",display:"block"},lt={letterSpacing:"0",fontWeight:"400"},dt=["Webkit","Moz","ms"],pt=te.createElement("div").style;he.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=N(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=he.camelCase(t),c=ct.test(t),u=e.style;return c||(t=j(s)),a=he.cssHooks[t]||he.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:u[t]:("string"===(o=typeof n)&&(r=Fe.exec(n))&&r[1]&&(n=m(e,t,r),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(he.cssNumber[s]?"":"px")),pe.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c?u.setProperty(t,n):u[t]=n))))}},css:function(e,t,n,i){var r,o,a,s=he.camelCase(t);return ct.test(t)||(t=j(s)),(a=he.cssHooks[t]||he.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=N(e,t,i)),"normal"===r&&t in lt&&(r=lt[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),he.each(["height","width"],function(e,t){he.cssHooks[t]={get:function(e,n,i){if(n)return!st.test(he.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?L(e,t,i):He(e,ut,function(){return L(e,t,i)})},set:function(e,n,i){var r,o=i&&at(e),a=i&&P(e,t,i,"border-box"===he.css(e,"boxSizing",!1,o),o);return a&&(r=Fe.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=he.css(e,t)),B(0,n,a)}}}),he.cssHooks.marginLeft=D(pe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(N(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),he.each({margin:"",padding:"",border:"Width"},function(e,t){he.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+qe[i]+t]=o[i]||o[i-2]||o[0];return r}},rt.test(e)||(he.cssHooks[e+t].set=B)}),he.fn.extend({css:function(e,t){return Ne(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=at(e),r=t.length;a<r;a++)o[t[a]]=he.css(e,t[a],!1,i);return o}return void 0!==n?he.style(e,t,n):he.css(e,t)},e,t,arguments.length>1)}}),he.Tween=F,F.prototype={constructor:F,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||he.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(he.cssNumber[n]?"":"px")},cur:function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},run:function(e){var t,n=F.propHooks[this.prop];return this.options.duration?this.pos=t=he.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=he.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){he.fx.step[e.prop]?he.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[he.cssProps[e.prop]]&&!he.cssHooks[e.prop]?e.elem[e.prop]=e.now:he.style(e.elem,e.prop,e.now+e.unit)}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},he.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},he.fx=F.prototype.init,he.fx.step={};var ft,ht,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;he.Animation=he.extend(K,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return m(n.elem,e,Fe.exec(t),n),n}]},tweener:function(e,t){he.isFunction(e)?(t=e,e=["*"]):e=e.match(Ie);for(var n,i=0,r=e.length;i<r;i++)n=e[i],K.tweeners[n]=K.tweeners[n]||[],K.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,c,u,l,d="width"in t||"height"in t,p=this,f={},h=e.style,m=e.nodeType&&Me(e),g=Oe.get(e,"fxshow");n.queue||(null==(a=he._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,he.queue(e,"fx").length||a.empty.fire()})}));for(i in t)if(r=t[i],mt.test(r)){if(delete t[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||he.style(e,i)}if((c=!he.isEmptyObject(t))||!he.isEmptyObject(f)){d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=g&&g.display)&&(u=Oe.get(e,"display")),"none"===(l=he.css(e,"display"))&&(u?l=u:(y([e],!0),u=e.style.display||u,l=he.css(e,"display"),y([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===he.css(e,"float")&&(c||(p.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1;for(i in f)c||(g?"hidden"in g&&(m=g.hidden):g=Oe.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&y([e],!0),p.done(function(){m||y([e]),Oe.remove(e,"fxshow");for(i in f)he.style(e,i,f[i])})),c=z(m?g[i]:0,i,p),i in g||(g[i]=c.start,m&&(c.end=c.start,c.start=0))}}],prefilter:function(e,t){t?K.prefilters.unshift(e):K.prefilters.push(e)}}),he.speed=function(e,t,n){var i=e&&"object"==typeof e?he.extend({},e):{complete:n||!n&&t||he.isFunction(e)&&e,duration:e,easing:n&&t||t&&!he.isFunction(t)&&t};return he.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in he.fx.speeds?i.duration=he.fx.speeds[i.duration]:i.duration=he.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){he.isFunction(i.old)&&i.old.call(this),i.queue&&he.dequeue(this,i.queue)},i},he.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Me).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=he.isEmptyObject(e),o=he.speed(t,n,i),a=function(){var t=K(this,he.extend({},e),o);(r||Oe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=he.timers,a=Oe.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&gt.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||he.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Oe.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=he.timers,a=i?i.length:0;for(n.finish=!0,he.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),he.each(["toggle","show","hide"],function(e,t){var n=he.fn[t];he.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,i,r)}}),he.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){he.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),he.timers=[],he.fx.tick=function(){var e,t=0,n=he.timers;for(ft=he.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||he.fx.stop(),ft=void 0},he.fx.timer=function(e){he.timers.push(e),he.fx.start()},he.fx.interval=13,he.fx.start=function(){ht||(ht=!0,q())},he.fx.stop=function(){ht=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(t,n){return t=he.fx?he.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=te.createElement("input"),t=te.createElement("select").appendChild(te.createElement("option"));e.type="checkbox",pe.checkOn=""!==e.value,pe.optSelected=t.selected,(e=te.createElement("input")).value="t",e.type="radio",pe.radioValue="t"===e.value}();var yt,vt=he.expr.attrHandle;he.fn.extend({attr:function(e,t){return Ne(this,he.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){he.removeAttr(this,e)})}}),he.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?he.prop(e,t,n):(1===o&&he.isXMLDoc(e)||(r=he.attrHooks[t.toLowerCase()]||(he.expr.match.bool.test(t)?yt:void 0)),void 0!==n?null===n?void he.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=he.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!pe.radioValue&&"radio"===t&&r(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(Ie);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),yt={set:function(e,t,n){return!1===t?he.removeAttr(e,n):e.setAttribute(n,n),n}},he.each(he.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vt[t]||he.find.attr;vt[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=vt[a],vt[a]=r,r=null!=n(e,t,i)?a:null,vt[a]=o),r}});var bt=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;he.fn.extend({prop:function(e,t){return Ne(this,he.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[he.propFix[e]||e]})}}),he.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&he.isXMLDoc(e)||(t=he.propFix[t]||t,r=he.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=he.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),pe.optSelected||(he.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this}),he.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,c=0;if(he.isFunction(e))return this.each(function(t){he(this).addClass(e.call(this,t,G(this)))});if("string"==typeof e&&e)for(t=e.match(Ie)||[];n=this[c++];)if(r=G(n),i=1===n.nodeType&&" "+U(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=U(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,c=0;if(he.isFunction(e))return this.each(function(t){he(this).removeClass(e.call(this,t,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ie)||[];n=this[c++];)if(r=G(n),i=1===n.nodeType&&" "+U(r)+" "){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=U(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):he.isFunction(e)?this.each(function(n){he(this).toggleClass(e.call(this,n,G(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=he(this),o=e.match(Ie)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=G(this))&&Oe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Oe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+U(G(n))+" ").indexOf(t)>-1)return!0;return!1}});var wt=/\r/g;he.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=he.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,he(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=he.map(r,function(e){return null==e?"":e+""})),(t=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=he.valHooks[r.type]||he.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(wt,""):null==n?"":n:void 0}}),he.extend({valHooks:{option:{get:function(e){var t=he.find.attr(e,"value");return null!=t?t:U(he.text(e))}},select:{get:function(e){var t,n,i,o=e.options,a=e.selectedIndex,s="select-one"===e.type,c=s?null:[],u=s?a+1:o.length;for(i=a<0?u:s?a:0;i<u;i++)if(((n=o[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!r(n.parentNode,"optgroup"))){if(t=he(n).val(),s)return t;c.push(t)}return c},set:function(e,t){for(var n,i,r=e.options,o=he.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=he.inArray(he.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=he.inArray(he(e).val(),t)>-1}},pe.checkOn||(he.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt=/^(?:focusinfocus|focusoutblur)$/;he.extend(he.event,{trigger:function(t,n,i,r){var o,a,s,c,u,l,d,p=[i||te],f=ue.call(t,"type")?t.type:t,h=ue.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||te,3!==i.nodeType&&8!==i.nodeType&&!xt.test(f+he.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[he.expando]?t:new he.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:he.makeArray(n,[t]),d=he.event.special[f]||{},r||!d.trigger||!1!==d.trigger.apply(i,n))){if(!r&&!d.noBubble&&!he.isWindow(i)){for(c=d.delegateType||f,xt.test(c+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(i.ownerDocument||te)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?c:d.bindType||f,(l=(Oe.get(a,"events")||{})[t.type]&&Oe.get(a,"handle"))&&l.apply(a,n),(l=u&&a[u])&&l.apply&&De(a)&&(t.result=l.apply(a,n),!1===t.result&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),n)||!De(i)||u&&he.isFunction(i[f])&&!he.isWindow(i)&&((s=i[u])&&(i[u]=null),he.event.triggered=f,i[f](),he.event.triggered=void 0,s&&(i[u]=s)),t.result}},simulate:function(e,t,n){var i=he.extend(new he.Event,n,{type:e,isSimulated:!0});he.event.trigger(i,null,t)}}),he.fn.extend({trigger:function(e,t){return this.each(function(){he.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return he.event.trigger(e,t,n,!0)}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){he.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),he.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),pe.focusin="onfocusin"in e,pe.focusin||he.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){he.event.simulate(t,e.target,he.event.fix(e))};he.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Oe.access(i,t);r||i.addEventListener(e,n,!0),Oe.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Oe.access(i,t)-1;r?Oe.access(i,t,r):(i.removeEventListener(e,n,!0),Oe.remove(i,t))}}});var St=e.location,Tt=he.now(),kt=/\?/;he.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||he.error("Invalid XML: "+t),n};var Ct=/\[\]$/,At=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;he.param=function(e,t){var n,i=[],r=function(e,t){var n=he.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!he.isPlainObject(e))he.each(e,function(){r(this.name,this.value)});else for(n in e)J(n,e[n],t,r);return i.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=he.prop(this,"elements");return e?he.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!he(this).is(":disabled")&&It.test(this.nodeName)&&!Et.test(e)&&(this.checked||!We.test(e))}).map(function(e,t){var n=he(this).val();return null==n?null:Array.isArray(n)?he.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Rt=/%20/g,$t=/#.*$/,Nt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,Bt=/^\/\//,Pt={},Lt={},Ft="*/".concat("*"),qt=te.createElement("a");qt.href=St.href,he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:Ot.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?X(X(e,he.ajaxSettings),t):X(he.ajaxSettings,e)},ajaxPrefilter:V(Pt),ajaxTransport:V(Lt),ajax:function(t,n){function i(t,n,i,s){var u,p,f,_,w,x=n;l||(l=!0,c&&e.clearTimeout(c),r=void 0,a=s||"",S.readyState=t>0?4:0,u=t>=200&&t<300||304===t,i&&(_=Y(h,S,i)),_=Q(h,_,S,u),u?(h.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(he.lastModified[o]=w),(w=S.getResponseHeader("etag"))&&(he.etag[o]=w)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=_.state,p=_.data,f=_.error,u=!f)):(f=x,!t&&x||(x="error",t<0&&(t=0))),S.status=t,S.statusText=(n||x)+"",u?y.resolveWith(m,[p,x,S]):y.rejectWith(m,[S,x,f]),S.statusCode(b),b=void 0,d&&g.trigger(u?"ajaxSuccess":"ajaxError",[S,h,u?p:f]),v.fireWith(m,[S,x]),d&&(g.trigger("ajaxComplete",[S,h]),--he.active||he.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,a,s,c,u,l,d,p,f,h=he.ajaxSetup({},n),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?he(m):he.event,y=he.Deferred(),v=he.Callbacks("once memory"),b=h.statusCode||{},_={},w={},x="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Dt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),i(0,t),this}};if(y.promise(S),h.url=((t||h.url||St.href)+"").replace(Bt,St.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Ie)||[""],null==h.crossDomain){u=te.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=qt.protocol+"//"+qt.host!=u.protocol+"//"+u.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=he.param(h.data,h.traditional)),Z(Pt,h,n,S),l)return S;(d=he.event&&h.global)&&0==he.active++&&he.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!jt.test(h.type),o=h.url.replace($t,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Rt,"+")):(f=h.url.slice(o.length),h.data&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Nt,"$1"),f=(kt.test(o)?"&":"?")+"_="+Tt+++f),h.url=o+f),h.ifModified&&(he.lastModified[o]&&S.setRequestHeader("If-Modified-Since",he.lastModified[o]),he.etag[o]&&S.setRequestHeader("If-None-Match",he.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ft+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)S.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(m,S,h)||l))return S.abort();if(x="abort",v.add(h.complete),S.done(h.success),S.fail(h.error),r=Z(Lt,h,n,S)){if(S.readyState=1,d&&g.trigger("ajaxSend",[S,h]),l)return S;h.async&&h.timeout>0&&(c=e.setTimeout(function(){S.abort("timeout")},h.timeout));try{l=!1,r.send(_,i)}catch(e){if(l)throw e;i(-1,e)}}else i(-1,"No Transport");return S},getJSON:function(e,t,n){return he.get(e,t,n,"json")},getScript:function(e,t){return he.get(e,void 0,t,"script")}}),he.each(["get","post"],function(e,t){he[t]=function(e,n,i,r){return he.isFunction(n)&&(r=r||i,i=n,n=void 0),he.ajax(he.extend({url:e,type:t,dataType:r,data:n,success:i},he.isPlainObject(e)&&e))}}),he._evalUrl=function(e){return he.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},he.fn.extend({wrapAll:function(e){var t;return this[0]&&(he.isFunction(e)&&(e=e.call(this[0])),t=he(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return he.isFunction(e)?this.each(function(t){he(this).wrapInner(e.call(this,t))}):this.each(function(){var t=he(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=he.isFunction(e);return this.each(function(n){he(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(e){return!he.expr.pseudos.visible(e)},he.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Mt={0:200,1223:204},Ht=he.ajaxSettings.xhr();pe.cors=!!Ht&&"withCredentials"in Ht,pe.ajax=Ht=!!Ht,he.ajaxTransport(function(t){var n,i;if(pe.cors||Ht&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Mt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),he.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return he.globalEval(e),e}}}),he.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),he.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=he("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),te.head.appendChild(t[0])},abort:function(){n&&n()}}}});var zt=[],Wt=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||he.expando+"_"+Tt++;return this[e]=!0,e}}),he.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=he.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+r):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||he.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===o?he(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,zt.push(r)),a&&he.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),pe.createHTMLDocument=function(){var e=te.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),he.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,r,o;return t||(pe.createHTMLDocument?(t=te.implementation.createHTMLDocument(""),i=t.createElement("base"),i.href=te.location.href,t.head.appendChild(i)):t=te),r=Se.exec(e),o=!n&&[],r?[t.createElement(r[1])]:(r=_([e],t,o),o&&o.length&&he(o).remove(),he.merge([],r.childNodes))},he.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=U(e.slice(s)),e=e.slice(0,s)),he.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&he.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?he("<div>").append(he.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){he.fn[t]=function(e){return this.on(t,e)}}),he.expr.pseudos.animated=function(e){return he.grep(he.timers,function(t){return e===t.elem}).length},he.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,u=he.css(e,"position"),l=he(e),d={};"static"===u&&(e.style.position="relative"),s=l.offset(),o=he.css(e,"top"),c=he.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1?(i=l.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),he.isFunction(t)&&(t=t.call(e,n,he.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):l.css(d)}},he.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){he.offset.setOffset(this,e,t)});var t,n,i,r,o=this[0];return o?o.getClientRects().length?(i=o.getBoundingClientRect(),t=o.ownerDocument,n=t.documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===he.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),r(e[0],"html")||(i=e.offset()),i={top:i.top+he.css(e[0],"borderTopWidth",!0),left:i.left+he.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-he.css(n,"marginTop",!0),left:t.left-i.left-he.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===he.css(e,"position");)e=e.offsetParent;return e||Ve})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;he.fn[e]=function(i){return Ne(this,function(e,i,r){var o;return he.isWindow(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),he.each(["top","left"],function(e,t){he.cssHooks[t]=D(pe.pixelPosition,function(e,n){if(n)return n=N(e,t),ot.test(n)?he(e).position()[t]+"px":n})}),he.each({Height:"height",Width:"width"},function(e,t){he.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){he.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return Ne(this,function(t,n,r){var o;return he.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?he.css(t,n,s):he.style(t,n,r,s)},t,a?r:void 0,a)}})}),he.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),he.holdReady=function(e){e?he.readyWait++:he.ready(!0)},he.isArray=Array.isArray,he.parseJSON=JSON.parse,he.nodeName=r,"function"==typeof define&&define.amd&&define("jquery",[],function(){return he});var Kt=e.jQuery,Ut=e.$;return he.noConflict=function(t){return e.$===he&&(e.$=Ut),t&&e.jQuery===he&&(e.jQuery=Kt),he},t||(e.jQuery=e.$=he),he}),function(e){function t(t){var n=t||window.event,i=[].slice.call(arguments,1),r=0,o=0,a=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(r=n.wheelDelta/120),n.detail&&(r=-n.detail/3),a=r,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(a=0,o=-1*r),void 0!==n.wheelDeltaY&&(a=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(o=-1*n.wheelDeltaX/120),i.unshift(t,r,o,a),(e.event.dispatch||e.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=n.length;i;)e.event.fixHooks[n[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};i.format=function(e,r){var o,a,s,c,u,l,d,p=1,f=e.length,h="",m=[];for(a=0;a<f;a++)if("string"===(h=t(e[a])))m.push(e[a]);else if("array"===h){if((c=e[a])[2])for(o=r[p],s=0;s<c[2].length;s++){if(!o.hasOwnProperty(c[2][s]))throw i('[sprintf] property "%s" does not exist',c[2][s]);o=o[c[2][s]]}else o=c[1]?r[c[1]]:r[p++];if(/[^s]/.test(c[8])&&"number"!==t(o))throw i("[sprintf] expecting number but found %s",t(o));switch(c[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=c[7]?o.toExponential(c[7]):o.toExponential();break;case"f":o=c[7]?parseFloat(o).toFixed(c[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&c[7]?o.substring(0,c[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(c[8])&&c[3]&&o>=0?" +"+o:o,l=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",d=c[6]-String(o).length,u=c[6]?n(l,d):"",m.push(c[5]?o+u:u+o)}return m.join("")},i.cache={},i.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){r|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";o.push(s[1])}n[2]=o}else r|=2;if(3===r)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";i.push(n)}t=t.substring(n[0].length)}return i};e.sprintf=i,e.vsprintf=function(e,t,n){return(n=t.slice(0)).splice(0,0,e),i.apply(null,n)}}("undefined"!=typeof global?global:window),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e,t){"use strict";function n(){var t=e.Callbacks(),n=!1;this.resolve=function(){t.fire(),n=!0},this.add=function(e){n?e():t.add(e)}}function i(e,t){var n;if("string"==typeof e&&"string"==typeof t)return x[e]=t,!0;if("object"==typeof e&&void 0===t){for(n in e)e.hasOwnProperty(n)&&(x[n]=e[n]);return!0}return!1}function r(e,t){var n,i,r;if((n=new Date).setTime(n.getTime()+31536e6),i="; expires="+n.toGMTString(),"string"==typeof e&&"string"==typeof t)return document.cookie=e+"="+t+i+"; path=/",!0;if("object"==typeof e&&void 0===t){for(r in e)e.hasOwnProperty(r)&&(document.cookie=r+"="+e[r]+i+"; path=/");return!0}return!1}function o(e){return x[e]}function a(e){return delete x[e]}function s(e){e.attr({role:"presentation","aria-hidden":"true"})}function c(){var t=[].slice.call(arguments),n=0;e.extend(this,{get:function(){return t},index:function(){return n},rotate:function(e){if(e||t.filter(function(e){return void 0!==e}).length)return 1===t.length?t[0]:(n===t.length-1?n=0:++n,void 0!==t[n]?t[n]:this.rotate(!0))},length:function(){return t.length},remove:function(e){delete t[e]},set:function(e){for(var i=t.length;i--;)if(t[i]===e)return void(n=i);this.append(e),n=t.length-1},front:function(){if(t.length){for(var e=n,i=!1;!t[e];)if(++e>t.length){if(i)break;e=0,i=!0}return t[e]}},map:function(e){return t.filter(Boolean).map(e)},forEach:function(e){t.filter(Boolean).forEach(e)},append:function(e){t.push(e)}})}function u(t){var n=t instanceof Array?t:t?[t]:[];e.extend(this,{data:function(){return n},map:function(t){return e.map(n,t)},size:function(){return n.length},pop:function(){if(0===n.length)return null;var e=n[n.length-1];return n=n.slice(0,n.length-1),e},push:function(e){return n=n.concat([e]),e},top:function(){return n.length>0?n[n.length-1]:null},clone:function(){return new u(n.slice(0))}})}function l(t,n,i){var r=!0,o="";"string"==typeof t&&""!==t&&(o=t+"_"),o+="commands";var a;i?a=[]:(a=e.Storage.get(o),a=a?JSON.parse(a):[]);var s=a.length-1;e.extend(this,{append:function(t){r&&a[a.length-1]!==t&&(a.push(t),n&&a.length>n&&(a=a.slice(-n)),s=a.length-1,i||e.Storage.set(o,JSON.stringify(a)))},set:function(t){t instanceof Array&&(a=t,i||e.Storage.set(o,JSON.stringify(a)))},data:function(){return a},reset:function(){s=a.length-1},last:function(){return a[a.length-1]},end:function(){return s===a.length-1},position:function(){return s},current:function(){return a[s]},next:function(){if(s<a.length-1&&++s,-1!==s)return a[s]},previous:function(){var e=s;if(s>0&&--s,-1!==e)return a[s]},clear:function(){a=[],this.purge()},enabled:function(){return r},enable:function(){r=!0},purge:function(){i||e.Storage.remove(o)},disable:function(){r=!1}})}function d(t){return e("<span>"+e.terminal.strip(t)+"</span>").text()}function p(t,n){var i=t.match(q)||[];if(i.length){var r=i.shift(),o=e.map(i,n),a=e.map(i,function(e){var t=e.match(/^(['"]).*\1$/);return t&&t[1]||""});return{command:t,name:r,args:o,args_quotes:a,rest:t.substring(r.length).trim()}}return{command:t,name:"",args:[],args_quotes:a,rest:""}}function f(){if(!("KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype))return!1;var e=window.KeyboardEvent.prototype;return Object.getOwnPropertyDescriptor(e,"key").get.toString().match(/\[native code\]/)}function h(e){e="[jQuery Terminal] "+e,console&&console.warn?console.warn(e):setTimeout(function(){throw new Error("WARN: "+e)},0)}function m(){var t=e('<div class="terminal temp"><div class="cmd"><span class="prompt">&nbsp;</span></div></div>').appendTo("body"),n=t.find("span")[0].getBoundingClientRect(),i={width:n.width,height:n.height};return t.remove(),i}function g(e,t){var n=e.find(".terminal-fill").width();return Math.floor(n/t.width)||1e3}function y(e,t){return Math.floor(e.find(".terminal-fill").height()/t.height)}function v(t,n){var i,r=e("<div>"+n.replace(/\n/,"<br/>")+"<div>");if(t.append(r),document.body.createTextRange)(i=document.body.createTextRange()).moveToElementText(r[0]),i.select();else if(window.getSelection){var o=window.getSelection();o.setBaseAndExtent?o.setBaseAndExtent(r[0],0,r[0],1):document.createRange&&((i=document.createRange()).selectNodeContents(r[0]),o.removeAllRanges(),o.addRange(i))}try{document.execCommand("copy")}catch(e){}r.remove()}function b(e,t){return e.filter(function(e){return e[t]()===e}).length===e.length}function _(e){var t=e.split("");return b(t,"toLowerCase")?"lower":b(t,"toUpperCase")?"upper":"mixed"}function w(e){return"mixed"!==_(e)}e.omap=function(t,n){var i={};return e.each(t,function(e,r){i[e]=n.call(t,e,r)}),i},e.fn.text_length=function(){return this.map(function(){return e(this).text().length}).get().reduce(function(e,t){return e+t},0)};var x,S={clone_object:function(t){var n={};if("object"==typeof t){if(e.isArray(t))return this.clone_array(t);if(null===t)return t;for(var i in t)e.isArray(t[i])?n[i]=this.clone_array(t[i]):"object"==typeof t[i]?n[i]=this.clone_object(t[i]):n[i]=t[i]}return n},clone_array:function(t){if(!e.isFunction(Array.prototype.map))throw new Error("Your browser don't support ES5 array map use es5-shim");return t.slice(0).map(function(e){return"object"==typeof e?this.clone_object(e):e}.bind(this))}},T=function(e){return S.clone_object(e)},k=function(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!1}}();(function(){try{return document.cookie.split(";"),!0}catch(e){return!1}})()||k?(x=window.localStorage,e.extend({Storage:{set:k?i:r,get:k?o:function(e){var t,n,i,r;for(t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},remove:k?a:function(e){return r(e,"",-1)}}})):(x={},e.extend({Storage:{set:i,get:o,remove:a}}));var C=e;C.fn.extend({everyTime:function(e,t,n,i,r){return this.each(function(){C.timer.add(this,e,t,n,i,r)})},oneTime:function(e,t,n){return this.each(function(){C.timer.add(this,e,t,n,1)})},stopTime:function(e,t){return this.each(function(){C.timer.remove(this,e,t)})}}),C.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===t||null===e)return null;var n=this.regex.exec(C.trim(e.toString()));return n[2]?parseInt(n[1],10)*(this.powers[n[2]]||1):e},add:function(e,t,n,i,r,o){var a=0;if(C.isFunction(n)&&(r||(r=i),i=n,n=t),!("number"!=typeof(t=C.timer.timeParse(t))||isNaN(t)||t<=0)){r&&r.constructor!==Number&&(o=!!r,r=0),r=r||0,o=o||!1,e.$timers||(e.$timers={}),e.$timers[n]||(e.$timers[n]={}),i.$timerID=i.$timerID||this.guid++;var s=function(){o&&s.inProgress||(s.inProgress=!0,(++a>r&&0!==r||!1===i.call(e,a))&&C.timer.remove(e,n,i),s.inProgress=!1)};s.$timerID=i.$timerID,e.$timers[n][i.$timerID]||(e.$timers[n][i.$timerID]=window.setInterval(s,t)),this.global[n]||(this.global[n]=[]),this.global[n].push(e)}},remove:function(e,t,n){var i,r=e.$timers;if(r){if(t){if(r[t]){if(n)n.$timerID&&(window.clearInterval(r[t][n.$timerID]),delete r[t][n.$timerID]);else for(var o in r[t])r[t].hasOwnProperty(o)&&(window.clearInterval(r[t][o]),delete r[t][o]);for(i in r[t])if(r[t].hasOwnProperty(i))break;i||(i=null,delete r[t])}}else for(var a in r)r.hasOwnProperty(a)&&this.remove(e,a,n);for(i in r)if(r.hasOwnProperty(i))break;i||(e.$timers=null)}}}}),/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&C(window).one("unload",function(){var e=C.timer.global;for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t],i=n.length;--i;)C.timer.remove(n[i],t)}),function(e){if(String.prototype.split.toString().match(/\[native/)){var t,n=String.prototype.split,i=void 0===/()??/.exec("")[1];t=function(e,t,r){if("[object RegExp]"!==Object.prototype.toString.call(t))return n.call(e,t,r);var o,a,s,c,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),d=0;for(t=new RegExp(t.source,l+"g"),e+="",i||(o=new RegExp("^"+t.source+"$(?!\\s)",l)),r=void 0===r?-1>>>0:r>>>0;(a=t.exec(e))&&!((s=a.index+a[0].length)>d&&(u.push(e.slice(d,a.index)),!i&&a.length>1&&a[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<e.length&&Array.prototype.push.apply(u,a.slice(1)),c=a[0].length,d=s,u.length>=r));)t.lastIndex===a.index&&t.lastIndex++;return d===e.length?!c&&t.test("")||u.push(""):u.push(e.slice(d)),u.length>r?u.slice(0,r):u},String.prototype.split=function(e,n){return t(this,e,n)}}}(),e.fn.caret=function(e){var t=this[0],n="true"===t.contentEditable;if(0===arguments.length){if(window.getSelection)return n?(t.focus(),(o=(i=window.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(t),o.setEnd(i.endContainer,i.endOffset),o.toString().length):t.selectionStart;if(document.selection){if(t.focus(),n){var i=document.selection.createRange();return(o=document.body.createTextRange()).moveToElementText(t),o.setEndPoint("EndToEnd",i),o.text.length}var e=0,r=t.createTextRange(),o=document.selection.createRange().duplicate(),a=o.getBookmark();for(r.moveToBookmark(a);0!==r.moveStart("character",-1);)e++;return e}return 0}return-1===e&&(e=this[n?"text":"val"]().length),window.getSelection?n?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e):document.body.createTextRange&&((r=document.body.createTextRange()).moveToElementText(t),r.moveStart("character",e),r.collapse(!0),r.select()),n||t.focus(),e};var A=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};e.fn.resizer=function(t){var n="unbind"===arguments[0];if(!n&&!e.isFunction(t))throw new Error('Invalid argument, it need to a function of string "unbind".');return this.each(function(){var i=e(this);if(n)e(this).removeData("callbacks").find(".resizer").remove();else if(i.data("callbacks"))e(this).data("callbacks").push(t);else{i.data("callbacks",[t]);var r=this,o=e("<div/>").addClass("resizer").appendTo(this)[0],a="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",s="position: absolute; left: 0; top: 0; transition: 0s;";o.style.cssText=a,o.innerHTML='<div class="resize-sensor-expand" style="'+a+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+a+'"><div style="'+s+' width: 200%; height: 200%"></div></div>';var c,u,l,d,p=o.childNodes[0],f=p.childNodes[0],h=o.childNodes[1],m=r.offsetWidth,g=r.offsetHeight,y=function(){f.style.width="100000px",f.style.height="100000px",p.scrollLeft=1e5,p.scrollTop=1e5,h.scrollLeft=1e5,h.scrollTop=1e5};y();var v=function(){if(u=0,c){m=l,g=d;var e=i.data("callbacks");e&&e.length&&e.forEach(function(e){e()})}},b=function(){l=r.offsetWidth,d=r.offsetHeight,(c=l!==m||d!==g)&&!u&&(u=A(v)),y()};e(p).on("scroll",b),e(h).on("scroll",b)}})};var E=0;e.fn.cmd=function(n){function i(t){var n=e(t.target);if(n.is("span"))return n.index()+n.closest('[role="presentation"]').prevUntil(".prompt").text_length()}function r(e){if(e.key){var t=e.key.toUpperCase();if("CONTROL"===t)return"CTRL";var n=[];return e.ctrlKey&&n.push("CTRL"),e.metaKey&&"META"!==t&&n.push("META"),e.shiftKey&&"SHIFT"!==t&&n.push("SHIFT"),e.altKey&&"ALT"!==t&&n.push("ALT"),e.key&&("DEL"===t?n.push("DELETE"):n.push(t)),n.join("+")}}function o(){return!0}function a(){return W.val(""),ye=0,M.isenabled()&&!W.is(":focus")&&W.trigger("focus",[!0]),W.one("input",O),!0}function c(){return Se?(Q=de,M.set(ie.current())):M.set(ie.previous()),Se=!1,!1}function u(){return M.set(ie.end()?Q:ie.next()),!1}function p(){fe>0&&(M.position(-1,!0),_e())}function h(){return fe<de.length&&M.position(1,!0),!1}function m(){M.position(0)}function g(){M.position(de.length)}function y(){var e=W.is(":focus");te?M.oneTime(10,function(){W.is(":focus")}):!e||!Z&&te||W.trigger("blur",[!0])}function b(e){M.oneTime(10,function(){W.val()===de||e||W.val(de),te&&M.oneTime(10,function(){try{W.caret(fe)}catch(e){}})})}function _(){ge.toggleClass("inverted")}function w(){ee="(reverse-i-search)`"+ce+"': ",we()}function x(){ee=Y,se=!1,ue=null,ce=""}function S(t){var n,i,r=ie.data(),o=r.length;if(t&&ue>0&&(o-=ue),ce.length>0)for(var a=ce.length;a>0;a--){i=e.terminal.escape_regex(ce.substring(0,a)),n=new RegExp(i);for(var s=o;s--;)if(n.test(r[s]))return ue=r.length-s,M.position(r[s].indexOf(i)),M.set(r[s],!0),_e(),void(ce.length!==a&&(ce=ce.substring(0,a),w()))}ce=""}function T(){var e=M.find(".prompt").text("&nbsp;"),t=M.width(),n=e[0].getBoundingClientRect().width;K=Math.floor(t/n),we()}function k(t){function n(t){return e.terminal.split_equal(t,K)}var i,r=ae.text(),o=new RegExp("^"+e.terminal.escape_regex(r));if(t.match(/\n/)){for(var a=t.split("\n"),s=K-U-1,c=0;c<a.length-1;++c)a[c]+=" ";for(V(a[0])>s?(i=n(r+a[0]))[0]=i[0].replace(o,""):i=[a[0]],c=1;c<a.length;++c)a[c].length>K?i=i.concat(n(a[c])):i.push(a[c])}else(i=n(r+t))[0]=i[0].replace(o,"");return i}function C(t){t=e.terminal.escape_formatting(t);try{return e.terminal.apply_formatters(t)}catch(e){alert(e.message+"\n"+(e.stack?e.stack:e))}}function A(t){return e.terminal.format(e.terminal.encode(I(t)))}function I(t){for(var n=[],i=e.terminal.length(t),r=0;r<i;++r){var o=e.terminal.substring(t,r,r+1);e.terminal.is_formatting(o)?n.push(o):n.push("[[;;]"+o+"]")}return n.join("")}function R(t){return e.terminal.length(t)}function $(t,n){for(var i,r=e.terminal.length(t),o=e.terminal.length(n);o>1;o--)for(var a=e.terminal.substring(n,0,o),s=C(a),c=r;c>1;c--)e.terminal.substring(t,0,c)===s&&function(e){return i&&R(e)>R(i)||!i}(a)&&(i=a);return i||""}function N(t){for(var n=0===t?0:t-1,i=e.terminal.length(de),r=n;r<i-1;++r){var o=e.terminal.substring(de,0,r),a=e.terminal.substring(de,0,r+1),s=C(o),c=C(a),u=R(s),l=R(c);if(Math.abs(l-u)>1)return r}}function D(t){var n=t,i=C(de),r=e.terminal.length(i);if(r!==e.terminal.length(de)){var o=e.terminal.substring(de,0,t),a=e.terminal.length(o),s=C(o),c=e.terminal.length(s),u=(Math.abs(a-c),N(t)),l=e.terminal.substring(de,0,u+1);if(n-=a-c,o&&o!==l){var d=$(C(l),o);if(d&&o!==d){var p=new RegExp("^"+e.terminal.escape_regex(d)),f=R(C(l.replace(p,"")));n=R(C(d))+f}}n>r?n=r:n<0&&(n=0)}return n}function O(){ye++>0||M.isenabled()&&M.oneTime(100,function(){M.insert(W.val()),W.val(de),b()})}function j(){e.isFunction(n.onCommandChange)&&n.onCommandChange(de)}function B(i){F('keydown "'+i.key+'" '+i.fake+" "+i.which),$e="process"===(i.key||"").toLowerCase()||0===i.which;var o;ke=Ae&&Ce;try{i.fake||(Ce=i.key&&1===i.key.length&&!i.ctrlKey,Ee="unidentified"===String(i.key).toLowerCase(),Re="BACKSPACE"===i.key.toUpperCase()||8===i.which)}catch(e){}if("Unidentified"!==i.key){i.fake||(Ae=!0,Ie=!1),W.off("input",O);var a=r(i);if(e.isFunction(n.keydown)&&(o=n.keydown(i))!==t)return o||(xe=!0),o;if(te)if(xe=-1!==["CTRL+V","META+V"].indexOf(a),38===i.which||80===i.which&&i.ctrlKey||(Se=!0),!se||35!==i.which&&36!==i.which&&37!==i.which&&38!==i.which&&39!==i.which&&40!==i.which&&13!==i.which&&27!==i.which){if(!e.isFunction(oe[a]))return i.altKey?void 0:void(Te=!1);if(!0===(o=oe[a]()))return;if(o!==t)return o}else x(),we(),27===i.which&&M.set(""),_e(),B.call(this,i)}else Ie=!0}function P(i){F('keypress "'+i.key+'" '+i.fake);var r;if(i.fake||(Ae=!1),(!i.ctrlKey&&!i.metaKey||i.altKey)&&!Te){if(e.isFunction(n.keypress)&&(r=n.keypress(i))!==t)return r||(xe=!0),r;if(te){if(i.fake)return;var o;if((f()||i.fake)&&(o=i.key),o&&!Ee||(o=String.fromCharCode(i.which)),"SPACEBAR"===o.toUpperCase()&&(o=" "),e.inArray(i.which,[13,0,8])>-1){if(123===i.keyCode)return;return!1}!o||!(!i.ctrlKey||i.ctrlKey&&i.ctrlKey)||i.altKey&&100===i.which&&!i.altKey||ke||(se?(ce+=o,S(),w()):M.insert(o))}}}function L(t,n,i){var r=e.Event(t);r.which=i,r.key=n,r.fake=!0,De.trigger(r)}function F(e){}function q(e){F("input "+Ie+" || "+$e+" (("+Ae+" || "+ke+") && !"+xe+" && ("+Ce+" || "+Ee+") && !"+Re+")"),F(JSON.stringify({data:e.originalEvent.data,inputType:e.originalEvent.data}));var t=W.val();if((Ie||$e||(Ae||ke)&&!xe&&(Ce||Ee)&&!Re)&&t!==de){var n=fe;if(Ie){var i=Ne;Re=i.substring(0,i.length-1).length===t.length}if(se)ce=t,S(),w();else{var r=t.substring(fe);if(1===r.length||Re){if(Ie){var o;o=Re?8:r.toUpperCase().charCodeAt(0),L("keydown",Re?"Backspace":r,o)}Ae&&!Re&&L("keypress",r,r.charCodeAt(0))}if(Re)return void(Ne=de);if(xe)return void(xe=!1);M.set(t)}Re?M.position(n-1):M.position(n+Math.abs(t.length-Ne.length))}Ne=de,xe=!1,Ie=!0}var M=this,H=M.data("cmd");if(H)return H;var z=E++;M.addClass("cmd"),M.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>'),s(M.find("span").not(":eq(0)"));var W=e("<textarea>").attr({autocapitalize:"off",spellcheck:"false",tabindex:1}).addClass("clipboard").appendTo(M);n.width&&M.width(n.width);var K,U,Y,Q,ee,te,ne,ie,re,oe,ae=M.find(".prompt"),se=!1,ce="",ue=null,le=n.mask||!1,de="",pe="",fe=0,he=0,me=n.historySize||60,ge=M.find(".cursor"),ye=0,ve={"ALT+D":function(){return M.set(de.slice(0,fe)+de.slice(fe).replace(/ *[^ ]+ *(?= )|[^ ]+$/,""),!0),!1},ENTER:function(){(ie&&de&&!le&&e.isFunction(n.historyFilter)&&n.historyFilter(de)||n.historyFilter instanceof RegExp&&de.match(n.historyFilter)||!n.historyFilter)&&ie.append(de);var t=de;return ie.reset(),Ne="",Ie=!0,M.set(""),n.commands&&n.commands(t),e.isFunction(ee)&&we(),W.val(""),!1},"SHIFT+ENTER":function(){return M.insert("\n"),!0},BACKSPACE:function(){se?(ce=ce.slice(0,-1),w()):""!==de&&fe>0&&M.delete(-1),M.oneTime(1,function(){Ie=!0})},TAB:function(){M.insert("\t")},"CTRL+D":function(){return M.delete(1),!1},DELETE:function(){return M.delete(1),!0},ARROWUP:c,UP:c,"CTRL+P":c,ARROWDOWN:u,DOWN:u,"CTRL+N":u,ARROWLEFT:p,LEFT:p,"CTRL+B":p,"CTRL+ARROWLEFT":function(){var e=fe-1,t=0;" "===de[e]&&--e;for(var n=e;n>0;--n){if(" "===de[n]&&" "!==de[n+1]){t=n+1;break}if("\n"===de[n]&&"\n"!==de[n+1]){t=n;break}}M.position(t)},"CTRL+R":function(){return se?S(!0):(Y=ee,w(),Q=de,M.set(""),_e(),se=!0),!1},"CTRL+G":function(){if(se)return ee=Y,we(),M.set(Q),_e(),se=!1,ce="",!1},ARROWRIGHT:h,"CTRL+F":h,RIGHT:h,"CTRL+ARROWRIGHT":function(){" "===de[fe]&&++fe;var e=/\S[\n\s]{2,}|[\n\s]+\S?/,t=de.slice(fe).match(e);!t||t[0].match(/^\s+$/)?M.position(de.length):" "!==t[0][0]?fe+=t.index+1:(fe+=t.index+t[0].length-1," "!==t[0][t[0].length-1]&&--fe),_e()},F12:o,END:g,"CTRL+E":g,HOME:m,"CTRL+A":m,"SHIFT+INSERT":a,"CTRL+SHIFT+T":o,"CTRL+W":function(){if(""!==de&&0!==fe){var e=de.slice(0,fe).match(/([^ ]+ *$)/);e[0].length&&(pe=M.delete(-e[0].length),v(M,pe))}return!1},"CTRL+H":function(){return""!==de&&fe>0&&M.delete(-1),!1},"CTRL+X":o,"CTRL+C":o,"CTRL+T":o,"CTRL+Y":function(){""!==pe&&M.insert(pe)},"CTRL+V":a,"META+V":a,"CTRL+K":function(){return de.length-fe&&(pe=M.delete(de.length-fe),v(M,pe)),!1},"CTRL+U":function(){return""!==de&&0!==fe&&(pe=M.delete(-fe),v(M,pe)),!1},"CTRL+TAB":function(){return!1},"META+`":o,"META+R":o,"META+L":o};if(G&&!J)re=function(e){e?ge.addClass("blink"):ge.removeClass("blink")};else{var be=!1;re=function(e){e&&!be?(be=!0,ge.addClass("inverted blink"),M.everyTime(500,"blink",_)):be&&!e&&(be=!1,M.stopTime("blink",_),ge.removeClass("inverted blink"))}}var _e=function(){function n(t,n,i){return e.terminal.substring(t,n,i)}function i(t,i){if(i===e.terminal.length(t))s.html(A(t)),ge.html("&nbsp;"),c.html("");else if(0===i)s.html(""),ge.html(A(n(t,0,1))),c.html(A(n(t,1)));else{var r=n(t,0,i);s.html(A(r));var o=n(t,i,i+1);ge.html(A(o)),i===t.length-1?c.html(""):c.html(A(n(t,i+1)))}}function r(e){return'<div role="presentation">'+A(e)+"</div>"}function o(t){var n=c;e.each(t,function(t,i){n=e(r(i)).insertAfter(n)})}function a(t){e.each(t,function(e,t){s.before(r(t))})}var s=ge.prev(),c=ge.next();return function(){var n;switch(typeof le){case"boolean":n=le?de.replace(/./g,"*"):de;break;case"string":n=de.replace(/./g,le)}var u=he;n=C(n.replace(/</g,"&#60;").replace(/>/g,"&#62;"));var l;if(M.find("div").remove(),s.html(""),V(d(n))>K-U-1||n.match(/\n/)){var p=n.match(/\t/g),f=p?3*p.length:0;p&&(n=n.replace(/\t/g,"\0\0\0\0"));var h=k(n);p&&(h=e.map(h,function(e){return e.replace(/\x00\x00\x00\x00/g,"\t")}));var m=e.terminal.length(h[0]);if(0===m&&1===h.length);else if(u<m)i(h[0],u),o(h.slice(1));else if(u===m)s.before(r(h[0])),i(h[1]||"",0),h.length>1&&o(h.slice(2));else{var g=h.length;if(u<m)i(h[0],u),o(h.slice(1));else if(u===m)s.before(r(h[0])),i(h[1],0),o(h.slice(2));else{var y=h.slice(-1)[0],v=e.terminal.length(n)-u-f,b=e.terminal.length(y),_=0;if(-1===v&&(v=0),v<=b)a(h.slice(0,-1)),i(y,_=b===v?0:b-v);else if(3===g){var w=A(h[0]);s.before('<div role="presentation">'+w+"</div>"),i(h[1],u-m-1),w=A(C(h[2])),c.after('<div role="presentation">'+w+"</div>")}else{var x,S;for(_=u,l=0;l<h.length;++l){var T=e.terminal.length(h[l]);if(!(_>T))break;_-=T}if(S=h[l],x=l,_===S.length&&(_=0,(S=h[++x])===t)){var E=e.terminal.defaults.strings.redrawError;throw new Error(E)}i(S,_),a(h.slice(0,x)),o(h.slice(x+1))}}}}else""===n?(s.html(""),ge.html("&nbsp;"),c.html("")):i(n,u)}}(),we=function(){function t(t){var n=e.terminal.split_equal(e.terminal.encode(t),K),i=e.terminal.format(n[n.length-1]),r=n.slice(0,-1).map(function(t){return'<span class="line">'+e.terminal.format(t)+"</span>"}).concat([i]).join("\n");ae.html(r),U=V(e("<span>"+i+"</span>").text())}return function(){switch(typeof ee){case"string":t(ee);break;case"function":ee(t)}}}();e.extend(M,{name:function(e){if(e!==t){ne=e;var i=ie&&ie.enabled()||!ie;return ie=new l(e,me,"memory"===n.history),i||ie.disable(),M}return ne},purge:function(){return ie.clear(),M},history:function(){return ie},delete:function(e,t){var n;return 0===e?M:(e<0?fe>0&&(n=de.slice(0,fe).slice(e),de=de.slice(0,fe+e)+de.slice(fe,de.length),t||M.position(fe+e),j()):""!==de&&fe<de.length&&(n=de.slice(fe).slice(0,e),de=de.slice(0,fe)+de.slice(fe+e,de.length),j()),_e(),b(),n)},set:function(e,n){return e!==t&&(de=e,n||M.position(de.length),_e(),b(),j()),M},keymap:function(t){return void 0===t?oe:(oe=e.extend({},ve,e.omap(t||{},function(e,t){return function(n){return t(n,ve[e])}})),M)},insert:function(e,t){return fe===de.length?de+=e:de=0===fe?e+de:de.slice(0,fe)+e+de.slice(fe),t?b():M.position(e.length,!0),_e(),j(),b(),M},get:function(){return de},commands:function(e){return e?(n.commands=e,M):e},destroy:function(){return De.unbind("keypress.cmd",P),De.unbind("keydown.cmd",B),De.unbind("input.cmd",q),M.stopTime("blink",_),M.find(".cursor").next().remove().end().prev().remove().end().remove(),M.find(".prompt, .clipboard").remove(),M.removeClass("cmd").removeData("cmd").off(".cmd"),M},prompt:function(e){if(e===t)return ee;if("string"!=typeof e&&"function"!=typeof e)throw new Error("prompt must be a function or string");return ee=e,we(),_e(),M},kill_text:function(){return pe},position:function(t,i){return"number"==typeof t?(i?fe+=t:fe=t<0?0:t>de.length?de.length:t,he=D(fe),e.isFunction(n.onPositionChange)&&n.onPositionChange(fe),_e(),b(!0),M):fe},display_position:function(n,i){if(n===t)return he;var r=C(de),o=e.terminal.length(r),a=e.terminal.length(de);if(o===a)return M.position(n);var s;s=i?he+n:n>o?o:n;for(var c=0;c<a;++c)if(s===D(c))return M.position(c)},visible:function(){var e=M.visible;return function(){e.apply(M,[]),_e(),we()}}(),show:function(){var e=M.show;return function(){e.apply(M,[]),_e(),we()}}(),resize:function(e){return e?K=e:T(),_e(),we(),M},enable:function(){if(!te){te=!0,M.addClass("enabled");try{W.caret(fe)}catch(e){}re(!0),we()}return y(),M},isenabled:function(){return te},disable:function(e){return te=!1,M.removeClass("enabled"),re(!1),e||y(),M},mask:function(e){return void 0===e?le:(le=e,_e(),M)}}),M.name(n.name||n.prompt||""),ee="string"==typeof n.prompt?n.prompt:"> ",we(),n.enabled!==t&&!0!==n.enabled||M.enable(),n.history||ie.disable();var xe,Se=!0,Te=!1,ke=!1,Ce=!1,Ae=!1,Ee=!1,Ie=!0,Re=!1,$e=!1,Ne="",De=e(document.documentElement||window);return M.keymap(n.keymap||{}),De.bind("keypress.cmd",P).bind("keydown.cmd",B).bind("input.cmd",q),function(){var t=!1,r=0;M.on("mousedown.cmd",function(){t=!0}).on("mouseup.cmd",function(o){if(""===X()){var a="click_"+z;if(1==++r){var s=t;te?M.oneTime(n.clickTimeout,a,function(){!e(o.target).is(".prompt")&&s&&te&&(e(o.target).is(".cmd")?M.position(de.length):M.display_position(i(o))),r=0}):r=0}else M.stopTime(a),r=0}t=!1})}(),M.data("cmd",M),"KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype||setTimeout(function(){throw new Error("key event property not supported try https://github.com/cvan/keyboardevent-key-polyfill")},0),M};var I=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,R=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,$=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?)/i,N=/\[\[([!gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?/gi,D=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?/gi,O=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]/gi,j=/^\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]$/gi,B=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i,P=/(\bhttps?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\][)])+\b)/gi,L=/\b(https?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\][)])+)\b(?![^[\]]*])/gi,F=/((?:@?([a-zA-Z0-9_]+)@((?:[A-Za-z0-9][A-Za-z0-9\-]{0,61}[A-Za-z0-9]?\.)+[A-Za-z]+))|(?:@([a-zA-Z0-9_]+)))/g,q=/((?:"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|\/[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|$)|(?:\\\s|\S))+)(?=\s|$)/gi,M=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,H=/^(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,z=/\[\[[!gbiuso]*;[^;]*;[^\]]*\]?$/i,W=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,K=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimy]*)$/,U=/^(?=((?:[^"']+|"[^"\\]*(?:\\[^][^"\\]*)*"|'[^'\\]*(?:\\[^][^'\\]*)*')*))\1./,G=function(){var e=!1,n="Webkit Moz O ms Khtml".split(" "),i=document.createElement("div");if(i.style.animationName&&(e=!0),!1===e)for(var r=0;r<n.length;r++){var o=n[r]+"AnimationName";if(i.style[o]!==t){e=!0;break}}return e}(),J=-1!==navigator.userAgent.toLowerCase().indexOf("android"),V="undefined"==typeof wcwidth?function(e){return e.length}:wcwidth,Z=function(e){var t=!1;return(I.test(e)||R.test(e.substr(0,4)))&&(t=!0),t}(navigator.userAgent||navigator.vendor||window.opera),X=window.getSelection||document.getSelection?function(){var e=(window.getSelection||document.getSelection)();return e.text?e.text:e.toString()}:document.selection&&"Control"!==document.selection.type?function(){return document.selection.createRange().text}:function(){return""};e.terminal={version:"1.9.0",color_names:["transparent","currentcolor","black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],Cycle:c,History:l,Stack:u,valid_color:function(t){return!!t.match(B)||-1!==e.inArray(t.toLowerCase(),e.terminal.color_names)},unclosed_strings:function(e){return!!e.match(U)},escape_regex:function(e){if("string"==typeof e){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}},have_formatting:function(e){return"string"==typeof e&&!!e.match(O)},is_formatting:function(e){return"string"==typeof e&&!!e.match(j)},format_split:function(e){return e.split($).filter(Boolean)},iterate_formatting:function(e,n){for(var i,r,o=!1,a=!1,s=0,c=-1,u=0,l=0;l<e.length;l++){(i=e.substring(l).match(H))?(o=i[1],a=!1):o?"]"===e[l]&&(a?(o="",a=!1):a=!0):a=!0;var d=o&&a||!o,p="["===e[l]&&"["===e[l+1];(function(t){return"&nbsp;"===e.substring(t-6,t)||e.substring(t-1,t).match(/\s/)})(l)&&(d||p)&&(-1===c&&r!==l||-1!==c)&&(c=l);var f=e[l].match(/[[\]]/);if(d)if("&"===e[l]){if(i=function(t){return e.substring(t).match(/^(&[^;]+;)/)}(l)){l+=i[1].length-2;continue}++s,++u}else"]"===e[l]&&"\\"===e[l-1]?(--s,--u):f||(++s,++u);if(!f&&d){2===V(e[l])&&u++;var h=n({count:s,index:l,formatting:o,length:u,text:a,space:c});if(!1===h)break;h&&(h.count!==t&&(s=h.count),h.length!==t&&(u=h.length),h.space!==t&&(r=c,c=h.space),h.index!==t&&(l=h.index))}}},substring:function(t,n,i){if(""===e("<span>"+e.terminal.strip(t)+"</span>").text().substring(n,i))return"";var r,o,a=t.length,s="",c="";return e.terminal.iterate_formatting(t,function(e){n&&e.count===n+1&&(r=e.index,e.formatting&&(s=e.formatting)),i&&e.count===i+1&&(a=e.index,e.formatting&&(a=o+1)),i&&e.count===i&&(c=e.formatting,o=e.index)}),t=s+t.substring(r,a),c&&(t=t.replace(/(\[\[^\]]+)?\]$/,""),t+="]"),t},normalize:function(e){return e.replace(D,function(e,t,n){if(""===n)return"";var i=t.match(/;/g).length;if(i>=4){var r=t.split(/;/);return"[["+r.slice(0,4).join(";")+";"+(r.slice(4).join(";")||n)+"]"+n+"]"}return"[["+t+(i=2===i?";;":3===i?";":"")+n.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n").replace(/&nbsp;/g," ")+"]"+n+"]"})},split_equal:function(t,n,i){for(var r="",o=[],a=e.terminal.normalize(t).split(/\n/g),s=0,c=a.length;s<c;++s)if(""!==a[s]){var u,l=a[s],d=0,p=l.length;e.terminal.iterate_formatting(l,function(t){var a=t.index===p-2&&"]"===l[t.index+1],s=t.index===p-1||a;if(t.length>=n||s||t.length===n-1&&2===V(l[t.index+1])){var c=!1;if(i&&-1!==t.space){var f=e.terminal.strip(l.substring(t.space)),h=(f=e("<span>"+f+"</span>").text()).length,m=t.index+n+1;((f=f.substring(0,m)).match(/\s|&nbsp;/)||m>h)&&(c=!0)}if(i&&!a&&-1!==t.space&&t.index!==p-1&&c){u=l.substring(d,t.space);var g=t.space-1}else u=l.substring(d,t.index+1);if(i&&(u=u.replace(/^(&nbsp;|\s)+|(&nbsp;|\s)+$/g,"")),d=(g||t.index)+1,r){var y=u.match(/^[^\]]*\]/);u=r+u,y&&(r="")}a&&(u+="]",r="");var v=u.match(D);if(v){var b=v[v.length-1];"]"!==b[b.length-1]?(r=b.match(M)[1],u+="]"):u.match(z)&&(u=u.replace(z,""),r=b.match(M)[1])}return o.push(u),{index:g,length:0,space:-1}}})}else o.push("");return o},amp:function(e){return e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;)/g,"&amp;")},encode:function(t){return e.terminal.amp(t).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},nested_formatting:function(t){if(!e.terminal.have_formatting(t))return t;var n=[],i=/(\[\[(?:[^\]]|\\\])+\](?:[^\][]|\\\])*\]?)/,r=/(\[\[(?:[^\]]|\\\])+\])[\s\S]*/;return t.split(i).filter(Boolean).map(function(t){if(t.match(/^\[\[/))e.terminal.is_formatting(t)||(t+="]",n.push(t.replace(r,"$1")));else{var i=!1;t.match(/\]/)&&(i=!0),n.length&&(t=n[n.length-1]+t),i?n.pop():n.length&&(t+="]")}return t}).join("")},escape_formatting:function(t){return e.terminal.escape_brackets(t)},apply_formatters:function(t){var n=e.terminal.defaults.formatters;return e.terminal.format_split(t).map(function(t){if(e.terminal.is_formatting(t))return t;for(var i=0;i<n.length;++i)try{if("function"==typeof n[i]){var r=n[i](t);"string"==typeof r&&(t=r)}}catch(e){throw new Error("Error in formatter ["+i+"]")}return t}).join("")},format:function(t,n){var i=e.extend({},{linksNoReferrer:!1},n||{});if("string"==typeof t){var r=e.terminal.format_split(t);return(t=e.map(r,function(t){return""===t?t:e.terminal.is_formatting(t)?(t=t.replace(/\[\[[^\]]+\]/,function(e){return e.replace(/&nbsp;/g," ")})).replace(N,function(t,n,r,o,a,s,c){if(""===c)return"";c=c.replace(/\\]/g,"]");var u="";-1!==n.indexOf("b")&&(u+="font-weight:bold;");var l=[];-1!==n.indexOf("u")&&l.push("underline"),-1!==n.indexOf("s")&&l.push("line-through"),-1!==n.indexOf("o")&&l.push("overline"),l.length&&(u+="text-decoration:"+l.join(" ")+";"),-1!==n.indexOf("i")&&(u+="font-style:italic;"),e.terminal.valid_color(r)&&(u+="color:"+r+";",-1!==n.indexOf("g")&&(u+="text-shadow:0 0 5px "+r+";")),e.terminal.valid_color(o)&&(u+="background-color:"+o);var d;d=""===s?c:s.replace(/&#93;/g,"]");var p;return-1!==n.indexOf("!")?(d.match(P)?(p='<a target="_blank" href="'+d+'"',i.linksNoReferrer?p+=' rel="noreferrer noopener"':p+=' rel="noopener"'):p='<a class="a_acct" name="a_acct"',p+=' tabindex="1000"'):p="<span",""!==u&&(p+=' style="'+u+'"'),""!==a&&(p+=' class="'+a+'"'),-1!==n.indexOf("!")?p+=">"+c+"</a>":p+=' data-text="'+d.replace('"',"&quote;")+'">'+c+"</span>",p}):"<span>"+t.replace(/\\\]/g,"]")+"</span>"}).join("")).replace(/<span><br\s*\/?><\/span>/gi,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},length:function(e){return d(e).length},columns:function(e,t,n){function i(t){var n=new Array(o-e[t].length).join(" ");a.push(e[t]+(t%s==0?"":n))}var r=e.map(function(e){return e.length}),o=Math.max.apply(null,r)+n;void 0===n&&(n=4);var a,s=Math.floor(t/o),c=[];if(s<2)return e.join("\n");for(var u=0;u<e.length;++u)u%s==0?(a&&(i(u),c.push(a.join(""))),a=[]):i(u);return c.join("\n")},strip:function(e){return(e=e.replace(N,"$6")).replace(/(\\?)([[\]])/g,function(e,t){return t?e:""})},active:function(){return se.front()},last_id:function(){var e=se.length();if(e)return e-1},parse_argument:function(e,t){function n(e){if(e.match(/^['"]/)){var t=e[0],n=new RegExp("((^|[^\\\\])(?:\\\\\\\\)*)"+t,"g");e=e.replace(n,"$1")}return JSON.parse('"'+e+'"')}if(!1===t)return"'"===e[0]&&"'"===e[e.length-1]?e.replace(/^'|'$/g,""):'"'===e[0]&&'"'===e[e.length-1]?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e.match(/\/.*\/[gimy]*$/)?e:e.match(/['"]]/)?n(e):e.replace(/\\ /g," ");var i=e.match(K);return i?new RegExp(i[1],i[2]):e.match(/['"]/)?n(e):e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(W)?parseFloat(e):e.replace(/\\(['"() ])/g,"$1")},parse_arguments:function(t){return e.map(t.match(q)||[],e.terminal.parse_argument)},split_arguments:function(t){return e.map(t.match(q)||[],function(t){return e.terminal.parse_argument(t,!1)})},parse_command:function(t){return p(t,e.terminal.parse_argument)},split_command:function(t){return p(t,function(t){return e.terminal.parse_argument(t,!1)})},extended_command:function(e,t){try{ue=!1,e.exec(t,!0).done(function(){ue=!0})}catch(e){}},formatter:new function(){try{this[Symbol.split]=function(t){return e.terminal.format_split(t)},this[Symbol.match]=function(e){return e.match(D)},this[Symbol.replace]=function(e,t){return e.replace(N,t)},this[Symbol.search]=function(e){return e.search(D)}}catch(e){}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")},e.fn.scroll_element=function(){var t=e.fn.scroll_element.defaults;return this.map(function(){if(e(this).is("body")){var n=e("html"),i=e("body"),r=i.scrollTop()||n.scrollTop(),o=e("<pre/>").css(t.pre).appendTo("body");o.html(new Array(t.lines).join("\n")),e("body,html").scrollTop(10);var a;return 10===i.scrollTop()?(i.scrollTop(r),a=i[0]):10===n.scrollTop()&&(n.scrollTop(r),a=n[0]),o.remove(),a}return this})},e.fn.scroll_element.defaults={lines:2e3,pre:{"font-size":"100px","white-space":"pre"}};var Y={};e.jrpc=function(t,n,i,r,o){function a(t){return e.isNumeric(t.id)&&(void 0!==t.result||void 0!==t.error)}var s;s=e.isPlainObject(t)?t:{url:t,method:n,params:i,success:r,error:o},Y[s.url]=Y[s.url]||0;var c={jsonrpc:"2.0",method:s.method,params:s.params,id:++Y[s.url]};return e.ajax({url:s.url,beforeSend:function(t,n){e.isFunction(s.request)&&s.request(t,c),n.data=JSON.stringify(c)},success:function(t,n,i){i.getResponseHeader("Content-Type").match(/(application|text)\/json/)||h("Response Content-Type is neither application/json nor text/json");var r;try{r=JSON.parse(t)}catch(e){if(!s.error)throw new Error("Invalid JSON");return void s.error(i,"Invalid JSON",e)}if(e.isFunction(s.response)&&s.response(i,r),a(r)||"system.describe"===s.method)s.success(r,n,i);else{if(!s.error)throw new Error("Invalid JSON-RPC");s.error(i,"Invalid JSON-RPC")}},error:s.error,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"})};var Q=!e.terminal.version.match(/^\{\{/),ee="Copyright (c) 2011-2017 Jakub Jankiewicz <http://jcubic.pl/me>",te=Q?" v. "+e.terminal.version:" ",ne=new RegExp(" {"+te.length+"}$"),ie="jQuery Terminal Emulator"+(Q?te:""),re=[["jQuery Terminal","(c) 2011-2017 jcubic"],[ie,ee.replace(/^Copyright | *<.*>/g,"")],[ie,ee.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/_/_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(ne," ")+te,ee],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(ne,"")+te,ee]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,maskChar:"*",wrap:!0,checkArity:!0,raw:!1,exceptionHandler:null,pauseEvents:!0,softPause:!1,memory:!1,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,processRPCResponse:null,completionEscape:!0,convertLinks:!0,extra:{},tabs:4,historySize:60,historyState:!1,importHistory:!1,historyFilter:null,echoCommand:!0,scrollOnEcho:!0,login:null,outputLimit:-1,formatters:[e.terminal.nested_formatting],onAjaxError:null,pasteImage:!0,scrollBottomOffset:20,wordAutocomplete:!0,caseSensitiveAutocomplete:!0,clickTimeout:200,request:e.noop,response:e.noop,describe:"procs",onRPCError:null,completion:!1,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,onPush:e.noop,onPop:e.noop,keypress:e.noop,keydown:e.noop,onAfterRedraw:e.noop,onEchoCommand:e.noop,onFlush:e.noop,strings:{comletionParameters:"From version 1.0.0 completion function need to have two arguments",wrongPasswordTryAgain:"Wrong password try again!",wrongPassword:"Wrong password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function '%s' expects %s got %s!",commandNotFound:"Command '%s' Not Found!",oneRPCWithIgnore:"You can use only one rpc with describe == false or rpc without system.describe",oneInterpreterFunction:"You can't use more than one function (rpc without system.describe or with option describe == false counts as one)",loginFunctionMissing:"You didn't specify a login function",noTokenError:"Access denied (no token)",serverResponse:"Server responded",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can't call `%s' function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can't exit from main interpreter",invalidCompletion:"Invalid completion",invalidSelector:'Sorry, but terminal said that "%s" is not valid selector!',invalidTerminalId:"Invalid Terminal ID",login:"login",password:"password",recursiveCall:"Recursive call detected, skip",notAString:"%s function: argument is not a string",redrawError:"Internal error, wrong position in cmd redraw",invalidStrings:"Command %s have unclosed strings"}};var oe,ae=[],se=new c,ce=[],ue=!1,le=!0,de=!0;e.fn.terminal=function(i,r){function o(t){if(e.terminal.unclosed_strings(t)){var n=e.terminal.escape_brackets(t);throw new Error(sprintf(te().invalidStrings,"`"+n+"`"))}return e.isFunction(ze.processArguments)?p(t,ze.processArguments):ze.processArguments?e.terminal.parse_command(t):e.terminal.split_command(t)}function a(t){"string"==typeof t?ye.echo(t):t instanceof Array?ye.echo(e.map(t,function(e){return JSON.stringify(e)}).join(" ")):"object"==typeof t?ye.echo(JSON.stringify(t)):ye.echo(t)}function c(t){var n=/(.*):([0-9]+):([0-9]+)$/,i=t.match(n);i&&(ye.pause(ze.softPause),e.get(i[1],function(t){var n=location.href.replace(/[^/]+$/,""),r=i[1].replace(n,"");ye.echo("[[b;white;]"+r+"]");var o=t.split("\n"),a=+i[2]-1;ye.echo(o.slice(a-2,a+3).map(function(t,n){return 2===n&&(t="[[;#f00;]"+e.terminal.escape_brackets(t)+"]"),"["+(a+n)+"]: "+t}).join("\n")).resume()},"text"))}function l(t){if(e.isFunction(ze.onRPCError))ze.onRPCError.call(ye,t);else if(ye.error("&#91;RPC&#93; "+t.message),t.error&&t.error.message){var n="\t"+(t=t.error).message;t.file&&(n+=' in file "'+t.file.replace(/.*\//,"")+'"'),t.at&&(n+=" at line "+t.at),ye.error(n)}}function d(t,n){var i=function(n,i){ye.pause(ze.softPause),e.jrpc({url:t,method:n,params:i,request:function(e,t){try{ze.request.call(ye,e,t,ye)}catch(e){k(e,"USER")}},response:function(e,t){try{ze.response.call(ye,e,t,ye)}catch(e){k(e,"USER")}},success:function(t){t.error?l(t.error):e.isFunction(ze.processRPCResponse)?ze.processRPCResponse.call(ye,t.result,ye):a(t.result),ye.resume()},error:h})};return function(e,t){if(""!==e){try{e=o(e)}catch(e){return void k(e,"TERMINAL (get_processed_command)")}if(n&&"help"!==e.name){var r=t.token();r?i(e.name,[r].concat(e.args)):t.error("&#91;AUTH&#93; "+te().noTokenError)}else i(e.name,e.args)}}}function f(n,i,r,a){return function(s,c){if(""!==s){var u;try{u=o(s)}catch(t){return void(e.isFunction(ze.exception)?ze.exception(t,ye):ye.error(t.toString()))}var l=n[u.name],d=e.type(l);if("function"===d){if(!i||l.length===u.args.length)return l.apply(ye,u.args);ye.error("&#91;Arity&#93; "+sprintf(te().wrongArity,u.name,l.length,u.args.length))}else if("object"===d||"string"===d){var p=[];"object"===d&&(p=Object.keys(l),l=f(l,i,r)),c.push(l,{prompt:u.name+"> ",name:u.name,completion:"object"===d?p:t})}else e.isFunction(a)?a(s,ye):e.isFunction(ze.onCommandNotFound)?ze.onCommandNotFound.call(ye,s,ye):c.error(sprintf(te().commandNotFound,u.name))}}}function h(t,n,i){ye.resume(),e.isFunction(ze.onAjaxError)?ze.onAjaxError.call(ye,t,n,i):"abort"!==n&&ye.error("&#91;AJAX&#93; "+n+" - "+te().serverResponse+":\n"+e.terminal.escape_brackets(t.responseText))}function v(t,n,i){function r(t){t.error?l(t.error):e.isFunction(ze.processRPCResponse)?ze.processRPCResponse.call(ye,t.result,ye):a(t.result),ye.resume()}function o(e,t){try{ze.request.call(ye,e,t,ye)}catch(e){k(e,"USER")}}function s(e,t){try{ze.response.call(ye,e,t,ye)}catch(e){k(e,"USER")}}return e.jrpc({url:t,method:"system.describe",params:[],success:function(a){var c=a;if(""!==ze.describe&&ze.describe.split(".").forEach(function(e){c=c[e]}),c&&c.length){var u={};e.each(c,function(i,a){u[a.name]=function(){var i=n&&"help"!==a.name,c=Array.prototype.slice.call(arguments),u=c.length+(i?1:0);if(ze.checkArity&&a.params&&a.params.length!==u)ye.error("&#91;Arity&#93; "+sprintf(te().wrongArity,a.name,a.params.length,u));else{if(ye.pause(ze.softPause),i){var l=ye.token(!0);l?c=[l].concat(c):ye.error("&#91;AUTH&#93; "+te().noTokenError)}e.jrpc({url:t,method:a.name,params:c,request:o,response:s,success:r,error:h})}}}),u.help=u.help||function(t){if(void 0===t){var n=a.procs.map(function(e){return e.name}).join(", ")+", help";ye.echo("Available commands: "+n)}else{var i=!1;if(e.each(c,function(e,n){if(n.name===t){i=!0;var r="";return r+="[[bu;#fff;]"+n.name+"]",n.params&&(r+=" "+n.params.join(" ")),n.help&&(r+="\n"+n.help),ye.echo(r),!1}}),!i)if("help"===t)ye.echo("[[bu;#fff;]help] [method]\ndisplay help for the method or list of methods if not specified");else{var r="Method `"+t+"' not found ";ye.error(r)}}},i(u)}else i(null)},request:o,response:s,error:function(){i(null)}})}function b(t,n,i){i=i||e.noop;var r,o,a=e.type(t),s={},c=0;if("array"===a)r={},function t(i,a){if(i.length){var s=i[0],u=i.slice(1),l=e.type(s);"string"===l?(ye.pause(ze.softPause),!1===ze.describe?(1==++c?o=d(s,n):ye.error(te().oneRPCWithIgnore),t(u,a)):v(s,n,function(i){i?e.extend(r,i):1==++c?o=d(s,n):ye.error(te().oneRPCWithIgnore),ye.resume(),t(u,a)})):"function"===l?(o?ye.error(te().oneInterpreterFunction):o=s,t(u,a)):"object"===l&&(e.extend(r,s),t(u,a))}else a()}(t,function(){i({interpreter:f(r,!1,n,o.bind(ye)),completion:Object.keys(r)})});else if("string"===a)ze.ignoreSystemDescribe?(r={interpreter:d(t,n)},e.isArray(ze.completion)&&(r.completion=ze.completion),i(r)):(ye.pause(ze.softPause),v(t,n,function(e){e?(s.interpreter=f(e,!1,n),s.completion=Object.keys(e)):s.interpreter=d(t,n),i(s),ye.resume()}));else if("object"===a)i({interpreter:f(t,ze.checkArity),completion:Object.keys(t)});else{if("undefined"===a)t=e.noop;else if("function"!==a)throw new Error(a+" is invalid interpreter value");i({interpreter:t,completion:ze.completion})}}function x(t,n){var i="boolean"===e.type(n)?"login":n;return function(n,r,o){ye.pause(ze.softPause),e.jrpc({url:t,method:i,params:[n,r],request:function(e,t){try{ze.request.call(ye,e,t,ye)}catch(e){k(e,"USER")}},response:function(e,t){try{ze.response.call(ye,e,t,ye)}catch(e){k(e,"USER")}},success:function(e){o(!e.error&&e.result?e.result:null),ye.resume()},error:h})}}function S(e){return"string"==typeof e?e:"string"==typeof e.fileName?e.fileName+": "+e.message:e.message}function k(t,n){e.isFunction(ze.exceptionHandler)?ze.exceptionHandler.call(ye,t,n):ye.exception(t,n)}function C(){var e;e=ve.prop?ve.prop("scrollHeight"):ve.attr("scrollHeight"),ve.scrollTop(e)}function A(t,n){try{if(e.isFunction(n))n.call(ye,e.noop,ye);else if("string"!=typeof n)throw t+" must be string or function"}catch(e){return k(e,t.toUpperCase()),!1}return!0}function E(n,i){var r,o;if(pe.push(fe),!i.raw&&(V(n)>we||n.match(/\n/))&&(!0===ze.wrap&&i.wrap===t||!1===ze.wrap&&!0===i.wrap)){var a=i.keepWords,s=e.terminal.split_equal(n,we,a);for(r=0,o=s.length;r<o;++r)""===s[r]||"\r"===s[r]?pe.push("<span></span>"):i.raw?pe.push(s[r]):pe.push(e.terminal.format(s[r],{linksNoReferrer:ze.linksNoReferrer}))}else i.raw?pe.push(n):(n=e.terminal.normalize(n),(n=e.terminal.format(n,{linksNoReferrer:ze.linksNoReferrer})).split(/\n/).forEach(function(e){pe.push(e)}));pe.push(i.finalize)}function I(t,n){try{var i,r=e.extend({exec:!0,raw:!1,finalize:e.noop},n||{}),o="function"===e.type(t)?t():t;if("string"!==e.type(o))if(e.isFunction(ze.parseObject)){var a=ze.parseObject(o);"string"===e.type(a)&&(i=a)}else i=o instanceof Array?e.terminal.columns(o,ye.cols(),ze.tabs):String(o);else i=o;if(""!==i){if(ze.convertLinks&&!n.raw&&(i.match(L)?i=i.replace(L,"[[!;;]$1]"):i.match(F)&&(i=i.replace(F,"[[!;;]$1]"))),!n.raw){if(n.formatters)try{i=e.terminal.apply_formatters(i)}catch(e){k(e,"FORMATTING")}i=e.terminal.encode(i)}E(i,r)}}catch(t){pe=[],e.isFunction(ze.exceptionHandler)?ze.exceptionHandler.call(ye,t,"TERMINAL"):alert("[Internal Exception(process_line)]:"+S(t)+"\n"+t.stack)}}function R(){Ae.resize(we);var t=_e.empty().detach(),n=[];if(ze.outputLimit>=0){var i;i=0===ze.outputLimit?ye.rows():ze.outputLimit,Ne.forEach(function(t){var i="function"===e.type(t[0])?t[0]():t[0];if(i="string"===e.type(i)?i:String(i),V(i)>we){var r=t[1],o=e.terminal.split_equal(i,we,r.keepWords);n=n.concat(o.map(function(e){return[e,r]}))}else n.push(t)}),n=n.slice(n.length-i-1)}else n=Ne;try{pe=[],e.each(n,function(e,t){I.apply(null,t)}),Ae.before(t),ye.flush(),ze.onAfterRedraw.call(ye)}catch(t){e.isFunction(ze.exceptionHandler)?ze.exceptionHandler.call(ye,t,"TERMINAL (redraw)"):alert("Exception in redraw\n"+t.stack)}}function $(){if(ze.greetings===t)ye.echo(ye.signature,{finalize:s});else if(ze.greetings){var e=typeof ze.greetings;"string"===e?ye.echo(ze.greetings):"function"===e?ze.greetings.call(ye,ye.echo):ye.error(te().wrongGreetings)}}function N(t){void 0===t&&(t=ye.get_command());var n=Ae.prompt(),i=Ae.mask();switch(typeof i){case"string":t=t.replace(/./g,i);break;case"boolean":t=i?t.replace(/./g,ze.maskChar):e.terminal.escape_formatting(t)}var r={finalize:function(e){s(e.addClass("command")),ze.onEchoCommand.call(ye,e)}};if(e.isFunction(n)){var o=n(function(e){ye.echo(e+t,r)});o&&o.then&&o.then(function(e){"string"==typeof e&&ye.echo(e+t,r)})}else ye.echo(n+t,r)}function D(e){var t=se.get()[e[0]];if(!t)throw new Error(te().invalidTerminalId);var n=e[1];if(ce[n])t.import_view(ce[n]);else{ue=!1;var i=e[2];i&&t.exec(i).done(function(){ue=!0,ce[n]=t.export_view()})}}function O(){ue&&(le=!1,location.hash="#"+JSON.stringify(oe),setTimeout(function(){le=!0},100))}function j(n,i,r){function o(){r||(ue=!0,ze.historyState&&ye.save_state(n,!1),ue=l),u.resolve(),e.isFunction(ze.onAfterCommand)&&ze.onAfterCommand.call(ye,ye,n)}function s(e){void 0!==e&&a(e),o(),ye.resume()}he&&(he=!1,(ze.historyState||ze.execHash&&r)&&(ce.length?ye.save_state(null):ye.save_state()));try{if(e.isFunction(ze.onBeforeCommand)&&!1===ze.onBeforeCommand.call(ye,ye,n))return;r||(be=e.terminal.split_command(n)),K()||r&&(e.isFunction(ze.historyFilter)&&ze.historyFilter(n)||n.match(ze.historyFilter))&&Ae.history().append(n);var c=Ce.top();!i&&ze.echoCommand&&N(n);var u=new e.Deferred,l=ue;if(n.match(/^\s*login\s*$/)&&ye.token(!0))ye.level()>1?ye.logout(!0):ye.logout(),o();else if(ze.exit&&n.match(/^\s*exit\s*$/)&&!qe){var d=ye.level();(1===d&&ye.get_token()||d>1)&&(ye.get_token(!0)&&ye.set_token(t,!0),ye.pop()),o()}else if(ze.clear&&n.match(/^\s*clear\s*$/)&&!qe)ye.clear(),o();else{var p=c.interpreter.call(ye,n,ye);if(p!==t){if(ye.pause(ze.softPause),!p.then)return e.when(p).done(s);p.then(s)}else Ge?me.push(function(){o()}):o()}return u.promise()}catch(e){if(k(e,"USER"),ye.resume(),!ze.exceptionHandler)throw e}}function B(){if(e.isFunction(ze.onBeforeLogout))try{if(!1===ze.onBeforeLogout.call(ye,ye))return}catch(e){k(e,"onBeforeLogout")}if(q(),e.isFunction(ze.onAfterLogout))try{ze.onAfterLogout.call(ye,ye)}catch(e){k(e,"onAfterlogout")}ye.login(ze.login,!0,W)}function q(){var e=ye.prefix_name(!0)+"_";We.remove(e+"token"),We.remove(e+"login")}function M(t){var n=ye.prefix_name()+"_interpreters",i=We.get(n);i=i?JSON.parse(i):[],-1===e.inArray(t,i)&&(i.push(t),We.set(n,JSON.stringify(i)))}function H(t){var n=Ce.top(),i=ye.prefix_name(!0);K()||M(i),Ae.name(i),e.isFunction(n.prompt)?Ae.prompt(function(e){var t=n.prompt.call(ye,e,ye);t&&t.then&&t.then(function(t){"string"==typeof t&&e(t)})}):Ae.prompt(n.prompt),e.isPlainObject(n.keymap)&&Ae.keymap(e.omap(n.keymap,function(e,t){return function(){var e=[].slice.call(arguments);try{return t.apply(ye,e)}catch(e){if(k(e,"USER KEYMAP"),!ze.exceptionHandler)throw e}}})),Ae.set(""),Be.resolve(),!t&&e.isFunction(n.onStart)&&n.onStart.call(ye,ye)}function z(){if(le&&ze.execHash)try{if(location.hash){var e=location.hash.replace(/^#/,"");oe=JSON.parse(decodeURIComponent(e))}else oe=[];oe.length?D(oe[oe.length-1]):ce[0]&&ye.import_view(ce[0])}catch(e){k(e,"TERMINAL")}}function W(){H(),$(),Ne.length&&R();var t=!1;if(e.isFunction(ze.onInit)){Me=function(){t=!0};try{ze.onInit.call(ye,ye)}catch(e){k(e,"OnInit")}finally{Me=e.noop,!t&&ye.enabled()&&ye.resume()}}de&&(de=!1,e(window).on("hashchange",z))}function K(){return qe||!1!==Ae.mask()}function U(e,t,n){if(!t.length)return"";for(var i=_(e),r=[],o=e.length;o<t[0].length;++o){for(var a=!1,s=t[0].charAt(o),c=s.toLowerCase(),u=1;u<t.length;++u){a=!0;var l=t[u].charAt(o),d=l.toLowerCase();if(s!==l){if(n||"mixed"===i){a=!1;break}if(c!==d){a=!1;break}if("lower"===i)s=s.toLowerCase();else{if("upper"!==i){a=!1;break}s=s.toUpperCase()}}}a&&r.push(s)}return e+r.join("")}function G(e){se.forEach(function(t){t.settings().onTerminalChange.call(e,e)})}function Y(n){var i,r=Ce.top();if(e.isFunction(r.keydown)){if((i=r.keydown.call(ye,n,ye))!==t)return i}else if(e.isFunction(ze.keydown)&&(i=ze.keydown.call(ye,n,ye))!==t)return i}function Q(n){var i,r;if(ye.enabled()){if(ye.paused()){if(!ze.pauseEvents&&(i=Y(n))!==t)return i;if(68===n.which&&n.ctrlKey){if(ze.pauseEvents&&(i=Y(n))!==t)return i;if(ae.length){for(r=ae.length;r--;){var o=ae[r];if(4!==o.readyState)try{o.abort()}catch(t){e.isFunction(ze.exceptionHandler)?ze.exceptionHandler.call(ye,n,"AJAX ABORT"):ye.error(te().ajaxAbortError)}}ae=[]}ye.resume()}return!1}if((i=Y(n))!==t)return i;9!==n.which&&($e=0),ye.attr({scrollTop:ye.attr("scrollHeight")})}}function ee(e){return function(t){e.add(t)}}function te(){return e.extend({},e.terminal.defaults.strings,ze&&ze.strings||{})}function ne(){}function ie(){Ee=Ke,ye.disable().find("textarea").trigger("blur",[!0])}var pe=[],fe=1,he=!0,me=[],ge={"CTRL+D":function(e,n){return qe||(""===Ae.get()?Ce.size()>1||ze.login!==t?ye.pop(""):(ye.resume(),ye.echo("")):n()),!1},"CTRL+C":function(){""===X()&&(N(ye.get_command()+"^C"),ye.set_command(""))},"CTRL+L":function(){ye.clear()},TAB:function(n,i){var r,o,a=Ce.top();if(o=void 0!==a.caseSensitiveAutocomplete?a.caseSensitiveAutocomplete:ze.caseSensitiveAutocomplete,"settings"===(r=ze.completion&&"boolean"!==e.type(ze.completion)&&a.completion===t?ze.completion:a.completion)&&(r=ze.completion),r)switch(e.type(r)){case"function":var s=ye.before_cursor(ze.wordAutocomplete);if(3===r.length)return k(new Error(te().comletionParameters),"USER"),!1;r.call(ye,s,function(e){ye.complete(e,{echo:!0,word:ze.wordAutocomplete,escape:ze.completionEscape,caseSensitive:o})});break;case"array":ye.complete(r,{echo:!0,word:ze.wordAutocomplete,escape:ze.completionEscape,caseSensitive:o});break;default:throw new Error(te().invalidCompletion)}else i();return!1},"CTRL+V":function(e,t){return t(e),ye.oneTime(200,function(){C()}),!0},"CTRL+TAB":function(){if(se.length()>1)return ye.focus(!1),!1},PAGEDOWN:function(){ye.scroll(ye.height())},PAGEUP:function(){ye.scroll(-ye.height())}},ye=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),i,e.extend({name:ye.selector},r))});if(ye.data("terminal"))return ye.data("terminal");if(0===ye.length)throw new Error(sprintf(te().invalidSelector,ye.selector));var ve,be,_e,we,xe,Se,Te,ke,Ce,Ae,Ee,Ie,Re,$e=0,Ne=[],De=se.length(),Oe=new u,je=new n,Be=new n,Pe=ee(Be),Le=m(),Fe=ee(je),qe=!1,Me=e.noop,He=[],ze=e.extend({},e.terminal.defaults,{name:ye.selector},r||{}),We=new function(t){t&&(this.storage={}),this.set=function(n,i){t?this.storage[n]=i:e.Storage.set(n,i)},this.get=function(n){return t?this.storage[n]:e.Storage.get(n)},this.remove=function(n){t?delete this.storage[n]:e.Storage.remove(n)}}(ze.memory),Ke=ze.enabled,Ue=!1,Ge=!1,Je=!0;e.extend(ye,e.omap({id:function(){return De},clear:function(){_e.html(""),Ne=[];try{ze.onClear.call(ye,ye)}catch(e){k(e,"onClear")}return ye.attr({scrollTop:0}),ye},export_view:function(){var t={};if(e.isFunction(ze.onExport))try{t=ze.onExport.call(ye)}catch(e){k(e,"onExport")}return e.extend({},{focus:Ke,mask:Ae.mask(),prompt:ye.get_prompt(),command:ye.get_command(),position:Ae.position(),lines:T(Ne),interpreters:Ce.clone(),history:Ae.history().data},t)},import_view:function(t){if(qe)throw new Error(sprintf(te().notWhileLogin,"import_view"));if(e.isFunction(ze.onImport))try{ze.onImport.call(ye,t)}catch(e){k(e,"onImport")}return Pe(function(){ye.set_prompt(t.prompt),ye.set_command(t.command),Ae.position(t.position),Ae.mask(t.mask),t.focus&&ye.focus(),Ne=T(t.lines),Ce=t.interpreters,ze.importHistory&&Ae.history().set(t.history),R()}),ye},save_state:function(n,i,r){if(void 0!==r?ce[r]=ye.export_view():ce.push(ye.export_view()),e.isArray(oe)||(oe=[]),n!==t&&!i){var o=[De,ce.length-1,n];oe.push(o),O()}},exec:function(t,n,i){var r=i||new e.Deferred;return Fe(function(){e.isArray(t)?function e(){var i=t.shift();i?ye.exec(i,n).done(e):r.resolve()}():Ge?He.push([t,n,r]):j(t,n,!0).done(function(){r.resolve(ye)})}),r.promise()},autologin:function(e,t,n){return ye.trigger("terminal.autologin",[e,t,n]),ye},login:function(n,i,r,o){function a(n,a,c){if(a){for(;ye.level()>s;)ye.pop(t,!0);ze.history&&Ae.history().enable();var u=ye.prefix_name(!0)+"_";We.set(u+"token",a),We.set(u+"login",n),qe=!1,e.isFunction(r)&&r()}else i?(c||ye.error(te().wrongPasswordTryAgain),ye.pop(t,!0).set_mask(!1)):(qe=!1,c||ye.error(te().wrongPassword),ye.pop(t,!0).pop(t,!0)),e.isFunction(o)&&o();ye.off("terminal.autologin")}if(Oe.push([].slice.call(arguments)),qe)throw new Error(sprintf(te().notWhileLogin,"login"));if(!e.isFunction(n))throw new Error(te().loginIsNotAFunction);if(qe=!0,ye.token()&&1===ye.level()&&!Je)qe=!1,ye.logout(!0);else if(ye.token(!0)&&ye.login_name(!0))return qe=!1,e.isFunction(r)&&r(),ye;ze.history&&Ae.history().disable();var s=ye.level();return ye.on("terminal.autologin",function(e,t,n,i){a(t,n,i)}),ye.push(function(e){ye.set_mask(ze.maskChar).push(function(t){try{n.call(ye,e,t,function(t,n){a(e,t,n)})}catch(e){k(e,"AUTH")}},{prompt:te().password+": ",name:"password"})},{prompt:te().login+": ",name:"login"}),ye},settings:function(){return ze},before_cursor:function(e){var t,n=Ae.position(),i=Ae.get().substring(0,n),r=i.split(" ");if(e)if(1===r.length)t=r[0];else{var o=i.match(/(\\?")/g),a=o?o.filter(function(e){return!e.match(/^\\/)}).length:0;if(((o=i.match(/'/g))?o.length:0)%2==1)t=i.match(/('[^']*)$/)[0];else if(a%2==1)t=i.match(/("(?:[^"]|\\")*)$/)[0];else for(t=r[r.length-1],Xe=r.length-1;Xe>0;Xe--){var s=r[Xe-1];if("\\"!==s[s.length-1])break;t=r[Xe-1]+" "+t}}else t=i;return t},complete:function(t,n){function i(e,t){var n=ye.get_command(),i=ye.get_position(),r=new RegExp("^"+e,"i"),o=n.substring(0,i),s=n.substring(i),c=t.replace(r,"")+(a||"");ye.set_command(o+c+s),ye.set_position((o+c).length)}var r=(n=e.extend({word:!0,echo:!1,escape:!0,caseSensitive:!0},n||{})).caseSensitive,o=ye.before_cursor(n.word).replace(/\\"/g,'"'),a=!1;if(n.word&&(o.match(/^"/)?a='"':o.match(/^'/)&&(a="'"),a&&(o=o.replace(/^["']/,""))),t=t.slice(),ze.clear&&-1===e.inArray("clear",t)&&t.push("clear"),ze.exit&&-1===e.inArray("exit",t)&&t.push("exit"),$e%2==0)Se=ye.before_cursor(n.word);else if(ye.before_cursor(n.word)!==Se)return;var s=e.terminal.escape_regex(o);n.escape&&(s=s.replace(/(\\+)(["'() ])/g,function(e,t,n){return n.match(/[()]/)?t+"\\?\\"+n:t+"?"+n}));var c=r?"":"i",u=new RegExp("^"+s,c),l=function(){for(var e=[],i=t.length;i--;)if(u.test(t[i])){var s=t[i];'"'===a&&(s=s.replace(/"/g,'\\"')),!a&&n.escape&&(s=s.replace(/(["'() ])/g,"\\$1")),!r&&w(s)&&(o.toLowerCase()===o?s=s.toLowerCase():o.toUpperCase()===o&&(s=s.toUpperCase())),e.push(s)}return e}();if(1===l.length)return n.escape?i(s,l[0]):ye.insert(l[0].replace(u,"")+(a||"")),Se=ye.before_cursor(n.word),!0;if(l.length>1)if(++$e>=2){if($e=0,n.echo){N();var d=l.reverse().join("\t");return ye.echo(e.terminal.escape_brackets(d),{keepWords:!0}),!0}}else{var p=U(o,l,r);if(p)return i(o,p),Se=ye.before_cursor(n.word),!0}},commands:function(){return Ce.top().interpreter},set_interpreter:function(t,n){function i(){ye.pause(ze.softPause),b(t,!!n,function(t){ye.resume();var n=Ce.top();e.extend(n,t),H(!0)})}return"string"===e.type(t)&&n?ye.login(x(t,n),!0,i):i(),ye},greetings:function(){return $(),ye},paused:function(){return Ge},pause:function(t){return Fe(function(){Me(),Ge=!0,Ae.disable(t||J),t||Ae.find(".prompt").hidden(),e.isFunction(ze.onPause)&&ze.onPause.call(ye)}),ye},resume:function(){return Fe(function(){Ge=!1,Ke&&se.front()===ye&&Ae.enable(),Ae.find(".prompt").visible();var t=He;He=[];for(var n=0;n<t.length;++n)ye.exec.apply(ye,t[n]);ye.trigger("resume");var i=me.shift();i&&i(),C(),e.isFunction(ze.onResume)&&ze.onResume.call(ye)}),ye},cols:function(){return ze.numChars?ze.numChars:(void 0===we&&(we=g(ye,Le)),we)},rows:function(){return ze.numRows?ze.numRows:(void 0===xe&&(xe=y(ye,Le)),xe)},history:function(){return Ae.history()},history_state:function(e){function t(){ze.historyState=!0,ce.length?se.length()>1&&ye.save_state(null):ye.save_state()}return e?void 0===window.setImmediate?setTimeout(t,0):setImmediate(t):ze.historyState=!1,ye},clear_history_state:function(){return oe=[],ce=[],ye},next:function(){if(1===se.length())return ye;se.front().disable();var t=se.rotate().enable(),n=t.offset().top-50;e("html,body").animate({scrollTop:n},500);try{G(t)}catch(e){k(e,"onTerminalChange")}return t},focus:function(e,t){return Fe(function(){if(1===se.length())!1===e?ye.disable(t):ye.enable(t);else if(!1===e)ye.next();else{if(se.front()!==ye&&(se.forEach(function(e){e!==ye&&e.enabled()&&e.disable(t)}),!t))try{G(ye)}catch(e){k(e,"onTerminalChange")}se.set(ye)}ye.enable(t)}),ye},freeze:function(e){Pe(function(){e?(ye.disable(),Ue=!0):(Ue=!1,ye.enable())})},frozen:function(){return Ue},enable:function(e){return Ke||Ue||(we===t&&ye.resize(),Fe(function(){var n;if(!e&&!Ke)try{n=ze.onFocus.call(ye,ye)}catch(e){k(e,"onFocus")}(!e&&n===t||e)&&(Ke=!0,ye.paused()||Ae.enable())})),ye},disable:function(e){return Fe(function(){var n;if(!e&&Ke)try{n=ze.onBlur.call(ye,ye)}catch(e){k(e,"onBlur")}(!e&&n===t||e)&&(Ke=!1,Ae.disable())}),ye},enabled:function(){return Ke},signature:function(){for(var e=ye.cols(),t=re.length;t--;){var n=re[t].map(function(e){return e.length});if(Math.max.apply(null,n)<=e)return re[t].join("\n")+"\n"}return""},version:function(){return e.terminal.version},cmd:function(){return Ae},get_command:function(){return Ae.get()},set_command:function(e){return Pe(function(){Ae.set(e)}),ye},set_position:function(e,t){return Pe(function(){Ae.position(e,t)}),ye},get_position:function(){return Ae.position()},insert:function(e,t){if("string"==typeof e)return Pe(function(){var n=ye.is_bottom();Ae.insert(e,t),(ze.scrollOnEcho||n)&&C()}),ye;throw new Error(sprintf(te().notAString,"insert"))},set_prompt:function(t){return Pe(function(){A("prompt",t)&&(e.isFunction(t)?Ae.prompt(function(e){t(e,ye)}):Ae.prompt(t),Ce.top().prompt=t)}),ye},get_prompt:function(){return Ce.top().prompt},set_mask:function(e){return Pe(function(){Ae.mask(!0===e?ze.maskChar:e)}),ye},get_output:function(t){return t?Ne:e.map(Ne,function(t){return e.isFunction(t[0])?t[0]():t[0]}).join("\n")},resize:function(t,n){if(ye.is(":visible")){if(t&&n&&(ye.width(t),ye.height(n)),t=ye.width(),n=ye.height(),void 0!==ze.numChars&&void 0!==ze.numRows)return R(),void C();Le=m();var i=g(ye,Le),r=y(ye,Le);if(i!==we||r!==xe){we=i,xe=r,Ae.resize(we),ye.refresh();var o=Ce.top();e.isFunction(o.resize)?o.resize.call(ye,ye):e.isFunction(ze.onResize)&&ze.onResize.call(ye,ye),C()}}else ye.stopTime("resize"),ye.oneTime(500,"resize",function(){ye.resize(t,n)});return ye},refresh:R,flush:function(){try{var t,n=ye.is_bottom();if(e.each(pe,function(n,i){i===fe?t=e("<div></div>"):e.isFunction(i)?(t.appendTo(_e),i(t)):e("<div/>").html(i).appendTo(t).width("100%")}),ze.outputLimit>=0){var i;i=0===ze.outputLimit?ye.rows():ze.outputLimit;var r=_e.find("div div");if(r.length+1>i){var o=r.length-i+1,a=r.slice(0,o),s=a.parent();a.remove(),s.each(function(){var t=e(this);t.is(":empty")&&t.remove()})}}try{ze.onFlush.call(ye,ye)}catch(e){k(e,"onFlush")}(ze.scrollOnEcho||n)&&C(),pe=[]}catch(t){e.isFunction(ze.exceptionHandler)?ze.exceptionHandler.call(ye,t,"TERMINAL (Flush)"):alert("[Flush] "+S(t)+"\n"+t.stack)}return ye},update:function(e,t){return Pe(function(){e<0&&(e=Ne.length+e),Ne[e]?(null===t?Ne.splice(e,1):Ne[e][0]=t,R()):ye.error("Invalid line number "+e)}),ye},last_index:function(){return Ne.length-1},echo:function(t,n){function i(t){try{var i=e.extend({flush:!0,raw:ze.raw,finalize:e.noop,keepWords:!1,formatters:!0},n||{});i.raw&&function(e){i.finalize=function(t){t.addClass("raw"),e(t)}}(i.finalize),i.flush&&(pe.length&&ye.flush(),pe=[]),"function"==typeof t&&(t=t.bind(ye)),I(t,i),Ne.push([t,e.extend(i,{exec:!1})]),i.flush&&ye.flush()}catch(t){e.isFunction(ze.exceptionHandler)?ze.exceptionHandler.call(ye,t,"TERMINAL (echo)"):alert("[Terminal.echo] "+S(t)+"\n"+t.stack)}}try{n&&e.isFunction(n.finalize)&&n.finalize(e("<div/>")),e.isFunction(t.then)?e.when(t).done(i):i(t)}catch(e){k(e,"USER:echo(finalize)")}return ye},error:function(t,n){n=e.extend({},n,{raw:!1,formatters:!1});var i=e.terminal.escape_brackets(t).replace(/\\$/,"&#92;").replace(P,"]$1[[;;;error]");return ye.echo("[[;;;error]"+i+"]",n)},exception:function(t,n){var i=S(t);if(n&&(i="&#91;"+n+"&#93;: "+i),i&&ye.error(i,{finalize:function(e){e.addClass("exception message")},keepWords:!0}),"string"==typeof t.fileName&&(ye.pause(ze.softPause),e.get(t.fileName,function(e){var n=t.lineNumber-1,i=e.split("\n")[n];i&&ye.error("["+t.lineNumber+"]: "+i),ye.resume()},"text")),t.stack){var r=e.terminal.escape_brackets(t.stack);ye.echo(r.split(/\n/g).map(function(e){return"[[;;;error]"+e.replace(P,function(e){return"]"+e+"[[;;;error]"})+"]"}).join("\n"),{finalize:function(e){e.addClass("exception stack-trace")},formatters:!1})}},scroll:function(e){var t;return e=Math.round(e),ve.prop?(e>ve.prop("scrollTop")&&e>0&&ve.prop("scrollTop",0),t=ve.prop("scrollTop"),ve.scrollTop(t+e)):(e>ve.attr("scrollTop")&&e>0&&ve.attr("scrollTop",0),t=ve.attr("scrollTop"),ve.scrollTop(t+e)),ye},logout:function(e){if(qe)throw new Error(sprintf(te().notWhileLogin,"logout"));return Pe(function(){if(e){var n=Oe.pop();ye.set_token(t,!0),ye.login.apply(ye,n)}else if(1===Ce.size()&&ye.token())ye.logout(!0);else for(;Ce.size()>1;)ye.token()?ye.logout(!0).pop().pop():ye.pop()}),ye},token:function(e){return We.get(ye.prefix_name(e)+"_token")},set_token:function(e,t){var n=ye.prefix_name(t)+"_token";return void 0===e?We.remove(n,e):We.set(n,e),ye},get_token:function(e){return ye.token(e)},login_name:function(e){return We.get(ye.prefix_name(e)+"_login")},name:function(){return Ce.top().name},prefix_name:function(e){var t=(ze.name?ze.name+"_":"")+De;if(e&&Ce.size()>1){var n=Ce.map(function(e){return e.name||""}).slice(1).join("_");n&&(t+="_"+n)}return t},read:function(t,n){var i=new e.Deferred;return ye.push(function(t){ye.pop(),e.isFunction(n)&&n(t),i.resolve(t)},{prompt:t}),i.promise()},push:function(n,i){return Fe(function(){function r(){ze.onPush.call(ye,s,Ce.top(),ye),H()}i=i||{};var o={infiniteLogin:!1},a=e.extend({},o,i);!a.name&&be&&(a.name=be.name),a.prompt===t&&(a.prompt=(a.name||">")+" ");var s=Ce.top();s&&(s.mask=Ae.mask());var c=Ge;b(n,!!i.login,function(t){if(Ce.push(e.extend({},t,a)),!0===a.completion&&(e.isArray(t.completion)?Ce.top().completion=t.completion:t.completion||(Ce.top().completion=!1)),a.login){var i,o=e.type(a.login);"function"===o?(i=a.infiniteLogin?e.noop:ye.pop,ye.login(a.login,a.infiniteLogin,r,i)):("string"===e.type(n)&&"string"===o||"boolean"===o)&&(i=a.infiniteLogin?e.noop:ye.pop,ye.login(x(n,a.login),a.infiniteLogin,r,i))}else r();!c&&ye.enabled()&&ye.resume()})}),ye},pop:function(n,i){n!==t&&N(n);var r,o=ye.token(!0);if(1===Ce.size())if(r=Ce.top(),ze.login){if(i||ze.onPop.call(ye,r,null,ye),B(),e.isFunction(ze.onExit))try{ze.onExit.call(ye,ye)}catch(e){k(e,"onExit")}}else ye.error(te().canExitError);else{o&&q();var a=Ce.pop();if(r=Ce.top(),H(),i||ze.onPop.call(ye,a,r),qe&&ye.get_prompt()!==te().login+": "&&(qe=!1),e.isFunction(a.onExit))try{a.onExit.call(ye,ye)}catch(e){k(e,"onExit")}ye.set_mask(r.mask)}return ye},option:function(t,n){if(void 0===n){if("string"==typeof t)return ze[t];"object"==typeof t&&e.each(t,function(e,t){ze[e]=t})}else ze[t]=n,t.match(/^num(Chars|Rows)$/)&&R();return ye},level:function(){return Ce.size()},reset:function(){return Pe(function(){for(ye.clear();Ce.size()>1;)Ce.pop();W()}),ye},purge:function(){return Pe(function(){var t=ye.prefix_name()+"_",n=We.get(t+"interpreters");n&&e.each(JSON.parse(n),function(e,t){We.remove(t+"_commands"),We.remove(t+"_token"),We.remove(t+"_login")}),Ae.purge(),We.remove(t+"interpreters")}),ye},destroy:function(){return Pe(function(){Ae.destroy().remove(),_e.remove(),Ve.remove(),e(document).unbind(".terminal_"+ye.id()),e(window).unbind(".terminal_"+ye.id()),ye.unbind("click wheel mousewheel mousedown mouseup"),ye.removeData("terminal").removeClass("terminal").unbind(".terminal"),ze.width&&ye.css("width",""),ze.height&&ye.css("height",""),e(window).off("blur",ie).off("focus",ne),ye.find(".terminal-fill").remove(),se.remove(De),Ie&&Ie.unobserve(ye[0]),Re&&Re.disconnect(),ye.resizer("unbind"),se.length()||e(window).off("hashchange")}),ye},scroll_to_bottom:function(){return C(),ye},is_bottom:function(){if(-1===ze.scrollBottomOffset)return!1;var t,n,i;return ye.is("body")?(t=e(document).height(),n=e(window).scrollTop(),i=window.innerHeight):(t=ve[0].scrollHeight,n=ve.scrollTop(),i=ve.outerHeight()),n+i>t-ze.scrollBottomOffset}},function(e,t){return function(){try{return t.apply(ye,[].slice.apply(arguments))}catch(t){if("exec"!==e&&"resume"!==e&&k(t,"TERMINAL"),!ze.exceptionHandler)throw t}}})),!0===ze.ignoreSystemDescribe&&(ze.describe=!1),ze.width&&ye.width(ze.width),ze.height&&ye.height(ze.height),ve=ye.scroll_element(),e(document).bind("ajaxSend.terminal_"+ye.id(),function(e,t){ae.push(t)});var Ve=e('<div class="terminal-wrapper"/>').appendTo(ye);if(e('<div class="terminal-fill"/>').appendTo(ye),_e=e("<div>").addClass("terminal-output").attr("role","log").appendTo(Ve),ye.addClass("terminal"),ze.login&&e.isFunction(ze.onBeforeLogin))try{!1===ze.onBeforeLogin.call(ye,ye)&&(Je=!1)}catch(e){if(k(e,"onBeforeLogin"),!ze.exceptionHandler)throw e}var Ze;if("string"==typeof i)Ze=i;else if(i instanceof Array)for(var Xe=0,Ye=i.length;Xe<Ye;++Xe)if("string"==typeof i[Xe]){Ze=i[Xe];break}return!Ze||"string"!=typeof ze.login&&!0!==ze.login||(ze.login=x(Ze,ze.login)),se.append(ye),e(document).on("paste.terminal_"+ye.id(),function(e){function t(e,t){return-1!==e.type.indexOf(t)}if((e=e.originalEvent).clipboardData&&ye.enabled()){var n=e.clipboardData.items;if(n)for(var i=0;i<n.length;i++)if(t(n[i],"image")&&ze.pasteImage){var r=n[i].getAsFile(),o=(window.URL||window.webkitURL).createObjectURL(r);ye.echo('<img src="'+o+'"/>',{raw:!0})}else t(n[i],"text/plain")&&n[i].getAsString(ye.insert);else if(e.clipboardData.getData){var a=e.clipboardData.getData("text/plain");ye.insert(a)}return!1}}),b(i,!!ze.login,function(n){function i(t){if(t=t.originalEvent){var n=document.elementFromPoint(t.clientX,t.clientY);!e(n).closest(".terminal").length&&ye.enabled()&&ye.disable()}}function r(){if(ye.is(":visible")){var e=ye.width(),t=ye.height();ke===t&&Te===e||ye.resize(),ke=t,Te=e}}function o(){Ie&&Ie.unobserve(ye[0]);var t;(Ie=new IntersectionObserver(function(){ye.is(":visible")?(ye.resizer("unbind").resizer(r),r(),t&&ye.enabled()):(t=e.terminal.active()===ye&&ye.enabled(),ye.disable())},{root:document.body})).observe(ye[0])}function a(t){var n=se.get()[t[0]];if(n&&De===n.id()&&t[2])try{if(Ge){var i=e.Deferred();return me.push(function(){return n.exec(t[2]).done(function(){n.save_state(t[2],!0,t[1]),i.resolve()})}),i.promise()}return n.exec(t[2]).done(function(){n.save_state(t[2],!0,t[1])})}catch(t){var r=n.settings();if(e.isFunction(r.exceptionHandler))r.exceptionHandler.call(ye,t,"EXEC HASH");else{var o="Error while exec with command "+e.terminal.escape_brackets(Se);n.error(o).exception(t)}}}function s(t,n){if(!h){var i=Ce.top();if(e.isFunction(i.mousewheel)){if(!1===i.mousewheel(t,n,ye))return}else if(e.isFunction(ze.mousewheel)&&!1===ze.mousewheel(t,n,ye))return;n>0?ye.scroll(-40):ye.scroll(40)}}(ze.completion&&"boolean"!=typeof ze.completion||!ze.completion)&&(n.completion="settings");var l=e.extend({},ge,e.omap(ze.keymap||{},function(e,t){return ge[e]?function(n){return t(n,ge[e])}:t}));Ce=new u(e.extend({},ze.extra,{name:ze.name,prompt:ze.prompt,keypress:ze.keypress,keydown:ze.keydown,resize:ze.onResize,greetings:ze.greetings,mousewheel:ze.mousewheel,keymap:l},n)),Ae=e("<div/>").appendTo(Ve).cmd({prompt:ze.prompt,history:ze.memory?"memory":ze.history,historyFilter:ze.historyFilter,historySize:ze.historySize,width:"100%",enabled:!1,keydown:Q,keymap:l,clickTimeout:ze.clickTimeout,keypress:function(t){var n=Ce.top();if(Ke&&(!Ge||!ze.pauseEvents)){if(e.isFunction(n.keypress))return n.keypress.call(ye,t,ye);if(e.isFunction(ze.keypress))return ze.keypress.call(ye,t,ye)}},onCommandChange:function(t){if(e.isFunction(ze.onCommandChange))try{ze.onCommandChange.call(ye,t,ye)}catch(e){if(k(e,"onCommandChange"),!ze.exceptionHandler)throw e}C()},commands:j}),Ke&&ye.is(":visible")&&!Z?ye.focus(t,!0):ye.disable(),ye.oneTime(100,function(){e(document).bind("click.terminal_"+ye.id(),i).bind("contextmenu.terminal_"+ye.id(),i)});var d=e(window);document.addEventListener("resume",function(){ye.disable()}),Z?ye.click(function(){Ue||(ye.enabled()?ye.disable():Ae.enable())}):(d.on("focus.terminal_"+ye.id(),ne).on("blur.terminal_"+ye.id(),ie),function(){function t(){if(i.is(".terminal")||i.is(".terminal-wrapper")){var e=ye.get_command().length;ye.set_position(e)}else i.closest(".prompt").length&&ye.set_position(0);n()}function n(){r=0,i=null}var i,r=0,o="click_"+ye.id();ye.mousedown(function(t){i=e(t.target)}).mouseup(function(){if(""===X()&&i)if(1==++r){if(!Ue&&Ke){var e=ze.clickTimeout;return void ye.oneTime(e,o,t)}}else ye.stopTime(o);n()}).dblclick(function(){n(),ye.stopTime(o)})}(),function(){var e=ye.find("textarea");ye.on("mousedown.terminal",function(t){if(2===t.originalEvent.button&&""===X()){ye.enabled()||ye.enable();var n=Ae.offset();e.css({left:t.pageX-n.left-5,top:t.pageY-n.top-5})}}),ye.bind("contextmenu",function(){ye.oneTime(100,function(){e.css({left:"",top:""})})})}()),ye.delegate(".exception a","click",function(t){var n=e(this).attr("href");n.match(/:[0-9]+$/)&&(t.preventDefault(),c(n))}),ye.is(":visible")&&(we=ye.cols(),Ae.resize(we),Le||(Le=m()),xe=y(ye,Le)),je.resolve(),ze.login?ye.login(ze.login,!0,W):W(),ye.is(":visible")&&ye.resizer(r);var p=!!ye.closest("body").length,f=window.MutationObserver||window.WebKitMutationObserver;window.IntersectionObserver&&(f&&(Re=new f(function(){ye.closest("body").length?(p||(ye.scroll_to_bottom(),o()),p=!0):p&&(p=!1)})).observe(document.body,{childList:!0}),p&&o()),ze.execHash&&location.hash?setTimeout(function(){try{var e=location.hash.replace(/^#/,"");oe=JSON.parse(decodeURIComponent(e));var t=0;!function e(){var n=oe[t++];n?a(n).done(e):ue=!0}()}catch(e){}}):ue=!0;var h=!1;if(e(document).bind("keydown.terminal_"+ye.id(),function(e){e.shiftKey&&(h=!0)}).bind("keyup.terminal_"+ye.id(),function(e){(e.shiftKey||16===e.which)&&(h=!1)}),e.event.special.mousewheel)ye.on("mousewheel",function(e,t){s(e,t),e.preventDefault()});else{var g;g="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==t?"mousewheel":"DOMMouseScroll",ye.on(g,function(e){s(e,-("mousewheel"===g?-.025*e.originalEvent.wheelDelta:e.originalEvent.deltaY||e.originalEvent.detail)),e.preventDefault()})}}),ye.data("terminal",ye),ye}}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(e){function t(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function n(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function i(){var t=e.style.height,i=n(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="";var o=e.scrollHeight+s;return 0===e.scrollHeight?void(e.style.height=t):(e.style.height=o+"px",c=e.clientWidth,i.forEach(function(e){e.node.scrollTop=e.scrollTop}),void(r&&(document.documentElement.scrollTop=r)))}function r(){i();var n=Math.round(parseFloat(e.style.height)),r=window.getComputedStyle(e,null),o="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):e.offsetHeight;if(o!==n?"hidden"===r.overflowY&&(t("scroll"),i(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==r.overflowY&&(t("hidden"),i(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),u!==o){u=o;var s=a("autosize:resized");try{e.dispatchEvent(s)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var s=null,c=e.clientWidth,u=null,l=function(){e.clientWidth!==c&&r()},d=function(t){window.removeEventListener("resize",l,!1),e.removeEventListener("input",r,!1),e.removeEventListener("keyup",r,!1),e.removeEventListener("autosize:destroy",d,!1),e.removeEventListener("autosize:update",r,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",d,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",r,!1),window.addEventListener("resize",l,!1),e.addEventListener("input",r,!1),e.addEventListener("autosize:update",r,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:d,update:r}),function(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),s="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(s)&&(s=0),r()}()}}function i(e){var t=o.get(e);t&&t.destroy()}function r(e){var t=o.get(e);t&&t.update()}var o="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,i){-1===e.indexOf(n)&&(e.push(n),t.push(i))},delete:function(n){var i=e.indexOf(n);i>-1&&(e.splice(i,1),t.splice(i,1))}}}(),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(s=function(e){return e},s.destroy=function(e){return e},s.update=function(e){return e}):(s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e)}),e},s.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=s});var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=[],rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=67108864/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,function(e,t,n,i,r,o,a){function s(e){var t,i,r=this,o=e.length,a=0,s=r.i=r.j=r.m=0;for(r.S=[],r.c=[],o||(e=[o++]);a<n;)r.S[a]=a++;for(a=0;a<n;a++)t=r.S[a],s=s+t+e[a%o]&n-1,i=r.S[s],r.S[a]=i,r.S[s]=t;r.g=function(e){var t=r.S,i=r.i+1&n-1,o=t[i],a=r.j+o&n-1,s=t[a];t[i]=s,t[a]=o;for(var c=t[o+s&n-1];--e;)i=i+1&n-1,o=t[i],a=a+o&n-1,s=t[a],t[i]=s,t[a]=o,c=c*n+t[o+s&n-1];return r.i=i,r.j=a,c},r.g(n)}function c(e,t,n,i,r){if(n=[],r=typeof e,t&&"object"==r)for(i in e)if(i.indexOf("S")<5)try{n.push(c(e[i],t-1))}catch(e){}return n.length?n:e+("string"!=r?"\0":"")}function u(e,t,i,r){for(e+="",r=i=0;r<e.length;r++){var o=t,a=r&n-1,s=(i^=19*t[r&n-1])+e.charCodeAt(r);o[a]=s&n-1}e="";for(r in t)e+=String.fromCharCode(t[r]);return e}t.seedrandom=function(i,l){var d,p=[],i=u(c(l?[i,e]:arguments.length?i:[(new Date).getTime(),e,window],3),p);return d=new s(p),u(d.S,e),t.random=function(){for(var e=d.g(6),t=a,i=0;e<r;)e=(e+i)*n,t*=n,i=d.g(1);for(;e>=o;)e/=2,t/=2,i>>>=1;return(e+i)/t},i},a=t.pow(n,6),r=t.pow(2,r),o=2*r,u(t.random(),e)}([],Math,256,0,52),SeededRandom.prototype.nextBytes=SRnextBytes,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256,rng_state,rng_pool,rng_pptr;if(null==rng_pool){rng_pool=[],rng_pptr=0;var t;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}SecureRandom.prototype.nextBytes=rng_get_bytes;var sha256={hex:function(e){return SHA256(e)}},sha1={hex:function(e){return SHA1(e)}},MD5=function(e){function t(e,t){var n,i,r,o,a;return r=2147483648&e,o=2147483648&t,n=1073741824&e,i=1073741824&t,a=(1073741823&e)+(1073741823&t),n&i?2147483648^a^r^o:n|i?1073741824&a?3221225472^a^r^o:1073741824^a^r^o:a^r^o}function n(e,n,i,r,o,a,s){return e=t(e,t(t(n&i|~n&r,o),s)),t(e<<a|e>>>32-a,n)}function i(e,n,i,r,o,a,s){return e=t(e,t(t(n&r|i&~r,o),s)),t(e<<a|e>>>32-a,n)}function r(e,n,i,r,o,a,s){return e=t(e,t(t(n^i^r,o),s)),t(e<<a|e>>>32-a,n)}function o(e,n,i,r,o,a,s){return e=t(e,t(t(i^(n|~r),o),s)),t(e<<a|e>>>32-a,n)}function a(e){var t,n="",i="";for(t=0;t<=3;t++)i=e>>>8*t&255,i="0"+i.toString(16),n+=i.substr(i.length-2,2);return n}var s,c,u,l,d,p,f,h,m=[],m=function(e){for(var t,n=e.length,i=16*(((t=n+8)-t%64)/64+1),r=Array(i-1),o=0,a=0;a<n;)t=(a-a%4)/4,o=a%4*8,r[t]|=e.charCodeAt(a)<<o,a++;return r[(a-a%4)/4]|=128<<a%4*8,r[i-2]=n<<3,r[i-1]=n>>>29,r}(e=function(e){for(var e=e.replace(/\r\n/g,"\n"),t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e));for(d=1732584193,p=4023233417,f=2562383102,h=271733878,e=0;e<m.length;e+=16)s=d,c=p,u=f,l=h,d=n(d,p,f,h,m[e+0],7,3614090360),h=n(h,d,p,f,m[e+1],12,3905402710),f=n(f,h,d,p,m[e+2],17,606105819),p=n(p,f,h,d,m[e+3],22,3250441966),d=n(d,p,f,h,m[e+4],7,4118548399),h=n(h,d,p,f,m[e+5],12,1200080426),f=n(f,h,d,p,m[e+6],17,2821735955),p=n(p,f,h,d,m[e+7],22,4249261313),d=n(d,p,f,h,m[e+8],7,1770035416),h=n(h,d,p,f,m[e+9],12,2336552879),f=n(f,h,d,p,m[e+10],17,4294925233),p=n(p,f,h,d,m[e+11],22,2304563134),d=n(d,p,f,h,m[e+12],7,1804603682),h=n(h,d,p,f,m[e+13],12,4254626195),f=n(f,h,d,p,m[e+14],17,2792965006),p=n(p,f,h,d,m[e+15],22,1236535329),d=i(d,p,f,h,m[e+1],5,4129170786),h=i(h,d,p,f,m[e+6],9,3225465664),f=i(f,h,d,p,m[e+11],14,643717713),p=i(p,f,h,d,m[e+0],20,3921069994),d=i(d,p,f,h,m[e+5],5,3593408605),h=i(h,d,p,f,m[e+10],9,38016083),f=i(f,h,d,p,m[e+15],14,3634488961),p=i(p,f,h,d,m[e+4],20,3889429448),d=i(d,p,f,h,m[e+9],5,568446438),h=i(h,d,p,f,m[e+14],9,3275163606),f=i(f,h,d,p,m[e+3],14,4107603335),p=i(p,f,h,d,m[e+8],20,1163531501),d=i(d,p,f,h,m[e+13],5,2850285829),h=i(h,d,p,f,m[e+2],9,4243563512),f=i(f,h,d,p,m[e+7],14,1735328473),p=i(p,f,h,d,m[e+12],20,2368359562),d=r(d,p,f,h,m[e+5],4,4294588738),h=r(h,d,p,f,m[e+8],11,2272392833),f=r(f,h,d,p,m[e+11],16,1839030562),p=r(p,f,h,d,m[e+14],23,4259657740),d=r(d,p,f,h,m[e+1],4,2763975236),h=r(h,d,p,f,m[e+4],11,1272893353),f=r(f,h,d,p,m[e+7],16,4139469664),p=r(p,f,h,d,m[e+10],23,3200236656),d=r(d,p,f,h,m[e+13],4,681279174),h=r(h,d,p,f,m[e+0],11,3936430074),f=r(f,h,d,p,m[e+3],16,3572445317),p=r(p,f,h,d,m[e+6],23,76029189),d=r(d,p,f,h,m[e+9],4,3654602809),h=r(h,d,p,f,m[e+12],11,3873151461),f=r(f,h,d,p,m[e+15],16,530742520),p=r(p,f,h,d,m[e+2],23,3299628645),d=o(d,p,f,h,m[e+0],6,4096336452),h=o(h,d,p,f,m[e+7],10,1126891415),f=o(f,h,d,p,m[e+14],15,2878612391),p=o(p,f,h,d,m[e+5],21,4237533241),d=o(d,p,f,h,m[e+12],6,1700485571),h=o(h,d,p,f,m[e+3],10,2399980690),f=o(f,h,d,p,m[e+10],15,4293915773),p=o(p,f,h,d,m[e+1],21,2240044497),d=o(d,p,f,h,m[e+8],6,1873313359),h=o(h,d,p,f,m[e+15],10,4264355552),f=o(f,h,d,p,m[e+6],15,2734768916),p=o(p,f,h,d,m[e+13],21,1309151649),d=o(d,p,f,h,m[e+4],6,4149444226),h=o(h,d,p,f,m[e+11],10,3174756917),f=o(f,h,d,p,m[e+2],15,718787259),p=o(p,f,h,d,m[e+9],21,3951481745),d=t(d,s),p=t(p,c),f=t(f,u),h=t(h,l);return(a(d)+a(p)+a(f)+a(h)).toLowerCase()};RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.doPrivate=RSADoPrivate,RSAKey.prototype.setPrivate=RSASetPrivate,RSAKey.prototype.setPrivateEx=RSASetPrivateEx,RSAKey.prototype.generate=RSAGenerate,RSAKey.prototype.decrypt=RSADecrypt;var _RSASIGN_DIHEAD=[];_RSASIGN_DIHEAD.sha1="3021300906052b0e03021a05000414",_RSASIGN_DIHEAD.sha256="3031300d060960864801650304020105000420";var _RSASIGN_HASHHEXFUNC=[];_RSASIGN_HASHHEXFUNC.sha1=sha1.hex,_RSASIGN_HASHHEXFUNC.sha256=sha256.hex,RSAKey.prototype.signString=_rsasign_signString,RSAKey.prototype.signStringWithSHA1=_rsasign_signStringWithSHA1,RSAKey.prototype.signStringWithSHA256=_rsasign_signStringWithSHA256,RSAKey.prototype.verifyString=_rsasign_verifyString,RSAKey.prototype.verifyHexSignatureForMessage=_rsasign_verifyHexSignatureForMessage;var aes=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11]};return e.Init=function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++)e.Sbox_Inv[e.Sbox[t]]=t;for(e.ShiftRowTab_Inv=Array(16),t=0;t<16;t++)e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t;for(e.xtime=Array(256),t=0;t<128;t++)e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27},e.Done=function(){delete e.Sbox_Inv,delete e.ShiftRowTab_Inv,delete e.xtime},e.ExpandKey=function(t){var n,i=t.length,r=1;switch(i){case 16:n=176;break;case 24:n=208;break;case 32:n=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var o=i;o<n;o+=4){var a=t.slice(o-4,o);o%i==0?(a=[e.Sbox[a[1]]^r,e.Sbox[a[2]],e.Sbox[a[3]],e.Sbox[a[0]]],(r<<=1)>=256&&(r^=283)):i>24&&o%i==16&&(a=[e.Sbox[a[0]],e.Sbox[a[1]],e.Sbox[a[2]],e.Sbox[a[3]]]);for(var s=0;s<4;s++)t[o+s]=t[o+s-i]^a[s]}},e.Encrypt=function(t,n){var i=n.length;e.AddRoundKey(t,n.slice(0,16));for(var r=16;r<i-16;r+=16)e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,n.slice(r,r+16));e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.AddRoundKey(t,n.slice(r,i))},e.Decrypt=function(t,n){var i=n.length;for(e.AddRoundKey(t,n.slice(i-16,i)),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv),i-=32;i>=16;i-=16)e.AddRoundKey(t,n.slice(i,i+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv);e.AddRoundKey(t,n.slice(0,16))},e.SubBytes=function(e,t){for(var n=0;n<16;n++)e[n]=t[e[n]]},e.AddRoundKey=function(e,t){for(var n=0;n<16;n++)e[n]^=t[n]},e.ShiftRows=function(e,t){for(var n=[].concat(e),i=0;i<16;i++)e[i]=n[t[i]]},e.MixColumns=function(t){for(var n=0;n<16;n+=4){var i=t[n+0],r=t[n+1],o=t[n+2],a=t[n+3],s=i^r^o^a;t[n+0]^=s^e.xtime[i^r],t[n+1]^=s^e.xtime[r^o],t[n+2]^=s^e.xtime[o^a],t[n+3]^=s^e.xtime[a^i]}},e.MixColumns_Inv=function(t){for(var n=0;n<16;n+=4){var i=t[n+0],r=t[n+1],o=t[n+2],a=t[n+3],s=i^r^o^a,c=e.xtime[s],u=e.xtime[e.xtime[c^i^o]]^s;s^=e.xtime[e.xtime[c^r^a]],t[n+0]^=u^e.xtime[i^r],t[n+1]^=s^e.xtime[r^o],t[n+2]^=u^e.xtime[o^a],t[n+3]^=s^e.xtime[a^i]}},e}(),cryptico=function(){var e={};return aes.Init(),e.b256to64=function(e){var t,n,i,r="",o=0,a=0,s=e.length;for(i=0;i<s;i++)n=e.charCodeAt(i),0==a?(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>2&63),t=(3&n)<<4):1==a?(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|n>>4&15),t=(15&n)<<2):2==a&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|n>>6&3),o+=1,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&n)),o+=1,3==(a+=1)&&(a=0);return a>0&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),r+="="),1==a&&(r+="="),r},e.b64to256=function(e){var t,n,i="",r=0,o=0,a=e.length;for(n=0;n<a;n++)(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(n)))>=0&&(r&&(i+=String.fromCharCode(o|t>>6-r&255)),r=r+2&7,o=t<<r&255);return i},e.b16to64=function(e){var t,n,i="";for(e.length%2==1&&(e="0"+e),t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&n)<<4));(3&i.length)>0;)i+="=";return i},e.b64to16=function(e){var t,n,i="",r=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t)),v<0||(0==r?(i+=int2char(v>>2),n=3&v,r=1):1==r?(i+=int2char(n<<2|v>>4),n=15&v,r=2):2==r?(i+=int2char(n),i+=int2char(v>>2),n=3&v,r=3):(i+=int2char(n<<2|v>>4),i+=int2char(15&v),r=0));return 1==r&&(i+=int2char(n<<2)),i},e.string2bytes=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t},e.bytes2string=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e.blockXOR=function(e,t){for(var n=Array(16),i=0;i<16;i++)n[i]=e[i]^t[i];return n},e.blockIV=function(){var e=new SecureRandom,t=Array(16);return e.nextBytes(t),t},e.pad16=function(e){var t=e.slice(0),n=(16-e.length%16)%16;for(i=e.length;i<e.length+n;i++)t.push(0);return t},e.depad=function(e){for(e=e.slice(0);0==e[e.length-1];)e=e.slice(0,e.length-1);return e},e.encryptAESCBC=function(t,n){var i=n.slice(0);aes.ExpandKey(i);for(var r=e.string2bytes(t),r=e.pad16(r),o=e.blockIV(),a=0;a<r.length/16;a++){var s=r.slice(16*a,16*a+16),c=o.slice(16*a,16*a+16),s=e.blockXOR(c,s);aes.Encrypt(s,i),o=o.concat(s)}return i=e.bytes2string(o),e.b256to64(i)},e.decryptAESCBC=function(t,n){var i=n.slice(0);aes.ExpandKey(i);for(var t=e.b64to256(t),r=e.string2bytes(t),o=[],a=1;a<r.length/16;a++){var s=r.slice(16*a,16*a+16),c=r.slice(16*(a-1),16*(a-1)+16);aes.Decrypt(s,i),s=e.blockXOR(c,s),o=o.concat(s)}return o=e.depad(o),e.bytes2string(o)},e.wrap60=function(e){for(var t="",n=0;n<e.length;n++)n%60==0&&0!=n&&(t+="\n"),t+=e[n];return t},e.generateAESKey=function(){var e=Array(32);return(new SecureRandom).nextBytes(e),e},e.generateRSAKey=function(e,t){Math.seedrandom(sha256.hex(e));var n=new RSAKey;return n.generate(t,"03"),n},e.publicKeyString=function(t){return pubkey=e.b16to64(t.n.toString(16))},e.publicKeyID=function(e){return MD5(e)},e.publicKeyFromString=function(t){var t=e.b64to16(t.split("|")[0]),n=new RSAKey;return n.setPublic(t,"03"),n},e.encrypt=function(t,n,i){var r="",o=e.generateAESKey();try{var a=e.publicKeyFromString(n);r+=e.b16to64(a.encrypt(e.bytes2string(o)))+"?"}catch(e){return{status:"Invalid public key"}}return i&&(signString=cryptico.b16to64(i.signString(t,"sha256")),t+="::52cee64bb3a38f6403386519a39ac91c::",t+=cryptico.publicKeyString(i),t+="::52cee64bb3a38f6403386519a39ac91c::",t+=signString),r+=e.encryptAESCBC(t,o),{status:"success",cipher:r}},e.decrypt=function(t,n){var i=t.split("?");if(null==(r=n.decrypt(e.b64to16(i[0]))))return{status:"failure"};if(r=e.string2bytes(r),3==(i=e.decryptAESCBC(i[1],r).split("::52cee64bb3a38f6403386519a39ac91c::")).length){var r=e.publicKeyFromString(i[1]),o=e.b64to16(i[2]);return r.verifyString(i[0],o)?{status:"success",plaintext:i[0],signature:"verified",publicKeyString:e.publicKeyString(r)}:{status:"success",plaintext:i[0],signature:"forged",publicKeyString:e.publicKeyString(r)}}return{status:"success",plaintext:i[0],signature:"unsigned"}},e}();let defconf={application:{name:"Tooterminal",website:"https://wd-shiroma.github.io/",uris:"urn:ietf:wg:oauth:2.0:oob",scopes:{read:!0,write:!0,follow:!0}},terminal:{length:0},instances:{terminal:{logging:{favourite:!0,reblog:!0,mention:!0,following:!0},monitor:["local","notification"]},status:{}}},config,ins,url_params,acls,term_mode,mode_global,mode_configuration,mode_instance,mode_config_instance,instance_name,beep_buf,context=new AudioContext,client_info={modified:new Date("2017-10-29"),version:"1.0.1",auther:"Gusk-ma(Shiroma)",acct:"shiroma@mstdn.jp",website:"https://wd-shiroma.github.io/"},enterCommand=(e,t)=>{e=e.trim(),t.resize(window.innerWidth-36,window.innerHeight-36),0!==e.length&&!0!==term_mode.execute(e,t)&&t.error(term_mode.result.message)},completion=(e,t)=>{let n=term_mode.getCompletion(e);1===n.length?$.terminal.active().set_command(term_mode.completion):t(n.sort().filter(e=>e||"<cr>"))},initConfig=e=>{let t=localStorage.getItem("configuration"),n=new XMLHttpRequest;if(n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(0!==n.status&&200!==n.status||(n.response?context.decodeAudioData(n.response,function(e){beep_buf=e}):($.terminal.active().error("Error: ポコポコできません"),console.log("error"),beep_buf=void 0)))},n.open("GET","./sounds/boop.ogg",!0),n.send(""),config=new ConfigManager(defconf,t?JSON.parse(t):{}),url_params={},!location.search.match(/^\?.+=.+/))return;let i=location.search.replace(/^\?/,"").split(/[=&]/);for(let e=0;e<i.length;e+=2)url_params[i[e]]=i[e+1];url_params.hasOwnProperty("code")&&ins.name(url_params.instance_name)?(ins.get().auth_code=url_params.code,e.exec("instance "+ins.name()),history.replaceState("","",location.pathname)):url_params.hasOwnProperty("instance")&&ins.name(url_params.instance)&&e.exec("instance "+ins.name())},filterKey=(e,t)=>{if(63===e.charCode){let e=term_mode.information(t.get_command()).map(e=>void 0===e.command?e:"  "+tab(e.command,e.description,22));e.unshift(t.get_prompt()+t.get_command()+"?"),e.push(""),more(t,e,!0);let n=t.get_command();t.set_command(""),setTimeout(()=>{t.set_command(n)},10)}},parseCommand=(e,t)=>{try{term_mode.parse(e.replace(/\?$/,""))}catch(e){t.error("Invalid command characters. ([, \\)"),t.set_command("")}},init_instance=function(e){term_mode=mode_instance;let t=ins.get();t.hasOwnProperty("config")||(t.config=JSON.parse(JSON.stringify(config.find(["instances"]))),ins.save());let n;if(config.find(["instances","terminal","auto"])&&(n=(n=config.find(["instances","terminal","monitor"])).match(/(home|local|public|notification)/g)),url_params.hasOwnProperty("terminal")&&(n=url_params.terminal.match(/(home|local|public|notification)/g)),(n=n||[]).length>0&&t.hasOwnProperty("access_token")){"string"==typeof n&&(n=[n]);for(let e=0;e<n.length;e++)ws.monitor[n[e]]=!0;ws.startup=n[0],is_monitoring()||e.exec("terminal monitor")}},exit_instance=function(){term_mode=mode_global,closeTootbox(),ins.name("")},count_toot_size=()=>{let e=500-$("#toot_box").val().length-$("#toot_cw").val().length;$("#toot_size").css("color",e<0?"#F00":"#bbb").text(e)},tl;$(function(){mode_global=new ModeManager(new GlobalModeElement),mode_configuration=new ModeManager(new ConfigurationModeElement),mode_instance=new ModeManager(new InstanceModeElement),ins=new InstanceManager,term_mode=mode_global;let e='=== CLI画面風 マストドンクライアント "Tooterminal" ===\n                    Version '+client_info.version+", modified "+client_info.modified.getFullYear()+"/"+("0"+(client_info.modified.getMonth()+1)).slice(-2)+"/"+("0"+client_info.modified.getDate()).slice(-2)+'\n\n使い方は"help"コマンドまたは"?"キーを押してください。\n\n';tl=$("#timeline").terminal(enterCommand,{name:"global",greetings:e,login:!1,onInit:initConfig,prompt:"Tooterminal# ",completion:completion,height:window.innerHeight-18,onResize:e=>{e.resize($(window).width()-36,$(window).height()-36)},exit:!1,clear:!1,scrollOnEcho:!1,keypress:filterKey,onFocus:e=>!0,onCommandChange:parseCommand}),$("#toot").on("keydown",e=>{27===e.keyCode?closeTootbox():13===e.keyCode&&e.ctrlKey&&post_status()}).on("paste",e=>{$(".toot_media img").length>=4||void 0!==e.originalEvent.clipboardData&&void 0!==e.originalEvent.clipboardData.types&&1===e.originalEvent.clipboardData.types.length&&"Files"===e.originalEvent.clipboardData.types[0]&&upload_img(e.originalEvent.clipboardData.items[0].getAsFile())}),$("#toot_box").on("dragenter",e=>{e.preventDefault(),$("#toot_box").addClass("toot_imghover")}).on("dragover",e=>{}).on("dragleave",e=>{$("#toot_box").removeClass("toot_imghover")}).on("drop",e=>{e.preventDefault(),$("#toot_box").removeClass("toot_imghover");let t=e.originalEvent.dataTransfer.files,n=4-$("#toot_media img").length,i=n<t.length?n:t.length;for(let e=0;e<i;e++)t[e].type.match(/^(video|image)\//)&&upload_img(t[e])}),$("#toot_cw").on("keyup",count_toot_size),$("#toot_box").on("keyup",count_toot_size),$("#toot_post").on("click",()=>{post_status()}),$("#help_close").on("click",()=>{$("#help").slideUp("first"),$.terminal.active().focus()}),$("#reply_close").on("click",e=>{$("#sid").text(""),$("#reply").hide(),$("#toot_box").val($("#toot_box").val().replace(/^@[a-zA-Z0-9_]+(?:@(?:[A-Za-z0-9][A-Za-z0-9\-]{0,61}[A-Za-z0-9]?\.)+[A-Za-z0-9]+)?\s+/,""))}),$(".img_background").on("click",function(){$("#img_view").fadeOut("first"),$("#pre_view").fadeOut("first"),$("#video_view").fadeOut("first"),$(".img_background").fadeOut("first"),$.terminal.active().enable()}),$(document).on("click",".read_more",function(){$(this).next().toggle("fast")}).on("mouseover",".status",function(){void 0===config.find("instances.status.thumbnail")&&$(this).find(".status_thumbnail").show()}).on("mouseout",".status",function(){void 0===config.find("instances.status.thumbnail")&&$(this).find(".status_thumbnail").hide()}).on("click",".status",function(e){if($(this).hasClass("status_deleted"))return;$(this).data("sid");if(e.shiftKey){let e="@"+$(this).data("acct").toString(),t=/((?:@([a-zA-Z0-9_]+)@((?:[A-Za-z0-9][A-Za-z0-9\-]{0,61}[A-Za-z0-9]?\.)+[A-Za-z]+))|(?:@([a-zA-Z0-9_]+)))/g;$(this).find(".status_contents")[0].textContent.replace(new RegExp(e,"g"),"").match(t);$.terminal.active().disable(),$("#toot").slideDown("first"),$("#reply").show(),$("#sid").text($(this).data("sid")),$("#reply_head").text("reply to: "+$(this).data("dispname")),$("#reply_body").text($(this).find("#status_contents")[0].textContent),$("#toot_box").focus().val("@"+$(this).data("acct")+" "+$(this).data("reply")),$($(this).find(".status_head i")[2]).hasClass("fa-envelope")?$("#toot_visibility").val("direct"):$($(this).find(".status_head i")[2]).hasClass("fa-lock")?$("#toot_visibility").val("private"):$($(this).find(".status_head i")[2]).hasClass("fa-unlock")?$("#toot_visibility").val("unlisted"):$("#toot_visibility").val("public")}e.ctrlKey&&favourite(this),e.altKey&&boost(this)}).on("click",".status i",function(e){console.log(e);let t=$(e.target),n=t.parents(".status");t.hasClass("fa-star")||t.hasClass("fa-star-o")?favourite(n):(t.hasClass("fa-check-circle-o")||t.hasClass("fa-retweet"))&&boost(n)}).on("dblclick",".status",function(e){let t=$.terminal.active();"more"===t.name()&&t.pop(),"instance"===t.name()&&($(this).data("sid")>0?t.exec("show status id "+$(this).data("sid")):(t.pause(),callAPI("/api/v1/search",{type:"GET",data:{q:$(this).data("uri"),limit:1}}).then((e,n,i)=>{e.statuses.length>0?(t.resume(),t.exec("show status id "+e.statuses[0].id)):(t.echo("No status found. (Perhaps status was deleted)"),t.resume())})))}).on("click",".status img",function(e){let t=$(this);if($("#pre_view").attr("src",t.attr("src")).fadeIn("first"),"gifv"===t.data("type")){let e=$("#video_view")[0];e.src=t.data("url"),e.loop=!0,e.autoplay=!0,e.muted=!0,e.controls=!0,e.oncanplay=(()=>{$("#pre_view").fadeOut("first")}),$("#video_view").fadeIn("first"),$(".img_background").fadeIn("first")}else if("video"===t.data("type")){let e=$("#video_view")[0];e.src=t.data("url"),e.loop=!1,e.autoplay=!0,e.muted=!0,e.controls=!0,e.oncanplay=(()=>{$("#pre_view").fadeOut("first")}),$("#video_view").fadeIn("first"),$(".img_background").fadeIn("first")}else{let e=new Image;e.onload=(()=>{$("#img_view").attr("src",t.data("url"))}),e.onerror=(e=>{console.log(t),console.log(e)}),$(".img_background").fadeIn("first"),$.terminal.active().disable(),e.src=t.data("url")}}).on("click",".emoji_picker",function(e){let t=$.terminal.active();if("instance"!==t.name())return;$("#toot").is(":hidden")&&t.exec("toot");let n=$(this),i=$("#toot_box").val(),r=$("#toot_box").prop("selectionStart"),o=i.slice(0,r),a=i.slice(r);o.length>0&&o.slice(-1).match(/[^ \n]/)&&(o+=" ")," "!==a.slice(0,1)&&(a=" "+a);let s=o+n.data("tag")+a;r=s.length-a.length+1,$("#toot_box").val(s).prop("selectionStart",r).prop("selectionEnd",r).focus()}).on("click",".a_acct",function(e){let t=$.terminal.active();"more"===t.name()&&t.pop(),"instance"===t.name()&&callAPI("/api/v1/accounts/search",{data:{q:$(this).text().match(/((?:@?([a-zA-Z0-9_]+)@((?:[A-Za-z0-9][A-Za-z0-9\-]{0,61}[A-Za-z0-9]?\.)+[A-Za-z0-9]+))|(?:@([a-zA-Z0-9_]+)))/)[0],limit:1}}).then((e,n,i)=>{t.exec("show user id "+e[0].id)})}).on("click","[name=cmd_link]",e=>{let t=$.terminal.active(),n=$(e.target).data("type"),i=parseInt(t.rows()/5),r="show_followed"===n?"show user id "+$(e.target).data("uid")+" followers":"show_following"===n?"show user id "+$(e.target).data("uid")+" following":"show_statuses_pinned"===n?"show user id "+$(e.target).data("uid")+" statuses pinned":"show_statuses"===n?"show user id "+$(e.target).data("uid")+" statuses limit "+i:"request"===n?"request "+$(e.target).data("req")+" "+$(e.target).data("uid"):"show_faved"===n?"show statuses id "+$(e.target).data("sid")+" favourited":"show_att"===n?"show timeline local max_id "+($(e.target).data("sid")+1):"show_rebbed"===n?"show statuses id "+$(e.target).data("sid")+" reblogged":"del_status"===n&&"request delete "+$(e.target).data("sid");"more"===t.name()&&t.pop(),"instance"===t.name()&&r&&t.exec(r)}).on("keydown",".img_background",e=>{27===e.keyCode&&$(".img_background").trigger("click")}).on("click",".status_enquete span",function(e){let t=$(e.target).parent(),n=$(e.target).children().index(e.target),i=t.parents(".status"),r=Date.now()-Date.parse($(t).data("created")),o=$.terminal.active();r>3e4?o.error("The vote has expired."):callAPI("/api/v1/votes/"+$(i).data("sid"),{type:"POST",data:{item_index:n}}).then((t,n,i)=>{t.valid?o.echo("Vote: "+$(e.target).text()):o.error(t.message)},(e,t,n)=>{console.log(e)})}).on("click",".toot_media img",(e,t,n)=>{$(e.target).remove(),$("#toot_box").val($("#toot_box").val().replace($(e.target).data("url"),"")),0===$("#toot_media img").length&&$("#toot_media").slideUp("first")}).on("keydown",e=>{65===e.keyCode&&e.altKey&&term_mode===mode_instance?"none"===$("#toot").css("display")?$.terminal.active().exec("toot"):($("#toot_box").focus(),$.terminal.active().focus(!1)):e.target.id.match(/^toot_/)||e.ctrlKey||17===e.keyCode||e.altKey||18===e.keyCode||$.terminal.active().focus(!0,!0)}).on("click","a",e=>{let t=$(e.currentTarget).prop("href"),n=t.replace(/https?:\/\//,"").split("/"),i=($(e.currentTarget).parents(".status:first"),{}),r="";if(""===n[0])return!1;if("users"===n[1]&&(i.user=n[2]),n[1].match(/^@/)&&(i.user=n[1].replace("@",""),void 0!==n[2]&&(i.status=n[2])),"accounts"===n[2]&&(i.account=n[3]),"statuses"===n[3]&&(i.status=n[4]),"statuses"===n[2]&&(i.status=n[3]),"tags"===n[1]&&(i.tag=n[2]),i.tag?r="show timeline tag "+i.tag:n[0]===ins.get().domain&&i.status?r="show status id "+i.status:i.status?r="search local "+t:n[0]===ins.get().domain&&i.account?r="show user id "+i.account:i.user&&(r="show user name "+i.user+"@"+n[0]),""!==r){let e=$.terminal.active();"more"===e.name()&&e.pop(),"instance"===e.name()&&e.exec(r)}else window.open(t);return!1}),window.onerror=function(e,t,n,i,r){console.log([e,t,n,i,r])},autosize($("#toot_box"))}),String.prototype.addTab=function(e,t){return tab(e,this,t)};var twemoji=function(){"use strict";function e(e,t){return document.createTextNode(t?e.replace(m,""):e)}function t(e){return e.replace(y,s)}function n(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function i(e,t){for(var n,r,o=e.childNodes,a=o.length;a--;)3===(r=(n=o[a]).nodeType)?t.push(n):1!==r||"ownerSVGElement"in n||v.test(n.nodeName.toLowerCase())||i(n,t);return t}function r(e){return d(e.indexOf(g)<0?e.replace(m,""):e)}function o(t,n){for(var o,a,s,c,u,l,d,p,f,m,g,y,v,b=i(t,[]),_=b.length;_--;){for(s=!1,c=document.createDocumentFragment(),l=(u=b[_]).nodeValue,p=0;d=h.exec(l);){if((f=d.index)!==p&&c.appendChild(e(l.slice(p,f),!0)),g=d[0],y=r(g),p=f+g.length,v=n.callback(y,n)){(m=new Image).onerror=n.onerror,m.setAttribute("draggable","false"),o=n.attributes(g,y);for(a in o)o.hasOwnProperty(a)&&0!==a.indexOf("on")&&!m.hasAttribute(a)&&m.setAttribute(a,o[a]);m.className=n.className,m.alt=g,m.src=v,s=!0,c.appendChild(m)}m||c.appendChild(e(g,!1)),m=null}s&&(p<l.length&&c.appendChild(e(l.slice(p),!0)),u.parentNode.replaceChild(c,u))}return t}function a(e,n){return l(e,function(e){var i,o,a=e,s=r(e),c=n.callback(s,n);if(c){a="<img ".concat('class="',n.className,'" ','draggable="false" ','alt="',e,'"',' src="',c,'"'),i=n.attributes(e,s);for(o in i)i.hasOwnProperty(o)&&0!==o.indexOf("on")&&-1===a.indexOf(" "+o+"=")&&(a=a.concat(" ",o,'="',t(i[o]),'"'));a=a.concat("/>")}return a})}function s(e){return f[e]}function c(){return null}function u(e){return"number"==typeof e?e+"x"+e:e}function l(e,t){return String(e).replace(h,t)}function d(e,t){for(var n=[],i=0,r=0,o=0;o<e.length;)i=e.charCodeAt(o++),r?(n.push((65536+(r-55296<<10)+(i-56320)).toString(16)),r=0):55296<=i&&i<=56319?r=i:n.push(i.toString(16));return n.join(t||"-")}var p={base:"https://twemoji.maxcdn.com/2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(e){var t="string"==typeof e?parseInt(e,16):e;return t<65536?b(t):(t-=65536,b(55296+(t>>10),56320+(1023&t)))},toCodePoint:d},onerror:function(){this.parentNode&&this.parentNode.replaceChild(e(this.alt,!1),this)},parse:function(e,t){return t&&"function"!=typeof t||(t={callback:t}),("string"==typeof e?a:o)(e,{callback:t.callback||n,attributes:"function"==typeof t.attributes?t.attributes:c,base:"string"==typeof t.base?t.base:p.base,ext:t.ext||p.ext,size:t.folder||u(t.size||p.size),className:t.className||p.className,onerror:t.onerror||p.onerror})},replace:l,test:function(e){h.lastIndex=0;var t=h.test(e);return h.lastIndex=0,t}},f={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},h=/\ud83d[\udc68-\udc69](?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92])|(?:\ud83c[\udfcb\udfcc]|\ud83d\udd75|\u26f9)(?:\ufe0f|\ud83c[\udffb-\udfff])\u200d[\u2640\u2642]\ufe0f|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd37-\udd39\udd3d\udd3e\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|(?:[\u0023\u002a\u0030-\u0039])\ufe0f?\u20e3|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddd1-\udddd]|[\u270a\u270b])(?:\ud83c[\udffb-\udfff]|)|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud800\udc00|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef8]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd4c\udd50-\udd6b\udd80-\udd97\uddc0\uddd0\uddde-\udde6]|[\u23e9-\u23ec\u23f0\u23f3\u2640\u2642\u2695\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a]|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2694\u2696\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))/g,m=/\uFE0F/g,g=String.fromCharCode(8205),y=/[&<>'"]/g,v=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,b=String.fromCharCode;return p}();let ModeManager=function(){function e(e){this.element=e,this.dataset=e.dataset,this.parse("")}return e.prototype.execute=function(e,t){let n=this.parse(e);return n.is_parsed?"1001"==n.code||(""===this.func_name?(console.log("AnalyzeError: Undefined execution function name."),12033):"function"!=typeof n.cmd_list[0].execute?(console.log("ElementError: Undefined execution function."),12034):n.cmd_list[0].execute(t,this)):(console.log("AnalyzeError: "+n.message),n.code)},e.prototype.getCompletion=function(e){let t=this.result.cmd_list,n=[];for(let e=0;e<t.length;e++)n.push("paramater"===t[e].type?"<"+t[e].name+">":"number"===t[e].type?"["+t[e].name+"]":t[e].name);return n},e.prototype.information=function(e){let t,n=this.parse(e).cmd_list,i=["Exec commands:"];for(let e=0;e<n.length;e++){if("paramater"==n[e].type)t="<"+n[e].name+">";else if("number"==n[e].type){let i=parseInt(n[e].max),r=parseInt(n[e].min);t="<"+(isNaN(r)?"":r)+"-"+(isNaN(i)?"":i)+">"}else t=n[e].name;i.push({command:t,description:n[e].description})}let r=this.line_parsed[this.line_parsed.length-1];return void 0!==r&&"function"==typeof r.execute&&"paramater"!==r.type&&"number"!==r.type&&(2===i.length&&i.pop(),i.push({command:"<cr>",description:""})),i},e.prototype.parse=function(e,t){void 0===t&&(t=0),this.line=e,this.line_parsed=[],this.is_parsed=!0,this.err_code=0,this.err_msg="",this.position=t,this.completion="",this.cmd_list=this.dataset,this.paramaters={},this.optional={};let n=0,i="",r="",o="";if(e.length<=0)return this.result;if(e.match(/^\s*!/))return this.is_parsed=!0,this.err_code=4097,this.err_msg="comment",this.result;for(n=this.position;n<=e.length;n++){if(" "===(i=e.charAt(n))&&""===o){for(r="",o="";;)if(" "!==(i=e.charAt(++n))||""===i)break;if(this.completion=e.substring(0,n),1===this.cmd_list.length)this.line_parsed.push(this.cmd_list[0]),this.cmd_list="object"==typeof this.cmd_list[0].children?this.cmd_list[0].children:[];else if(this.cmd_list.length>1){this.err_code=7938,this.err_msg='% Ambiguous command:  "'+this.line+'"';break}}let t=(r+=i).match(/^(?:(')[^']+|(")[^"]+)$/);o=t?t[1]?"'":t[2]?'"':"":"";let s=[];for(var a=0;a<this.cmd_list.length;a++)if("command"===this.cmd_list[a].type){let e=new RegExp("^"+r,"i");this.cmd_list[a].name.match(e)&&s.push(this.cmd_list[a])}else if("number"===this.cmd_list[a].type){let e=parseInt(r),t=parseInt(this.cmd_list[a].max),n=parseInt(this.cmd_list[a].min);if(0===r.length)this.cmd_list[a].param=parseInt(r),s.push(this.cmd_list[a]);else{if(isNaN(e))continue;if(!isNaN(t)&&t<e)continue;if(!isNaN(n)&&n>e)continue;this.cmd_list[a].param=parseInt(r),s.push(this.cmd_list[a])}}else if("paramater"===this.cmd_list[a].type){let e=new RegExp("^[\"']?(.*?)[\"']?$");this.cmd_list[a].param=r.replace(e,"$1"),s.push(this.cmd_list[a])}else{if("description"!==this.cmd_list[a].type)return this.err_code=61441,this.err_msg="parsed error: undefined type '"+this.cmd_list[a].type+"'",this.result;if(1===this.cmd_list.length){n=e.length;break}}if(this.cmd_list=s,0===this.cmd_list.length){this.is_parsed=!1,this.err_code=7937;let e;for(e="";e.length<n;e+=" ");e+=$.terminal.active().get_prompt().replace(/\S/g," "),this.err_msg=e+"^\n% Invalid input detected at '^' marker.",this.cmd_list=[];break}}if(this.position=n,1===this.cmd_list.length){this.line_parsed.push(this.cmd_list[0]),void 0===this.cmd_list[0].execute&&(this.is_parsed=!1,this.err_code=4353,this.err_msg="% Incomplete command.");for(let e=0;e<this.line_parsed.length;e++)"paramater"!==this.line_parsed[e].type&&"number"!==this.line_parsed[e].type||(this.paramaters[this.line_parsed[e].name]=this.line_parsed[e].param),this.line_parsed[e].hasOwnProperty("optional")&&(this.optional[this.line_parsed[e].optional]=!0)}return 1===this.cmd_list.length&&"command"===this.cmd_list[0].type?this.completion+=this.cmd_list[0].name+" ":this.completion=this.line,this.result},Object.defineProperty(e.prototype,"func_name",{get:function(){if(0!==this.err_code)return"";{let e=this.line_parsed[this.line_parsed.length-1];return void 0===e.execute?"":e.execute}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return{is_parsed:this.is_parsed,cmd_list:this.cmd_list,code:this.err_code.toString(16),message:this.err_msg,position:this.position,line_parsed:this.line_parsed}},enumerable:!0,configurable:!0}),e.prototype.debug=function(){console.log("**************************************************"),console.log("===== line"),console.log(this.line),console.log("===== line_parsed"),console.log(this.line_parsed),console.log("===== is_parsed"),console.log(this.is_parsed),console.log("===== err_code"),console.log(this.err_code.toString(16)),console.log("===== err_msg"),console.log(this.err_msg),console.log("===== line.length"),console.log(this.line.length),console.log("===== position"),console.log(this.position),console.log("===== completion"),console.log(this.completion),console.log("===== dataset"),console.log(this.dataset),console.log("===== cmd_list"),console.log(this.cmd_list)},e}(),ConfigManager=function(){function e(e,t){this.default=JSON.parse(JSON.stringify(e)),this.config=t||e,this.config=Object.assign(e,this.config)}return e.prototype.find=function(e){if("string"==typeof e&&(e=e.split(".")),!Array.isArray(e))return;let t=this.config;for(let n=0;n<e.length;n++){if(void 0===t[e[n]]){t=void 0;break}t=t[e[n]]}if(void 0!==t)return t;t=this.default;for(let n=0;n<e.length&&void 0!==(t=t[e[n]]);n++);return t},e.prototype.write=function(e,t){if("string"==typeof e&&(e=e.split(".")),!Array.isArray(e))return!1;let n,i=this.config;for(let t=0;t<e.length-1;t++)void 0===i[n=e[t]]&&(i[n]={}),i=i[n];return n=e.pop(),i[n]=t,!0},e.prototype.erase=function(e){if("string"==typeof e&&(e=e.split(".")),!Array.isArray(e))return!1;let t,n=this.config;for(let i=0;i<e.length-1;i++){if(t=e[i],void 0===n[t])return!0;n=n[t]}return t=e.pop(),delete n[t],!0},e}(),InstanceManager=function(){function e(){let e=localStorage.getItem("instances");e?(this.instances=JSON.parse(e),this.parse_acl()):this.instances={},this._ins=void 0,this._name=""}return e.prototype.parse_acl=function(){this.acls={};for(let e in this.instances)if(this.acls[e]={},this.instances[e].hasOwnProperty("acl"))for(let t in this.instances[e].acl){let n,i=this.instances[e].acl[t],r=i.regexp,o=r.match(/^\/(.+)\/([igym]*)$/);n=o?new RegExp(o[1],o[2]):new RegExp(r),this.acls[e][t]={type:i.type,regexp:n,notify:!0===i.notify},i.color&&(this.acls[e][t].color=i.color),i.voice&&(this.acls[e][t].voice=i.voice)}},e.prototype.name=function(e){return"string"==typeof e&&(this._name=e,this._ins=this.instances[e]),this._name},e.prototype.save=function(){for(let e in this.instances)this.instances[e].hasOwnProperty("client_id")||delete this.instances[e];let e=JSON.stringify(this.instances);return localStorage.setItem("instances",e),!0},e.prototype.get=function(e){return void 0===e?this._ins:this.instances[e]},e.prototype.set=function(e,t){if(void 0===t&&(t=this.name()),!t)return!1;this.instances[t]=e,this._ins=e,this.save()},e.prototype.delete=function(e){return void 0===e&&(e=this._name),result=delete this.instances[e],result&&(this._name="",this._ins=void 0),this.save(),result},e.prototype.create=function(e){return this.instances.hasOwnProperty(e)||(this.instances[e]={},this.name(e)),this.instances[e]},e}();var GlobalModeElement=function(){function e(){this._cmd_mode="global",this._dataset=[{type:"command",name:"show",description:"情報を表示します。",children:[{type:"command",name:"instances",description:"全インスタンスの概要を表示します。",execute:this.show_instance_statistics,children:[{type:"command",name:"statistics",description:"全インスタンスの概要を表示します。",execute:this.show_instance_statistics},{type:"paramater",name:"instance_name",description:"指定インスタンスの詳細を表示します。",execute:this.show_instance_detail}]},{type:"command",name:"running-config",description:"設定されたコンフィグを確認します。",execute:this.show_running_config},{type:"command",name:"startup-config",description:"保存されたコンフィグを確認します。",execute:this.show_startup_config},{type:"command",name:"version",description:"クライアントのバージョンを表示します。",execute:this.show_version},{type:"command",name:"clock",description:"現在時刻を表示します。",execute:this.show_clock},{type:"command",name:"tech-support",description:"サポート問い合わせ用レポートファイルを出力します。",execute:this.show_tech,children:[{type:"command",name:"encrypt",optional:"encrypt",description:"ファイルを暗号化します。",execute:this.show_tech}]}]},{type:"command",name:"instance",description:"インスタンスモードに移行します。",children:[{type:"paramater",name:"instance_name",description:"インスタンスを登録します。",execute:this.entry_instance}]},{type:"command",name:"delete",description:"インスタンスの削除をします。",children:[{type:"command",name:"instance",children:[{type:"paramater",name:"instance_name",description:"インスタンス名",execute:this.delete_instance}]}]},{type:"command",name:"configure",description:"アプリケーションの設定を行います",children:[{type:"command",name:"terminal",description:"アプリケーションの設定を行います",execute:this.configure_terminal}]},{type:"command",name:"reload",description:"画面を再読み込みします。",execute:this.reload},{type:"command",name:"clear",description:"画面を消去します。",execute:this.clear},{type:"command",name:"write",description:"設定をローカルストレージに保存します。",execute:this.write_memory,children:[{type:"command",name:"memory",description:"設定をローカルストレージに保存します。",execute:this.write_memory},{type:"command",name:"erase",description:"ローカルストレージに保存された設定を削除します。",execute:this.write_erase}]},{type:"command",name:"reset",description:"ターミナルの状態をリセットします。",children:[{type:"command",name:"display-size",description:"ターミナルサイズを自動調整します。",execute:this.reset_display_size}]},{type:"command",name:"help",description:"ヘルプウインドウを表示します。",execute:this.help}]}return Object.defineProperty(e.prototype,"dataset",{get:function(){return this._dataset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cmd_mode",{get:function(){return this._cmd_mode},enumerable:!0,configurable:!0}),e.prototype.show_running_config=function(e,t){let n=JSON.stringify(config.config,null,"    ").replace(/\[/g,"［");return e.echo(n),!0},e.prototype.show_startup_config=function(e,t){let n,i=localStorage.getItem("configuration");return i?(n=JSON.parse(i),n=JSON.stringify(n,null,"    ")):n="startup-config is not present",e.echo(n),!0},e.prototype.show_version=function(e,t){return e.echo("Mastodon Client Tooterminal, Version "+client_info.version+", RELEASE SERVICE(Beta)"),e.echo("Technical Support: "+client_info.website),e.echo("Copyright (c) "+client_info.modified.getFullYear()+" by "+client_info.auther),e.echo("Updated "+client_info.modified.toDateString()+" by "+client_info.acct),e.echo("<br>",{raw:!0}),e.echo("Powered by:"),e.echo("jQuery ("+$.fn.jquery+")"),e.echo("https://jquery.org"),e.echo("jQuery Terminal Emulator Plugin ("+$.terminal.version+")"),e.echo("http://terminal.jcubic.pl"),e.echo("autosize (4.0.0)"),e.echo("http://www.jacklmoore.com/autosize"),e.echo("cryptico"),e.echo("http://wwwtyro.github.io/cryptico/"),e.echo("<br>",{raw:!0}),e.echo("License info:"),e.echo("Tooterminal, jQuery, jQuery Terminal Emulator Plugin, autosize is licensed by MIT LICENSE"),e.echo("https://tldrlegal.com/license/mit-license"),!0},e.prototype.reset_display_size=function(e,t){return e.resize(window.innerWidth-36,window.innerHeight-36),!0},e.prototype.show_instance_statistics=function(e,t){let n=["","name      | domain                      | scope | username","--------------------------------------------------------------------"],i=0;for(let e in ins.instances){let t=ins.get(e);n.push(("| "+(void 0!==t.user?"@"+t.user.username:"")).addTab("|  "+(t.application.scopes.read?"r":"-")+(t.application.scopes.write?"w":"-")+(t.application.scopes.follow?"f":"-"),8).addTab("| "+t.domain,30).addTab(e,10)),i++}return n.push("--------------------------------------------------------------------"),n.push(" 登録件数: "+i+"件"),n.push(""),e.echo(n.join("\n")),!0},e.prototype.show_instance_detail=function(e,t){let n=ins.name(t.paramaters.instance_name),i=ins.get();return i?(more(e,["Instance",tab("Name:",n,15),tab("Domain:",i.domain,15),"","Application",tab("Client Name:",i.application.name,17),tab("Client ID:",i.client_id,17),tab("Client Secret:",i.client_secret,17),tab("Website:",i.application.website,17),tab("Redirect URI:",i.application.uris,17),tab("Read:",i.application.scopes.read,17),tab("Write:",i.application.scopes.write,17),tab("Follow:",i.application.scopes.follow,17),"","Autheorized user",tab("Access Token:",i.access_token,20),tab("Monitor defaults:",i.monitor,20),tab("User Account:","@"+i.user.acct,20),tab("User ID:",i.user.id,20)],!0),!0):(e.error("instance has no regist"),!1)},e.prototype.entry_instance=function(e,t){function n(){let t=callAPI("/api/v1/accounts/verify_credentials"),n=callAPI("/api/v1/instance");$.when(t,n).then((t,n)=>{let r=t[0],o=r.display_name;r.hasOwnProperty("profile_emojis")&&r.profile_emojis.length>0&&(o=parse_emojis(o,r.profile_emojis)),o=twemoji.parse(o,(e,t)=>"./72x72/"+e+".png"),e.echo("<span>Hello! "+o+" @"+r.username+"</span>",{raw:!0}),i.user=r,i.info=n[0],ins.save(),e.resume();let a=i.user.username;return a+="@"+i.domain+"# ",delete i.auth_code,e.push(enterCommand,{name:"instance",prompt:a,onStart:init_instance,onExit:exit_instance,exit:!1}),this},(t,n)=>(console.log(jqxhr),e.error("Getting user status failed.("+t[0].status+")"),e.resume(),this))}ins.name(t.paramaters.instance_name);let i=ins.get();if(void 0===i)ins.create(t.paramaters.instance_name),e.push(regist_instance,{prompt:"Input instance domain: ",onExit:e=>{ins.save()},keydown:(e,t)=>{67===e.keyCode&&e.ctrlKey&&(t.echo(t.get_prompt()+t.get_command()),t.pop(),t.set_command(""))}});else if(i.hasOwnProperty("auth_code"))e.pause(),$.ajax({url:"https://"+i.domain+"/oauth/token",type:"POST",dataType:"json",data:{grant_type:"authorization_code",client_id:i.client_id,client_secret:i.client_secret,code:i.auth_code,redirect_uri:i.application.uris}}).then((e,t,r)=>(i.access_token=e.access_token,i.token_type=e.token_type,delete i.auth_code,ins.save(),n()),(t,n,r)=>{e.error("User token updating error.("+t.status+")"),delete i.auth_code,console.log(t)}).then((e,t)=>{},(t,n)=>{e.push(enterCommand,{name:"instance",prompt:prompt,onStart:function(e){term_mode=mode_instance,e.exec("login")},onExit:exit_instance,exit:!1})});else if(i.hasOwnProperty("access_token"))e.pause(),n();else{let t="@"+i.domain+"# ";e.echo("Enter 'login' and regist your access_token"),e.resume(),e.push(enterCommand,{name:"instance",prompt:t,onStart:function(e){term_mode=mode_instance,e.exec("login")},onExit:exit_instance,exit:!1})}return!0},e.prototype.delete_instance=function(e,t){let n='Instance "'+ins.name(t.paramaters.instance_name)+'" registration will delete! Continue? [confirm]';return void 0===ins.get()?(e.error("no instance registration."),!1):(e.push(t=>{ins.delete(),e.echo("[OK]"),e.echo("Erase of instance: complete"),e.pop()},{prompt:n,keypress:(e,t)=>{t.set_command(""),t.echo(n+e.key),t.echo("File system erase is not confirmed or Could not be completed"),t.pop()}}),!0)},e.prototype.configure_terminal=function(e,t){return e.push(enterCommand,{name:"configuration",prompt:"Tooterminal(config)# ",onStart:function(){term_mode=mode_configuration},onExit:function(){term_mode=mode_global},exit:!0}),!0},e.prototype.write_memory=function(e,t){let n=localStorage;return e.echo("Building configuration..."),n.setItem("configuration",JSON.stringify(config.config)),e.echo("[OK]"),!0},e.prototype.write_erase=function(e,t){let n="Erasing the localStorage will remove all configuration files! Continue? [confirm]";e.push(t=>{localStorage.removeItem("configuration"),e.echo("[OK]"),e.echo("Erase of nvram: complete"),e.pop()},{prompt:n,keypress:(e,t)=>{t.set_command(""),t.echo(n+e.key),t.echo("File system erase is not confirmed or Could not be completed"),t.pop()}})},e.prototype.reload=function(e,t){return location.reload(),!0},e.prototype.clear=function(e,t){return e.clear(),!0},e.prototype.show_clock=function(e,t){return e.echo(Date().toString()),!0},e.prototype.show_tech=function(e,t){let n=localStorage.getItem("configuration");n=n?JSON.parse(n):{};let i=new Date,r=localStorage.getItem("term_error");r=r?JSON.parse(r):[];let o=JSON.stringify({running_config:config.config,startup_config:n,default_config:config.default,instances:ins.instances,status:{created_at:i.getTime(),location:location.href},errors:r}),a="tech-support_"+i.getFullYear()+("0"+(i.getMonth()+1)).substr(-2)+("0"+i.getDate()).substr(-2)+("0"+i.getHours()).substr(-2)+("0"+i.getMinutes()).substr(-2)+("0"+i.getSeconds()).substr(-2)+".txt",s="";if(t.optional.encrypt){let e=[];for(o=encodeURIComponent(o);o.length;){let t=o.slice(0,30),n=cryptico.encrypt(t,"fxDuMgvOBYwvpkQvZ++boTmicqo3IqvJh/WsYw6IH1ClLowIn/7vm5DJiJKcU+OTRQgwp1KZuq1bZqam/OG3n1xEo7n/i4YJ38TtGUbdBdcxzKSx5xNP/CRtHrdMCbnKV8DxFocPM2GnCl7xvGbfFumEtSiCkCgODuGDQhz9xIRKgsI/VGgPlKzgAUT0tJaaSQeCSRtE3B0DZqZkXJChlGy+tpeytIokT9dGVdOLVe/DdgL/JpIjjgeBqul9T56BtFbrawUhv8CSoDPbLT4UxZ7qLKao/X5xd+cLQ031FnKxhhSz2/YUuoL2QM5qxZfVt/bSYAjy6ZtXwHY9UOXtOw==");e.push(n.cipher),o=o.slice(30)}s=e.join("\n")}else s=o;return OutputText(s,a),!0},e.prototype.help=function(e,t){return $("#help").slideDown("first"),e.disable(),$(document).on("keydown.help",e=>{27===e.keyCode&&$("#help_close").trigger("click")}),!0},e}();let cnt;var regist_instance=(e,t)=>{if((e=e.trim()).match(/^([A-Za-z0-9][A-Za-z0-9\-]{0,61}[A-Za-z0-9]?\.)+[A-Za-z]+$/)){if(e.length>0){t.pause();let n="https://"+e+"/api/v1/apps",i=location.origin+location.pathname,r=i.match(/^https?:\/\/([^\/:]+)(?::(\d+))?/),o=r&&!r[1].match(/(?:\d+\.){3}\d+$/);o||(i="urn:ietf:wg:oauth:2.0:oob");let a={client_name:config.find("application.name"),redirect_uris:i,website:config.find("application.website"),scopes:(config.find("application.scopes.read")?"read ":"")+(config.find("application.scopes.write")?"write ":"")+(config.find("application.scopes.follow")?"follow":"")};$.ajax({url:n,dataType:"json",type:"POST",data:a}).then((n,i,r)=>{let a=n.redirect_uri,s=ins.name();o&&(a+="?instance_name="+s);let c=JSON.parse(JSON.stringify(config.find("instances")));c.client_id=n.client_id,c.client_secret=n.client_secret,c.domain=e,c.application=config.find("application"),c.application.uris=a;let u="@"+c.domain+"# ";t.echo("New instance registed. enter 'login' and regist your access_token"),ins.set(c),t.resume(),t.push(enterCommand,{name:"instance",prompt:u,onStart:function(e){term_mode=mode_instance,u="@"+c.domain+"# ",c.hasOwnProperty("user")?(u=c.user.username+u,e.set_prompt(u)):e.exec("login")},onExit:function(){term_mode=mode_global,ins.name("")},exit:!1})},(i,r,o)=>{let s='Failed to connect the instance "'+e+'"';ins.delete(),t.error(s),term_error(s,{path:n,opts:a,jqxhr:i}),t.resume()})}}else t.error("domain couldn't unrecognize"),ins.delete();t.pop()},ConfigurationModeElement=function(){function e(){this._cmd_mode="configuration",this._dataset=[{type:"command",name:"application",description:"アプリケーション登録に関する設定を行います。",children:[{type:"command",name:"name",description:"アプリケーション名を設定します。",children:[{type:"paramater",name:"string",description:"アプリケーション名",execute:this.set_paramater}]},{type:"command",name:"website",description:"アプリケーションWebページを設定します。",children:[{type:"paramater",name:"string",description:"URL",execute:this.set_paramater}]},{type:"command",name:"scopes",description:"アクセス権限を設定します。",children:[{type:"command",name:"read",description:"読み取り",execute:this.set_default},{type:"command",name:"write",description:"書き込み",execute:this.set_default},{type:"command",name:"follow",description:"フォロー",execute:this.set_default}]}]},{type:"command",name:"terminal",description:"ターミナル表示に関する設定を行います。",children:[{type:"command",name:"length",description:"トゥート表示件数を設定します。",children:[{type:"number",name:"posts",min:1,max:40,description:"表示件数(デフォルト20)",execute:this.set_number}]}]},{type:"command",name:"instances",description:"インスタンス登録の際の雛形設定を行います。",children:[{type:"command",name:"terminal",description:"ストリーミングに関する設定をします。",children:[{type:"command",name:"monitor",description:"取得するタイムラインの設定をします。",children:[{type:"command",name:"home",description:"ホームタイムラインのストリーミングを有効にします。",execute:this.set_array},{type:"command",name:"local",description:"ローカルタイムラインのストリーミングを有効にします。",execute:this.set_array},{type:"command",name:"public",description:"連合タイムラインのストリーミングを有効にします。",execute:this.set_array},{type:"command",name:"notification",description:"連合タイムラインのストリーミングを有効にします。",execute:this.set_array}]},{type:"command",name:"logging",description:"ストリーミングに表示する通知の設定をします。",children:[{type:"command",name:"delete",description:"削除されたトゥートIDの通知を表示します。",execute:this.set_true},{type:"command",name:"favourite",description:"お気に入り登録の通知を表示します。",execute:this.set_default},{type:"command",name:"reblog",description:"ブーストの通知を表示します。",execute:this.set_default},{type:"command",name:"mention",description:"リプライの通知を表示します。",execute:this.set_default},{type:"command",name:"following",description:"フォロー通知を表示します。",execute:this.set_default}]},{type:"command",name:"notification",optional:"desktop_notification",description:"デスクトップ通知の設定をします。",children:[{type:"command",name:"favourite",description:"お気に入り登録の通知を表示します。",execute:this.set_true},{type:"command",name:"reblog",description:"ブーストの通知を表示します。",execute:this.set_true},{type:"command",name:"mention",description:"リプライの通知を表示します。",execute:this.set_true},{type:"command",name:"following",description:"フォローの通知を表示します。",execute:this.set_true}]},{type:"command",name:"boop",description:"通知音を設定します。",execute:this.set_true},{type:"command",name:"length",description:"トゥートの取得数について設定します。",children:[{type:"number",name:"number",max:100,min:0,description:"取得数(初期値20)",execute:this.set_number}]},{type:"command",name:"auto",description:"ログイン後、terminal monitorを自動発行します。",execute:this.set_true}]},{type:"command",name:"status",description:"トゥート表示に関する設定をします。",children:[{type:"command",name:"avatar",description:"アイコンを表示します。",execute:this.set_true,children:[{type:"command",name:"standard",description:"常にアイコンを表示し、マウスオーバーで動画GIFを再生します。",execute:this.set_command},{type:"command",name:"animation",description:"常に動画GIFを再生します。",execute:this.set_command},{type:"command",name:"mouseover",description:"アイコンは非表示、マウスオーバーで表示と動画GIFを再生します。",execute:this.set_command}]},{type:"command",name:"thumbnail",description:"サムネイル画像を表示します。",execute:this.set_true},{type:"command",name:"separator",description:"ステータス表示に区切り線を表示します。",execute:this.set_true}]},{type:"command",name:"visibility",description:"投稿範囲を設定します。",children:[{type:"command",name:"public",description:"公開",execute:this.set_command},{type:"command",name:"unlisted",description:"未収載",execute:this.set_command},{type:"command",name:"private",description:"非公開",execute:this.set_command},{type:"command",name:"direct",description:"ダイレクト",execute:this.set_command}]}]},{type:"command",name:"emojis",description:"絵文字関連の設定をします。",children:[{type:"command",name:"visible_in_picker",description:"unlistedカスタム絵文字を表示します。",execute:this.set_true}]},{type:"command",name:"no",optional:"is_no",description:"設定の削除を行います。",children:[{type:"command",name:"terminal",description:"ターミナル表示に関する設定を行います。",children:[{type:"command",name:"length",description:"ターミナル表示行数を設定します。",execute:this.set_default}]},{type:"command",name:"instances",description:"インスタンス登録の際の雛形設定を削除します。",children:[{type:"command",name:"terminal",description:"ストリーミングに関する設定を削除します。",children:[{type:"command",name:"monitor",description:"取得するタイムラインの設定を削除します。",children:[{type:"command",name:"home",description:"ホームタイムラインのストリーミングを無効にします。",execute:this.set_array},{type:"command",name:"local",description:"ローカルタイムラインのストリーミングを無効にします。",execute:this.set_array},{type:"command",name:"public",description:"連合タイムラインのストリーミングを無効にします。",execute:this.set_array},{type:"command",name:"notification",description:"連合タイムラインのストリーミングを無効にします。",execute:this.set_array}]},{type:"command",name:"logging",description:"ストリーミングに表示する通知の設定をします。",execute:this.set_false,children:[{type:"command",name:"delete",description:"削除されたトゥートIDの通知を非表示にします。",execute:this.set_default},{type:"command",name:"favourite",description:"お気に入り登録の通知を非表示にします。",execute:this.set_false},{type:"command",name:"reblog",description:"ブーストの通知を非表示にします。",execute:this.set_false},{type:"command",name:"mention",description:"リプライの通知を非表示にします。",execute:this.set_false},{type:"command",name:"following",description:"フォロー通知を非表示にします。",execute:this.set_false}]},{type:"command",name:"notification",optional:"desktop_notification",description:"デスクトップ通知の設定をします。",execute:this.set_false,children:[{type:"command",name:"favourite",description:"お気に入り登録の通知を非表示にします。",execute:this.set_default},{type:"command",name:"reblog",description:"ブーストの通知を非表示にします。",execute:this.set_default},{type:"command",name:"mention",description:"リプライの通知を非表示にします。",execute:this.set_default},{type:"command",name:"following",description:"フォロー通知を非表示にします。",execute:this.set_default}]},{type:"command",name:"boop",description:"通知音を無効にします。",execute:this.set_default}]},{type:"command",name:"broadcast-to",description:"投稿範囲を削除します。",execute:this.set_default},{type:"command",name:"status",description:"トゥート表示に関する設定を削除します。",children:[{type:"command",name:"avatar",description:"アイコンを非表示にします。",execute:this.set_default},{type:"command",name:"thumbnail",description:"サムネイル画像を非表示にします。",execute:this.set_default},{type:"command",name:"separator",description:"ステータス表示に区切り線を非表示にします。",execute:this.set_default}]}]},{type:"command",name:"emojis",description:"絵文字関連の設定をします。",children:[{type:"command",name:"visible_in_picker",description:"unlistedカスタム絵文字を非表示にします。",execute:this.set_default}]}]},{type:"command",name:"exit",description:"コンフィギュレーションモードに戻ります。",execute:this.exit_configuration},{type:"command",name:"end",description:"コンフィギュレーションモードを終了します。",execute:this.exit_configuration}]}return Object.defineProperty(e.prototype,"dataset",{get:function(){return this._dataset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cmd_mode",{get:function(){return this._cmd_mode},enumerable:!0,configurable:!0}),e.prototype.set_paramater=function(e,t){t.line_parsed.length;let n=[];for(let e=0;e<t.line_parsed.length-1;e++)n.push(t.line_parsed[e].name);return config.write(n,t.paramaters.string)},e.prototype.set_default=function(e,t){"no"===t.line_parsed[0].name&&t.line_parsed.shift();let n=[];for(let e=0;e<t.line_parsed.length-1;e++)n.push(t.line_parsed[e].name);return config.erase(n)},e.prototype.set_number=function(e,t){let n=parseInt(t.paramaters.number);return config.write(["instances","terminal","length"],n)},e.prototype.set_true=function(e,t){"no"===t.line_parsed[0].name&&t.line_parsed.shift();let n=[];for(let e=0;e<t.line_parsed.length;e++)n.push(t.line_parsed[e].name);return!0===t.optional.desktop_notification?Notification.requestPermission(function(e){"granted"===e?config.write(n,!0):console.log("Desktop-Notification is rejected: "+e)}):config.write(n,!0),!0},e.prototype.set_false=function(e,t){"no"===t.line_parsed[0].name&&t.line_parsed.shift();let n=[];for(let e=0;e<t.line_parsed.length;e++)n.push(t.line_parsed[e].name);return config.write(n,!1)},e.prototype.set_command=function(e,t){let n=[];for(let e=0;e<t.line_parsed.length-1;e++)n.push(t.line_parsed[e].name);return config.write(n,t.line_parsed.pop().name)},e.prototype.set_object=function(e,t){let n=[];for(let e=0;e<t.line_parsed.length;e++)n.push(t.line_parsed[e].name);return"object"==typeof config.find(n)||config.write(n,{})},e.prototype.set_array=function(e,t){!0===t.optional.is_no&&t.line_parsed.shift();let n=[];for(let e=0;e<t.line_parsed.length-1;e++)n.push(t.line_parsed[e].name);let i=config.find(n);return"object"!=typeof i&&(i=[]),i=i.filter(e=>e!==t.line_parsed[3].name),!0!==t.optional.is_no&&i.unshift(t.line_parsed[3].name),config.write(n,i)},e.prototype.entry_instance=function(e,t){return ins.instances.hasOwnProperty(t.paramaters.instance_name)?(e.push(enterCommand,{name:"ins_config",prompt:"Tooterminal(config-ins)# ",onStart:function(){term_mode=mode_config_instance,ins.name(t.paramaters.instance_name)},onExit:function(){term_mode=mode_configuration,ins.name("")}}),!0):(e.error("No instance name."),!1)},e.prototype.set_broadcast=function(e,t){return e.echo("executed!"),!0},e.prototype.exit_configuration=function(e,t){return e.pop(),!0},e}(),ws={stream:[],startup:"local",monitor:{home:!1,local:!1,public:!1,tag:!1,notification:!1}};let InstanceModeElement=function(){function e(){this._cmd_mode="global",this._user_max=9999999,this._sh_stats_opt=[{type:"command",name:"limit",optional:"limit",description:"取得トゥート数",children:[{type:"number",name:"post_limits",min:1,max:40,description:"トゥート数(初期値20)",execute:this.show_statuses,children:[{type:"command",name:"max_id",optional:"max_id",description:"指定ID以前のトゥートを表示",children:[{type:"paramater",name:"status_id",description:"トゥートID",execute:this.show_statuses}]}]}]},{type:"command",name:"max_id",optional:"max_id",description:"指定ID以前のトゥートを表示",children:[{type:"paramater",name:"status_id",description:"トゥートID",execute:this.show_statuses,children:[{type:"command",name:"limit",optional:"limit",description:"取得トゥート数",children:[{type:"number",name:"post_limits",min:1,max:40,description:"トゥート数(初期値20)",execute:this.show_statuses}]}]}]}],this._acl_opts=[{type:"command",name:"color",optional:"is_color",description:"背景色を設定します",children:[{type:"command",name:"red",description:"赤色",execute:this.set_acl},{type:"command",name:"green",description:"緑色",execute:this.set_acl},{type:"command",name:"blue",description:"青色",execute:this.set_acl},{type:"command",name:"yellow",description:"黄色",execute:this.set_acl},{type:"command",name:"purple",description:"紫色",execute:this.set_acl},{type:"command",name:"cyan",description:"水色",execute:this.set_acl},{type:"command",name:"dark-red",description:"濃赤色",execute:this.set_acl},{type:"command",name:"dark-blue",description:"紺色",execute:this.set_acl},{type:"command",name:"dark-green",description:"深緑色",execute:this.set_acl},{type:"command",name:"dark-yellow",description:"山吹色",execute:this.set_acl},{type:"command",name:"dark-purple",description:"紫紺色",execute:this.set_acl},{type:"command",name:"dark-cyan",description:"藍色",execute:this.set_acl}]},{type:"command",name:"notification",optional:"is_notify",description:"デスクトップ通知を設定します。",execute:this.set_acl},{type:"command",name:"voice",optional:"is_voice",description:"合成音声を設定します。",children:[{type:"paramater",name:"voice_text",description:"文字",execute:this.set_acl}]}],this._dataset=[{type:"command",name:"toot",description:"書き込みを投稿します。",execute:this.toot,children:[{type:"command",name:"public",description:'公開範囲を "公開" に設定します。',execute:this.toot},{type:"command",name:"unlisted",description:'公開範囲を "未収載" に設定します。',execute:this.toot},{type:"command",name:"private",description:'公開範囲を "非公開" に設定します。',execute:this.toot}]},{type:"command",name:"show",description:"情報を表示します。",children:[{type:"command",name:"access-list",description:"正規表現フィルターを表示します。",execute:this.show_acl},{type:"command",name:"terminal",description:"再生中のストリーミング情報を表示します。",execute:this.show_terminal},{type:"command",name:"emojis",description:"絵文字を表示します。",children:[{type:"command",name:"custom",description:"カスタム絵文字を表示します。",execute:this.show_emojis_custom,children:[{type:"paramater",name:"keyword",optional:"keyword",description:"検索ワード",execute:this.show_emojis_custom}]}]},{type:"command",name:"user",description:"ユーザー情報を表示します。",execute:this.show_user,children:[{type:"command",name:"id",description:"ユーザーIDを指定",children:[{type:"number",name:"userid",min:1,max:this._user_max,description:"ユーザID",execute:this.show_user,children:[{type:"command",name:"statuses",description:"ユーザの最新トゥートを表示",execute:this.show_statuses,children:this._sh_stats_opt.concat([{type:"command",name:"pinned",optional:"pinned",description:"固定トゥートを表示します。",execute:this.show_statuses},{type:"command",name:"media",optional:"media",description:"メディアトゥートを表示します。",execute:this.show_statuses}])},{type:"command",name:"following",description:"フォローアカウントを表示します。",execute:this.show_follows},{type:"command",name:"followers",description:"フォロワーアカウントを表示します。",execute:this.show_follows}]}]},{type:"command",name:"self",description:"ログインユーザー",execute:this.show_user,children:[{type:"command",name:"statuses",description:"ユーザの最新トゥートを表示",execute:this.show_statuses,children:this._sh_stats_opt},{type:"command",name:"following",description:"フォローアカウントを表示します。",execute:this.show_follows},{type:"command",name:"followers",description:"フォロワーアカウントを表示します。",execute:this.show_follows}]},{type:"command",name:"name",description:"ユーザ名・アカウント名から検索表示",children:[{type:"paramater",name:"account",description:"ユーザ名・アカウント名",execute:this.show_user}]}]},{type:"command",name:"instance",description:"インスタンス情報を表示します。",execute:this.show_instance},{type:"command",name:"application",description:"クライアント情報を表示します。",execute:this.show_application},{type:"command",name:"timeline",description:"タイムラインの最新トゥートを表示します。",execute:this.show_statuses,children:[{type:"command",name:"home",description:"ホームタイムライン",execute:this.show_statuses,children:this._sh_stats_opt},{type:"command",name:"local",description:"ローカルタイムライン",execute:this.show_statuses,children:this._sh_stats_opt},{type:"command",name:"public",description:"連合タイムライン",execute:this.show_statuses,children:this._sh_stats_opt},{type:"command",name:"tag",description:"ハッシュタグ",children:[{type:"paramater",name:"tag_name",description:"タグ名",execute:this.show_statuses,children:this._sh_stats_opt}]},{type:"command",name:"notifications",description:"通知タイムライン",execute:this.show_notifications,children:this._sh_stats_opt}]},{type:"command",name:"statuses",description:"トゥートを表示します。",children:[{type:"command",name:"id",description:"トゥートIDを指定",children:[{type:"paramater",name:"status_id",description:"トゥートID",execute:this.show_status_id,children:[{type:"command",name:"favourited",description:"お気に入りユーザー一覧",execute:this.show_follows},{type:"command",name:"reblogged",description:"ブーストユーザー一覧",execute:this.show_follows}]}]}]}]},{type:"command",name:"search",description:"検索を行います",children:[{type:"command",name:"local",description:"インスタンス内から検索します。",children:[{type:"paramater",name:"query",description:"検索キーワード",execute:this.search_query}]},{type:"command",name:"tootsearch",description:"tootsearchエンジンを利用して検索します。",children:[{type:"paramater",name:"query",description:"検索キーワード",execute:this.search_query}]}]},{type:"command",name:"login",description:"インスタンスにログインをし、アクセストークンを更新します",execute:this.login},{type:"command",name:"terminal",description:"ストリーミングの設定を行います。",execute:this.terminal_monitor,children:[{type:"command",name:"monitor",optional:"on_monitor",description:"ストリーミングを有効にします。",execute:this.terminal_monitor,children:[{type:"command",name:"notification",description:"通知タイムラインをモニターします。",execute:this.terminal_monitor},{type:"command",name:"home",description:"ホームタイムラインをモニターします。",execute:this.terminal_monitor},{type:"command",name:"local",description:"ローカルタイムラインをモニターします。",execute:this.terminal_monitor},{type:"command",name:"public",description:"連合タイムラインをモニターします。",execute:this.terminal_monitor},{type:"command",name:"tag",description:"ハッシュタグをモニターします。",children:[{type:"paramater",name:"hashtag",description:"ハッシュタグ文字列",execute:this.terminal_monitor}]}]},{type:"command",name:"no",description:"ストリーミングを無効にします。",execute:this.terminal_monitor,optional:"no_monitor",children:[{type:"command",name:"monitor",description:"ストリーミングを無効にします。",execute:this.terminal_monitor}]}]},{type:"command",name:"request",description:"他ユーザーに対してリクエストを送信します。",children:[{type:"command",name:"follow",description:"フォローします。",children:[{type:"number",name:"user_id",min:1,max:this._user_max,description:"ユーザーID",execute:this.request_relationship}]},{type:"command",name:"unfollow",description:"フォローを解除します。",children:[{type:"number",name:"user_id",min:1,max:this._user_max,description:"ユーザーID",execute:this.request_relationship}]},{type:"command",name:"mute",description:"ミュートします",children:[{type:"number",name:"user_id",min:1,max:this._user_max,description:"ユーザーID",execute:this.request_relationship}]},{type:"command",name:"unmute",description:"ミュートを解除します。",children:[{type:"number",name:"user_id",min:1,max:this._user_max,description:"ユーザーID",execute:this.request_relationship}]},{type:"command",name:"block",description:"ブロックします。",children:[{type:"number",name:"user_id",min:1,max:this._user_max,description:"ユーザーID",execute:this.request_relationship}]},{type:"command",name:"unblock",description:"ブロック解除します。",children:[{type:"number",name:"user_id",min:1,max:this._user_max,description:"ユーザーID",execute:this.request_relationship}]},{type:"command",name:"remote-follow",description:"リモートフォローします。",children:[{type:"paramater",name:"acct",description:"アカウントID",execute:this.request_remote_follow}]},{type:"command",name:"delete",description:"トゥートを削除します。",children:[{type:"paramater",name:"status_id",description:"トゥートID",execute:this.request_delete_status}]}]},{type:"command",name:"access-list",description:"正規表現フィルタを設定します。",children:[{type:"number",name:"acl_num",description:"ACL番号",min:1,max:99,children:[{type:"command",name:"deny",description:"非表示にするトゥート",children:[{type:"paramater",name:"regular_expression",description:"正規表現文字列",execute:this.set_acl}]},{type:"command",name:"permit",description:"強調するトゥート",children:[{type:"paramater",name:"regular_expression",description:"正規表現文字列",execute:this.set_acl,children:this._acl_opts}]},{type:"command",name:"add",optional:"is_add",description:"既存ACLに通知方法を追加",children:this._acl_opts},{type:"command",name:"drop",description:"フィルターの無効化",children:[{type:"paramater",name:"regular_expression",description:"正規表現文字列",execute:this.set_acl}]}]}]},{type:"command",name:"no",description:"設定を削除します。",children:[{type:"command",name:"access-list",description:"正規表現フィルタを削除します。",execute:this.set_acl,children:[{type:"number",name:"acl_num",description:"正規表現文字列",min:1,max:99,execute:this.set_acl}]}]},{type:"command",name:"clear",description:"画面を消去します。",execute:this.clear},{type:"command",name:"exit",description:"インスタンスモードを終了します。",execute:this.exit}]}return Object.defineProperty(e.prototype,"dataset",{get:function(){return this._dataset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cmd_mode",{get:function(){return this._cmd_mode},enumerable:!0,configurable:!0}),e.prototype.login=function(e,t){e.pause();let n=ins.get(),i=encodeURIComponent(n.application.uris),r="https://"+n.domain+"/oauth/authorize?response_type=code&client_id="+n.client_id+"&redirect_uri="+i+"&scope="+(n.application.scopes.read?"read ":"")+(n.application.scopes.write?"write ":"")+(n.application.scopes.follow?"follow":"");return i.match(/^https?%3A%2F%2F/)?(location.href=r,e.pause(),!0):(window.open(r,"_blank"),e.push((e,t)=>{0==e.trim().length&&t.pop(),t.pause(),t.prompt="",$.ajax({url:"https://"+n.domain+"/oauth/token",type:"POST",dataType:"json",data:{grant_type:"authorization_code",redirect_uri:n.application.uris,client_id:n.client_id,client_secret:n.client_secret,code:e.trim()}}).then((e,t,i)=>(n.access_token=e.access_token,n.token_type=e.token_type,ins.save(),callAPI("/api/v1/accounts/verify_credentials")),(e,n,i)=>{t.error("User token updating error.("+e.status+")"),console.log(e)}).then((e,i,r)=>{t.echo("Hello! "+e.display_name+" @"+e.username),n.user=e,ins.save(),t.resume();let o=n.user.username;o+="@"+n.domain+"# ",delete n.auth_code,t.pop()},(e,n,i)=>{console.log(e),t.error("Getting user status failed.("+e.status+")"),t.resume()})},{prompt:"Input Authentication Code: "}),!0)},e.prototype.terminal_monitor=function(e,t){if(!0===t.optional.on_monitor){ins.get();let n,i=[],r=ws.startup;if(void 0===t.line_parsed[2]){let e=config.find("instances.terminal.monitor");"string"==typeof e&&(e=e?e.match(/(home|local|public|notification)/g):void 0),void 0===e&&(e=[]);for(let t=0;t<e.length;t++)ws.monitor[e[t]]=!0;for(let e in ws.monitor)ws.monitor[e]&&i.push({type:e});!url_params.terminal&&e.length>0&&(r=e[0])}else"tag"===t.line_parsed[2].name?(i.push({type:t.line_parsed[2].name,hashtag:t.paramaters.hashtag}),r=t.line_parsed[2].name,n=t.paramaters.hashtag):(i.push({type:t.line_parsed[2].name}),r=t.line_parsed[2].name);let o=config_notify(),a=!1;for(let e in o)a=a||e;for(let t=0;t<i.length;t++)!function(t,n){if("tag"===t&&"string"!=typeof n)return e.error("Hashtag is undefined."),!1;let i={};if("home"===t||"notification"===t){for(let e=0;e<ws.stream.length;e++)if("user"===ws.stream[e].type)return ws.monitor[t]=!0,!0;i.type="user"}else if("tag"===t){for(let e=0;e<ws.stream.length;e++)if("tag"===ws.stream[e].type&&ws.stream[e].name===n)return ws.monitor.tag=!0,!0;i.type="tag",i.name=n}else{for(let e=0;e<ws.stream.length;e++)if(ws.stream[e].type===t)return ws.monitor[t]=!0,!0;i.type=t}let r=ins.get(),o="wss://"+r.domain+"/api/v1/streaming?access_token="+r.access_token;if("home"===t||"notification"===t)o+="&stream=user";else if("local"===t)o+="&stream=public:local";else if("public"===t)o+="&stream=public";else{if("tag"!==t)return e.error("Monitor stream type error."),!1;o+="&stream=hashtag&tag="+n}let a="home"===t||"notification"===t?'<i class="fa fa-home" aria-hidden="true"></i> USER':"local"===t?'<i class="fa fa-users" aria-hidden="true"></i> LOCAL':"public"===t?'<i class="fa fa-globe" aria-hidden="true"></i> GLOBAL':"tag"===t?'<i class="fa fa-tag" aria-hidden="true"></i> HASHTAG: '+n:"???";ws.monitor[t]=!0;let s=config_notify(),c=!1;for(let e in s)c=c||e;let u="home"===t||"notification"===t?function(t){let n,i=JSON.parse(t.data);if("delete"===i.event)n=i.payload,$("[name=id_"+n+"]").addClass("status_deleted"),s.delete&&e.error("deleted ID:"+n);else if("notification"===i.event&&!0===ws.monitor.notification){let t=make_notification(n=JSON.parse(i.payload),s);e.echo(t.html,{raw:!0}),t.hasOwnProperty("status")&&e.echo(t.html,{raw:!0});let r=config.find(["instances","terminal","notification"]);if(void 0===r&&(r={}),beep_buf&&!0===config.find(["instances","terminal","boop"])){let e=context.createBufferSource();e.buffer=beep_buf,e.connect(context.destination),e.start(0)}let o,a;"favourite"===n.type&&r.favourite&&t.html?(o="お気に入り： ",a=n.status.content):"reblog"===n.type&&r.reblog&&t.html?(o="ブースト： ",a=n.status.content):"mention"===n.type&&r.mention&&t.html?(o="リプライ： ",a=n.status.content):"follow"===n.type&&r.following&&t.html&&(o="フォロー： "),"string"==typeof a&&(a=$(a).text()).length>100&&(a=a.slice(0,100)),void 0!==o&&(o+=n.account.display_name+" @"+n.account.acct,new Notification(o,{body:a,icon:n.account.avatar_static,data:n}).onclick=function(e){e.srcElement.close()})}else if("update"===i.event&&!0===ws.monitor.home){let t=makeStatus(n=JSON.parse(i.payload),{tl_name:a});if(t.visibility){if(e.echo(t.html,{raw:!0}),t.notification.voice){var r=new SpeechSynthesisUtterance(t.notification.voice);r.rate=1.3,r.lang="ja-JP",speechSynthesis.speak(r)}t.notification.desktop&&(new Notification(t.notification.desktop.title,{body:t.notification.desktop.body,icon:t.notification.desktop.icon,data:t.payload}).onclick=function(e){e.srcElement.close()})}}reduce_status()}:function(t){let n,i=JSON.parse(t.data);if("delete"===i.event)n=i.payload,$("[name=id_"+n+"]").addClass("status_deleted"),s.delete&&e.error("deleted ID:"+n);else if("update"===i.event){let t=makeStatus(n=JSON.parse(i.payload),{tl_name:a});if(t.visibility){if(e.echo(t.html,{raw:!0}),t.notification.voice){var r=new SpeechSynthesisUtterance(t.notification.voice);r.rate=1.3,r.lang="ja-JP",speechSynthesis.speak(r)}t.notification.desktop&&(new Notification(t.notification.desktop.title,{body:t.notification.desktop.body,icon:t.notification.desktop.icon,data:t.payload}).onclick=function(e){e.srcElement.close()})}}reduce_status()},l=new WebSocket(o);l.onmessage=u,l.onopen=(n=>{e.echo(t+" Streaming start.")}),l.onerror=((n,i,r)=>{e.error(t+" Streaming error. closed.")}),l.onclose=((n,i,r)=>{e.echo(t+" Streaming closed.")}),i.ws=l,ws.stream.push(i)}(i[t].type,i[t].hashtag);if(r){let i=r,o="/api/v1/timelines/"+("local"===i?"public":i),a=config.find(["instances","terminal","length"]);a=a>0?a:20,params={limit:a},"local"===i?params.local=!0:"tag"===i?o+="/"+n:"notification"===i&&(o="/api/v1/notifications"),e.pause(),callAPI(o,{data:params}).then((n,r,o)=>{let a=config_notify();for(let r=n.length-1;r>=0;r--)if(!t.optional.pinned||n[r].pinned)if("notification"===i){let t=make_notification(n[r],a);e.echo(t.html,{raw:!0,flush:!1})}else{let t=makeStatus(n[r]);e.echo(t.html,{raw:!0,flush:!1})}e.resume(),e.flush()})}}else if(!0===t.optional.no_monitor){for(let e=0;e<ws.stream.length;e++)ws.stream[e].ws.close(),ws.stream[e]=void 0;for(let e in ws.monitor)ws.monitor[e]=!1;ws.stream=[]}},e.prototype.toot=function(e,t){let n;void 0===(n=void 0!==t.line_parsed[1]?t.line_parsed[1].name:config.find("instances.visibility"))&&(n="public"),$("#toot_visibility").val(n),$("#toot").slideDown("first"),$("#toot_box").focus(),e.focus(!1)},e.prototype.monitor=function(e,t){ins.get().monitor="tag"===t.line_parsed[1].name?t.paramaters.hashtag:t.line_parsed[1].name,ins.save()},e.prototype.show_user=function(e,t){function n(t){let n,i;ins.get().user;n=callAPI("/api/v1/accounts/"+t,{type:"GET"}),i=callAPI("/api/v1/accounts/relationships?id[]="+t,{type:"GET"}),api_pinned=callAPI("/api/v1/accounts/"+t+"/statuses",{data:{pinned:!0}}),$.when(n,i,api_pinned).then((n,i,r)=>{let o=n[0],a=(n[2],i[0]),s=(i[2],r[0]),c=(r[2],new Date(o.created_at)),u=parseInt((Date.now()-c.getTime())/6e4),l=u%60,d=(u=(u-l)/60)%24,p=(u=(u-d)/24)%7,f=(u-p)/7,h="<span>Relationship ";if(a[0].id===t?h+="self.</span>":h+='others.<br /><a name="cmd_link" data-uid="'+o.id+'" data-type="request" data-req="'+(a[0].following?'unfollow">':'follow">No ')+"following</a>, "+(a[0].followed_by?"":"No ")+"followed, "+(a[0].requested?"":"No ")+'requesting, <a name="cmd_link" data-uid="'+o.id+'" data-type="request" data-req="'+(a[0].muting?'unmute">':'mute">No ')+'muting</a>, <a name="cmd_link" data-uid="'+o.id+'" data-type="request" data-req="'+(a[0].blocking?'unblock">':'block">No ')+"blocking</a></span>",e.echo(o.display_name+" ID:"+o.id+(o.locked?" is locked":" is unlocked"),{flush:!1}),e.echo("Username is "+o.username+", Fullname is "+o.acct,{flush:!1}),e.echo("Created at "+c.toString(),{flush:!1}),e.echo("Uptime is "+f+" weeks, "+p+" days, "+d+" hours, "+l+" minutes ("+u+" days have passed)",{flush:!1}),e.echo("<span>"+$("<a />").attr("name","cmd_link").attr("data-uid",o.id).attr("data-type","show_statuses").text(o.statuses_count+" statuses posted").prop("outerHTML")+", "+$("<a />").attr("name","cmd_link").attr("data-uid",o.id).attr("data-type","show_following").text(o.following_count+" accounts are following").prop("outerHTML")+", "+$("<a />").attr("name","cmd_link").attr("data-uid",o.id).attr("data-type","show_followed").text(o.followers_count+" accounts are followed").prop("outerHTML")+"</span>",{raw:!0,flush:!1}),e.echo("1 day toot rate "+parseInt(o.statuses_count/u)+" posts/day",{flush:!1}),e.echo(h,{raw:!0,flush:!1}),e.echo($.terminal.format("Note:"+o.note),{raw:!0,flush:!1}),e.echo("URL: "+o.url,{raw:!1,flush:!1}),s.length>0&&s[0].pinned){e.echo("<br />",{raw:!0,flush:!1}),e.echo("[[ub;;]Pinned statuses]",{flush:!1});for(let t=0;t<s.length;t++){if(t>2){let n=$("<a />").attr("name","cmd_link").attr("data-uid",s[t].account.id).attr("data-type","show_statuses_pinned").text("... and more pinned status");e.echo(n.prop("outerHTML"),{raw:!0,flush:!1});break}{let n=makeStatus(s[t]);e.echo(n.html,{raw:!0,flush:!1})}}}e.echo("[OK]",{flush:!1}),e.flush(),e.resume()},(t,n,i)=>{console.log(t);JSON.parse(t.responseText);e.echo("Getting user data failed.("+t+")"),e.resume()})}e.pause();void 0===t.line_parsed[2]||"self"===t.line_parsed[2].name?n(ins.get().user.id):"name"===t.line_parsed[2].name?callAPI("/api/v1/search",{type:"GET",data:{q:t.paramaters.account,limit:1}}).then((t,i,r)=>{t.accounts.length>0?n(t.accounts[0].id):(e.echo("No Accounts."),e.resume())}):n(t.paramaters.userid)},e.prototype.search_query=function(e,t){if(e.pause(),"local"===t.line_parsed[1].name)callAPI("/api/v1/search",{type:"GET",data:{q:t.paramaters.query}}).then((t,n,i)=>{let r=15;for(let e=0;e<t.accounts.length;e++)r<t.accounts[e].acct.length&&(r=t.accounts[e].acct.length);if(r+=7,t.statuses.length>0){e.echo("[[b;;]Statuses:]",{flush:!1});for(let n=0;n<t.statuses.length;n++){let i=makeStatus(t.statuses[n]);e.echo(i.html,{raw:!0,flush:!1})}e.flush()}else{let n;for(n="---------------";n.length<r;n+="-");n+="----------------------------";let i=["[[bu;;]Accounts:]","| display name".addTab("| account name",r).addTab("id",9),n];for(let e=0;e<t.accounts.length;e++)i.push(("| "+t.accounts[e].display_name).addTab("| @"+t.accounts[e].acct,r).addTab(t.accounts[e].id,9));i.push("----------------------------------------------------------"),i.push("  該当件数："+t.accounts.length+"件"),i.push(""),i.push("[[bu;;]Hash tags:]"),i.push("-----------------------------------");for(let e=0;e<t.hashtags.length;e++)i.push("#"+t.hashtags[e]);i.push("-----------------------------------"),i.push("  該当件数："+t.hashtags.length+"件"),e.echo(i.join("\n"))}e.resume()},(t,n,i)=>{e.error("Search request is failed.("+t.status+")"),console.log(t),e.resume()});else{let i,r=0,o=[],a=parseInt(e.rows()/5);if("https://wd-shiroma.github.io"!==window.location.origin)return e.error('Sorry! tootsearch permit only acceess from "https://wd-shiroma.github.io"'),e.resume(),!1;function n(t){if(t>0){t=o.length<t?o.length:t;for(let n=0;n<t;n++){let t=o.shift();e.echo(t,{raw:!0,flush:!1})}e.flush()}}if("tootsearch"!==t.line_parsed[1].name)return e.error("Invalid search source."),e.resume(),!1;i="https://tootsearch.chotto.moe/api/v1/search?sort=created_at%3Adesc&q="+encodeURIComponent(t.paramaters.query),e.echo("[[b;;]Searching powered by tootsearch:]",{flush:!1}),e.push(function(e,t){},{name:"more",prompt:"--More-- ",onStart:function(e){e.pause(),$.ajax({url:i+"&from="+r,dataType:"json",timeout:15e3}).then((t,i,s)=>{let c=t.hits.hits,u=[];if(c.length>0){for(let e=0;e<c.length;e++)if("toot"===c[e]._type&&(c[e]._source.id=0,u.indexOf(c[e]._source.uri)<0)){let t=makeStatus(c[e]._source);o.push(t.html),u.push(c[e]._source.uri)}n(a),r=c.length,t.hits.total<=c.length&&e.pop()}else e.echo("no hits."),e.pop();e.resume()},(t,n,i)=>{e.error("Search request is failed.("+t.status+")"),console.log(t),e.pop(),e.resume()})},keydown:function(e,t){switch(e.keyCode){case 27:case 81:t.pop(),t.set_command("");case 16:case 17:case 18:break;case 13:default:t.pause();let s=13===e.keyCode?1:a;o.length>0?(n(s),t.resume(),0===o.length&&r>=data.hits.total&&t.pop()):$.ajax({url:i+"&from="+r,dataType:"json",timeout:15e3}).then((e,i,a)=>{let c=[],u=e.hits.hits;if(0!==u.length){o=[];for(let e=0;e<u.length;e++)if(u[e]._source.id=0,c.indexOf(u[e]._source.uri)<0){let t=makeStatus(u[e]._source);t.html.length&&(o.push(t.html),c.push(u[e]._source.uri))}n(s),t.resume(),r+=u.length,0===o.length&&r>=e.hits.total&&t.pop()}else t.pop()},(e,n,i)=>{console.log(e),t.error("Getting data is failed.("+e.status+")")}),setTimeout(()=>{t.set_command("")},10)}return!0}})}},e.prototype.show_instance=function(e,t){e.pause(),callAPI("/api/v1/instance",{type:"GET"}).then((t,n,i)=>{e.echo("======== API Information ========",{flush:!1}),e.echo("Instance name: "+t.title,{flush:!1}),e.echo("Version: "+t.version,{flush:!1}),e.echo("Description: "+t.description,{flush:!1}),e.echo("E-mail: "+t.email,{flush:!1}),e.echo("URI: "+t.uri,{flush:!1}),t.hasOwnProperty("stats")&&(e.echo("Connection instances: "+t.stats.domain_count,{flush:!1}),e.echo("Posted toots: "+t.stats.status_count,{flush:!1}),e.echo("Registed users: "+t.stats.user_count,{flush:!1})),e.echo("Streaming uri: "+t.urls.streaming_api,{flush:!1}),e.echo("[OK]",{flush:!1}),e.flush(),e.resume()},(t,n,i)=>{e.error("Getting instance data is failed.("+t.status+")"),console.log(t),e.resume()})},e.prototype.show_application=function(e,t){e.pause(),callAPI("/api/v1/apps/verify_credentials",{type:"GET"}).then((t,n,i)=>{let r=JSON.stringify(t,null,"    ");e.echo(r),e.resume()},(t,n,i)=>{console.log(t),e.resume()})},e.prototype.exit=function(e,t){e.pop()},e.prototype.show_statuses=function(e,t){e.pause();let n,i,r=t.optional.limit&&t.paramaters.post_limits>0?t.paramaters.post_limits:config.find(["instances","terminal","length"]);if(r=r>0?r:20,"timeline"===t.line_parsed[1].name){let e=void 0===t.line_parsed[2]?"local":t.line_parsed[2].name;n="/api/v1/timelines/"+("local"===e?"public":e),i={limit:r},"local"===e?i.local=!0:"tag"===e&&(n+="/"+t.paramaters.tag_name)}else if("user"===t.line_parsed[1].name){let o=2===t.line_parsed.length||"self"===t.line_parsed[2].name?ins.get().user.id:"id"===t.line_parsed[2].name?t.paramaters.userid:-1;if(!(o>0))return void e.error("no login.");i={limit:r},!0===t.optional.pinned&&(i.pinned=!0),!0===t.optional.media&&(i.only_media=!0),n="/api/v1/accounts/"+o+"/statuses"}t.optional.max_id&&(i.max_id=t.paramaters.status_id),void 0!==n?callMore(n,e=>!(t.optional.pinned&&!e.pinned)&&makeStatus(e).html,{params:i,term:e,limit:r,footer:"[OK]"}):e.error("show status error.")},e.prototype.show_status_id=function(e,t){e.pause();let n=t.paramaters.status_id;$.when(callAPI("/api/v1/statuses/"+n,{type:"GET"}),callAPI("/api/v1/statuses/"+n+"/context",{type:"GET"}),callAPI("/api/v1/statuses/"+n+"/card",{type:"GET"})).then((t,n,i)=>{let r,o=t[0],a=n[0],s=i[0];for(let t=0;t<a.ancestors.length;t++)r=makeStatus(a.ancestors[t]),e.echo(r.html,{raw:!0,flush:!1});if(r=makeStatus(o),e.echo(r.html,{raw:!0,flush:!1}),s.hasOwnProperty("url")){let t=$("<a />").attr("href",s.url).attr("target","_blank").addClass("status_card").append($("<div />").append($("<span />").text("[ "+s.title+" ]")).append($("<br />")).append($("<span />").text(s.description)));!0===config.find(["instances","status","avater"])&&t.append($("<img />").attr("src",s.image));let n=new Image;n.onload=(()=>{$("[name=card_"+o.id+"] img").attr("src",s.image)}),n.onerror=(e=>{console.log(e)}),n.src=s.image,e.echo(t.prop("outerHTML"),{raw:!0,flush:!1}),e.echo("<br />",{raw:!0,flush:!1})}let c=o.favourites_count>0?$("<a />").attr("name","cmd_link").attr("data-type","show_faved").attr("data-sid",o.id):$("<span />");c.text(o.favourites_count+" account favourited,");let u=o.reblogs_count>0?$("<a />").attr("name","cmd_link").attr("data-type","show_rebbed").attr("data-sid",o.id):$("<span />");u.text(o.reblogs_count+" account reblogged.");let l=$("<a />").attr("name","cmd_link").attr("data-type","show_att").attr("data-sid",o.id).text("> check the LTL of the time.");if(e.echo(c.prop("outerHTML")+" "+u.prop("outerHTML"),{raw:!0,flush:!1}),e.echo(l.prop("outerHTML"),{raw:!0,flush:!1}),e.echo("URL: "+o.url,{flush:!1}),o.account.id===ins.get().user.id){let t=$("<a />").attr("name","cmd_link").attr("data-type","del_status").attr("data-sid",o.id).text("> delete this status.");e.echo("<br />"+t.prop("outerHTML"),{raw:!0,flush:!1})}config.find("instances.status.separator")&&e.echo(Array($.terminal.active().cols()-5).join("-"),{flush:!1});for(let t=0;t<a.descendants.length;t++)r=makeStatus(a.descendants[t]),e.echo(r.html,{raw:!0,flush:!1});e.flush(),e.resume()},(t,n,i)=>{e.error("Getting statuses is failed.("+t.status+")"),console.log(t),e.resume()})},e.prototype.show_follows=function(e,t){e.pause();let n,i,r;if("user"===t.line_parsed[1].name)2===t.line_parsed.length||"self"===t.line_parsed[2].name?(i=ins.get().user.id,r=t.line_parsed[3].name):(i=t.paramaters.userid,r=t.line_parsed[4].name),n="/api/v1/accounts/"+i+"/"+r;else{if("statuses"!==t.line_parsed[1].name)return e.error("Invalid Command"),!0;n="/api/v1/statuses/"+(i=t.paramaters.status_id)+("favourited"===t.line_parsed[4].name?"/favourited_by":"reblogged"===t.line_parsed[4].name?"/reblogged_by":"")}return callMore(n,e=>{let t=e.display_name;return t.length>20&&(t=t.substr(0,20)+"..."),t=("| "+t+" @"+e.acct).addTab(e.id,9)},{limit:40,header:"Accounts:\n"+"| account name".addTab("id",9)+"\n"+Array(35).join("-"),term:e,raw:!1,next:(e,t)=>{let n=t.getResponseHeader("link").match(/max_id=(\d+)/);return null!==n?parseInt(n[1]):0}}),!0},e.prototype.show_notifications=function(e,t){e.pause();let n={},i=config_notify(),r=20;return t.paramaters.post_limits&&(r=t.paramaters.post_limits),n.limit=r,callMore("/api/v1/notifications",e=>make_notification(e,i).html,{limit:r,term:e}),!0},e.prototype.show_acl=function(e,t){let n=ins.acls[ins.name()];if(n){for(let t in n)e.echo("Standard Status access list "+t),e.echo("    "+n[t].type+" regexp "+n[t].regexp.toString()+("permit"===n[t].type&&n[t].hasOwnProperty("color")?", color "+n[t].color:"")+("permit"===n[t].type&&n[t].notify?", notification":"")+("permit"===n[t].type&&n[t].hasOwnProperty("voice")?', voice "'+n[t].voice+'"':""));return!0}},e.prototype.set_acl=function(e,t){function n(e){t.optional.is_color?e.color=t.line_parsed[5].name:t.optional.is_notify?(e.notify=!0,Notification.requestPermission()):t.optional.is_voice?e.voice=t.paramaters.voice_text:e.color="dark-blue"}let i=ins.get();if(i.hasOwnProperty("acl")||(i.acl={}),"no"===t.line_parsed[0].name)t.paramaters.hasOwnProperty("acl_num")?delete i.acl[t.paramaters.acl_num]:(delete i.acl,i.acl={});else if(t.optional.is_add){if(!i.acl[t.paramaters.acl_num])return e.error("access-list has no rule."),!1;"permit"!==i.acl[t.paramaters.acl_num].type&&e.error("add option apply to permit lists."),n(i.acl[t.paramaters.acl_num])}else{i.acl[t.paramaters.acl_num]={};let e=i.acl[t.paramaters.acl_num];e.type=t.line_parsed[2].name,e.regexp=t.paramaters.regular_expression,"permit"===e.type&&n(e)}return ins.parse_acl(),ins.save(),!0},e.prototype.show_terminal=function(e,t){e.echo("Monitoring streams"),e.echo(tab("Home:",ws.monitor.home?"ON":"OFF",15)),e.echo(tab("Notification:",ws.monitor.notification?"ON":"OFF",15)),e.echo(tab("Local:",ws.monitor.local?"ON":"OFF",15)),e.echo(tab("Public:",ws.monitor.public?"ON":"OFF",15)),e.echo(tab("Tags:",ws.monitor.tag?"ON":"OFF",15)),e.echo("\n",{raw:!0}),e.echo("WebSocket objects");for(let t=0;t<ws.stream.length;t++){let n=ws.stream[t],i="Line "+(t+1).toString()+", type "+n.type;"tag"===n.type&&(i+=' "'+n.name+'"'),e.echo("\n",{raw:!0}),e.echo(i),e.echo("Connecting url, "+n.ws.url),e.echo("Ready Stete, "+(n.ws.readyState===WebSocket.CONNECTING?"CONNECTING":n.ws.readyState===WebSocket.OPEN?"OPEN":n.ws.readyState===WebSocket.CLOSING?"CLOSING":n.ws.readyState===WebSocket.CLOSED?"CLOSED":"UNKNOWN("+n.ws.readyState+")")),e.echo("Protocol type, "+n.ws.protocol),e.echo("Binary type, "+n.ws.binaryType),e.echo("Extensions, "+n.ws.extensions)}},e.prototype.request_relationship=function(e,t){if(t.paramaters.user_id===ins.get().user.id)return e.error("Request ID is yourself."),!1;e.pause(),callAPI("/api/v1/accounts/"+t.paramaters.user_id+"/"+t.line_parsed[1].name,{type:"POST"}).then((t,n,i)=>{console.log(t),e.echo("Request was accepted.\n"+tab("Following",t.following?"Yes":"No",14)+"\n"+tab("Followed",t.followed_by?"Yes":"No",14)+"\n"+tab("Requested",t.requested?"Yes":"No",14)+"\n"+tab("Mute",t.muting?"Yes":"No",14)+"\n"+tab("Block",t.blocking?"Yes":"No",14)),e.resume()},(t,n,i)=>{e.error("Getting data is failed.("+t.status+")"),console.log(t),e.resume()})},e.prototype.request_remote_follow=function(e,t){let n=t.paramaters.acct;if(!n.match(/^((?:@?([a-zA-Z0-9_]+)@((?:[A-Za-z0-9][A-Za-z0-9\-]{0,61}[A-Za-z0-9]?\.)+[A-Za-z]+))|(?:@([a-zA-Z0-9_]+)))$/))return e.error("Invalid Account ID. (username@domain)"),!1;e.pause(),callAPI("/api/v1/follows?uri="+n,{type:"POST"}).then((t,n,i)=>{console.log(t);e.echo("Request was accepted.\nFollowing "+t.acct),e.resume()},(t,n,i)=>{e.error("Getting data is failed.("+t.status+")"),console.log(t),e.resume()})},e.prototype.show_status_actions=function(e,t){e.pause(),callMore(path,e=>{}),callAPI(path,{type:"GET"}).then((t,n,i)=>{for(let e=0;e<t.length;e++)callMore();e.resume()},(t,n,i)=>{e.error("Getting data is failed.("+t.status+")"),console.log(t),e.resume()})},e.prototype.request_delete_status=function(e,t){let n=t.paramaters.status_id,i="ID "+n+" status will delete! Continue? Y/[N]: ";e.push(t=>{e.echo("Canceled."),e.pop()},{prompt:i,keypress:(e,t)=>{t.echo(t.get_prompt()+e.key),89===e.keyCode||121===e.keyCode?(t.pause(),t.echo("[OK]"),callAPI("/api/v1/statuses/"+n,{type:"DELETE"}).then((e,n,i)=>{t.echo("Erase of status: complete"),t.resume()},(e,n,i)=>{t.error("Deleteing status is failed("+e.status+")"),console.log(e),t.resume()})):t.echo("Canceled."),t.pop()},onExit:e=>{setTimeout(()=>{e.set_command("")},10)}})},e.prototype.show_emojis_custom=function(e,t){let n,i=ins.get().info.version.split(".");if(!0===t.optional.custom&&i[0]<2)return e.error("This instance version has no support for Custom Emojis.(< 2.0.0)"),!1;t.optional.keyword&&(n=new RegExp(t.paramaters.keyword)),e.pause(),callAPI("/api/v1/custom_emojis",{type:"GET"}).then((t,i,r)=>{t=t.sort((e,t)=>e.shortcode>t.shortcode?1:-1);let o,a=[];for(let e=0;e<t.length;e++)!0!==config.find(["emojis","visible_in_picker"])&&!1===t[e].visible_in_picker||n&&!t[e].shortcode.match(n)||(o=":"+t[e].shortcode+":",a.push($("<div />").addClass("emoji_picker").attr("data-tag",o).append($("<img />").attr("alt",o).attr("title",o).attr("src",t[e].url)).prop("outerHTML")));e.echo("<span>"+a.join("")+"</span>",{raw:!0}),e.resume()},(t,n,i)=>{e.error("Getting data is failed.("+t.status+")"),console.log(t),e.resume()})},e.prototype.template=function(e,t){e.pause(),callAPI("/api/v1/instance",{type:"GET"}).then((t,n,i)=>{let r=JSON.stringify(t,null,"    ");e.echo(r),e.resume()},(t,n,i)=>{e.error("Getting data is failed.("+t.status+")"),console.log(t),e.resume()})},e.prototype.clear=function(e,t){return e.clear(),!0},e}();
//# sourceMappingURL=tooterminal.min.js.map